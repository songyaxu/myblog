<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>并非菜鸟的博客</title>
  
  <subtitle>代码的世界我不懂.</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://us-forever.com/"/>
  <updated>2018-08-22T03:38:45.724Z</updated>
  <id>https://us-forever.com/</id>
  
  <author>
    <name>YaxuSong</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>jira-managing-project-permissions</title>
    <link href="https://us-forever.com/2018/08/22/jira-managing-project-permissions/"/>
    <id>https://us-forever.com/2018/08/22/jira-managing-project-permissions/</id>
    <published>2018-08-22T03:30:54.000Z</published>
    <updated>2018-08-22T03:38:45.724Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Project-permissions-一览"><a href="#Project-permissions-一览" class="headerlink" title="Project permissions 一览"></a>Project permissions 一览</h1><table><thead><tr><th>Project permissions</th><th>Explanation</th></tr></thead><tbody><tr><td>Administer projects</td><td>Permission to administer a project in Jira. This includes the ability to edit project role membership, project components, project versions, and some project details (‘Project Name’, ‘URL’, ‘Project Lead’,’avatar’, ‘Project Description’).</td></tr></tbody></table><p><a href="https://confluence.atlassian.com/adminjiraserver/managing-project-permissions-938847145.html" target="_blank" rel="noopener">managing-project-permissions</a></p>]]></content>
    
    <summary type="html">
    
      jira-managing-project-permissions
    
    </summary>
    
    
      <category term="读书笔记" scheme="https://us-forever.com/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>SpringBoot使用Swagger2</title>
    <link href="https://us-forever.com/2018/06/11/SpringBoot-integration-with-Swagger2/"/>
    <id>https://us-forever.com/2018/06/11/SpringBoot-integration-with-Swagger2/</id>
    <published>2018-06-10T18:04:44.000Z</published>
    <updated>2019-04-04T07:44:01.950Z</updated>
    
    <content type="html"><![CDATA[<h1 id="一、简介"><a href="#一、简介" class="headerlink" title="一、简介"></a>一、简介</h1><p>Swagger2是一款可以生成RESTful接口文档的工具。而且书写起来很方便，开发人员秩序维护代码，不用额外书写文档。使用起来跟方便，而且呈现的方式很棒。还支持在线测试。</p><h1 id="二、SpringBoot集成"><a href="#二、SpringBoot集成" class="headerlink" title="二、SpringBoot集成"></a>二、SpringBoot集成</h1><p>我这里时使用的最新版本2.9.2<br>我这里项目是使用Maven构建的。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- start swagger --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger-ui<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- end swagger --&gt;</span></span><br></pre></td></tr></table></figure><a id="more"></a><p>配置文件<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xxx.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.builders.ApiInfoBuilder;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.builders.PathSelectors;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.builders.RequestHandlerSelectors;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.service.ApiInfo;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.service.Contact;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.spi.DocumentationType;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.spring.web.plugins.Docket;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.swagger2.annotations.EnableSwagger2;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> ：yaxuSong</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: 增加swagger的rest API查看</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 13:20 2018/8/20</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Modified</span> by:</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@EnableSwagger</span>2</span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Swagger2Config</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//是否开启swagger，正式环境一般是需要关闭的，可根据springboot的多环境配置进行设置</span></span><br><span class="line">    <span class="meta">@Value</span>(value = <span class="string">"$&#123;swagger.enabled&#125;"</span>)</span><br><span class="line">    Boolean swaggerEnabled;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Docket <span class="title">createRestApi</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Docket(DocumentationType.SWAGGER_2).apiInfo(apiInfo())</span><br><span class="line">            <span class="comment">// 是否开启</span></span><br><span class="line">            .enable(swaggerEnabled).select()</span><br><span class="line">            <span class="comment">// 扫描的路径包</span></span><br><span class="line">            .apis(RequestHandlerSelectors.basePackage(<span class="string">"com.xxx.controller"</span>))</span><br><span class="line">            <span class="comment">// 指定路径处理PathSelectors.any()代表所有的路径</span></span><br><span class="line">            .paths(PathSelectors.any()).build().pathMapping(<span class="string">"/"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> ApiInfo <span class="title">apiInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ApiInfoBuilder()</span><br><span class="line">            .title(<span class="string">"后端服务接口详情"</span>)</span><br><span class="line">            .description(<span class="string">"yaxuSong"</span>)</span><br><span class="line">            <span class="comment">// 作者信息</span></span><br><span class="line">            .contact(<span class="keyword">new</span> Contact(<span class="string">"yaxuSong"</span>, <span class="string">"https://weaf.top"</span>, <span class="string">"earth@weaf.top"</span>))</span><br><span class="line">            .version(<span class="string">"1.0.0"</span>)</span><br><span class="line">            .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>部分项目配置不同可能需要配置访问静态文件的路径<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> ：yaxuSong</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: 允许访问Swagger ui静态页面</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 13:20 2018/8/20</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Modified</span> by:</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebMvcConfig</span> <span class="keyword">extends</span> <span class="title">WebMvcConfigurerAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> </span>&#123;</span><br><span class="line">        registry.addResourceHandler(<span class="string">"/static/**"</span>).addResourceLocations(<span class="string">"classpath:/static/"</span>);</span><br><span class="line"></span><br><span class="line">        registry.addResourceHandler(<span class="string">"swagger-ui.html"</span>)</span><br><span class="line">                .addResourceLocations(<span class="string">"classpath:/META-INF/resources/"</span>);</span><br><span class="line"></span><br><span class="line">        registry.addResourceHandler(<span class="string">"/webjars/**"</span>)</span><br><span class="line">                .addResourceLocations(<span class="string">"classpath:/META-INF/resources/webjars/"</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//跨域支持</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addCorsMappings</span><span class="params">(CorsRegistry registry)</span> </span>&#123;</span><br><span class="line">        registry.addMapping(<span class="string">"/**"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>设置文档内容</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xxx.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.xxx.annotation.EnableRequestLog;</span><br><span class="line"><span class="keyword">import</span> com.xxx.common.CommonConverter;</span><br><span class="line"><span class="keyword">import</span> com.xxx.common.Constants;</span><br><span class="line"><span class="keyword">import</span> com.xxxx.common.Restful;</span><br><span class="line"><span class="keyword">import</span> com.xxx.common.Restful.Result;</span><br><span class="line"> <span class="comment">//...........</span></span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.Api;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiImplicitParam;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiImplicitParams;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiOperation;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.format.annotation.DateTimeFormat;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.CollectionUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMethod;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.multipart.MultipartFile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> ：yaxuSong</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 17:17 2018/5/25</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Modified</span> by:</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"user"</span>)</span><br><span class="line"><span class="meta">@Api</span>(tags = <span class="string">"用户API"</span>)</span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">   </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  type = 0 为粉丝列表 1 - 为关注者列表 默认0</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> type</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@EnableRequestLog</span>(<span class="string">"查看粉丝，关注列表"</span>)</span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"list"</span>)</span><br><span class="line">    <span class="meta">@ApiOperation</span>(value = <span class="string">"查看粉丝和关注列表"</span>,httpMethod = <span class="string">"POST"</span>,</span><br><span class="line">            notes = <span class="string">"type= 0,是查看粉丝列表，type =1 是查看关注列表，默认值是0"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Result <span class="title">list</span><span class="params">(@RequestParam(value = <span class="string">"type"</span>,defaultValue = <span class="string">"0"</span>,required = <span class="keyword">false</span>)</span> <span class="keyword">int</span> type</span></span><br><span class="line"><span class="function">            ,<span class="keyword">int</span> limit,<span class="keyword">int</span> offset,HttpServletRequest request)</span>&#123;</span><br><span class="line">        AppUser appUser = getUser(request);</span><br><span class="line">        <span class="keyword">if</span> (appUser == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> Restful.failure(RestfulResultEnum.USER_UNLOGIN);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (type == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> Restful.success(userService.getFollowList(appUser.getId(),limit,offset));</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            List&lt;UserListVO&gt; list = userService.getFocusList(appUser.getId(), limit, offset);</span><br><span class="line">            <span class="keyword">if</span> (CollectionUtils.isEmpty(list)) &#123;</span><br><span class="line">                <span class="keyword">return</span> Restful.success(list);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>;i&lt;list.size();i++)&#123;</span><br><span class="line">                    list.get(i).setRank(Long.parseLong(rankService.getRank(list.get(i).getId())+<span class="string">""</span>));</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> Restful.success(list);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@EnableRequestLog</span>(<span class="string">"同步微信信息"</span>)</span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="meta">@ApiOperation</span>(value = <span class="string">"同步微信信息"</span>)</span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"sync/wechat"</span>)</span><br><span class="line">    <span class="meta">@ApiImplicitParams</span>(&#123;</span><br><span class="line">            <span class="meta">@ApiImplicitParam</span>(name = <span class="string">"id"</span>, value = <span class="string">"微信对象"</span>, required = <span class="keyword">true</span>, dataType = <span class="string">"WeChatDTO"</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Result <span class="title">syncWechat</span><span class="params">(WeChatDTO weChatDTO,HttpServletRequest request)</span></span>&#123;</span><br><span class="line">        AppUser appUser = getUser(request);</span><br><span class="line">        <span class="keyword">if</span> (appUser == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> Restful.failure(RestfulResultEnum.USER_UNLOGIN);</span><br><span class="line">        &#125;</span><br><span class="line">        log.info(<span class="string">"【用户ID = &#123;&#125;,类名 = UserController,方法名 = syncWechat, 参数为 = &#123;&#125;】"</span>,appUser.getId(),weChatDTO.toString());</span><br><span class="line">        UserInfoVO vo = userService.syncWeChat(weChatDTO,appUser.getId());</span><br><span class="line">        <span class="keyword">if</span> (vo==<span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> Restful.failure(RestfulResultEnum.USER_SYNC_WECHAT_FAIL);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Restful.success(vo);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>实体对象</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xxx.entry.dto;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiModel;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiModelProperty;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> ：yaxuSong</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 11:32 2018/5/29</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Modified</span> by:</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@ApiModel</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WeChatDTO</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(value=<span class="string">"手机号码"</span>,dataType=<span class="string">"String"</span>,name=<span class="string">"phone"</span>,example=<span class="string">"15300000000"</span>)</span><br><span class="line">    <span class="keyword">private</span> String phone;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(value=<span class="string">"名称"</span>,dataType=<span class="string">"String"</span>,name=<span class="string">"name"</span>,example=<span class="string">"愿得一人心"</span>)</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(value=<span class="string">"性别"</span>,dataType=<span class="string">"String"</span>,name=<span class="string">"gender"</span>,example=<span class="string">"男"</span>)</span><br><span class="line">    <span class="keyword">private</span> String gender;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(value=<span class="string">"unionID"</span>,dataType=<span class="string">"String"</span>,name=<span class="string">"unionId"</span>,example=<span class="string">"o17g2621sE-9Ak-Nva2QbHzeF4"</span>)</span><br><span class="line">    <span class="keyword">private</span> String unionId;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(value=<span class="string">"头像路径"</span>,dataType=<span class="string">"String"</span>,name=<span class="string">"avatar"</span>,example=<span class="string">"https://xxxx.png"</span>)</span><br><span class="line">    <span class="keyword">private</span> String avatar;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(value=<span class="string">"openID"</span>,dataType=<span class="string">"String"</span>,name=<span class="string">"openId"</span>,example=<span class="string">"othzc0VW0T8yyEk52C3lh2H_lTE0"</span>)</span><br><span class="line">    <span class="keyword">private</span> String openId;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(value=<span class="string">"省份"</span>,dataType=<span class="string">"String"</span>,name=<span class="string">"province"</span>,example=<span class="string">"北京"</span>)</span><br><span class="line">    <span class="keyword">private</span> String province;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(value=<span class="string">"国家"</span>,dataType=<span class="string">"String"</span>,name=<span class="string">"country"</span>,example=<span class="string">"中国"</span>)</span><br><span class="line">    <span class="keyword">private</span> String country;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(value=<span class="string">"验证码"</span>,dataType=<span class="string">"String"</span>,name=<span class="string">"code"</span>,example=<span class="string">"2341"</span>)</span><br><span class="line">    <span class="keyword">private</span> String code;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(value=<span class="string">"邀请码"</span>,dataType=<span class="string">"String"</span>,name=<span class="string">"inviteCode"</span>,example=<span class="string">"LTEtNTQzMDMtRkUwQzQzNjE3NkE0NEM1MzAzNTBGRjk1NkU2QzQ4MkQ="</span>)</span><br><span class="line">    <span class="keyword">private</span> String inviteCode;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="三、结果展示"><a href="#三、结果展示" class="headerlink" title="三、结果展示"></a>三、结果展示</h1><p>访问路径 <a href="http://127.0.0.1:10086/swagger-ui.html#/" target="_blank" rel="noopener">http://127.0.0.1:10086/swagger-ui.html#/</a><br><img src="https://weaf.oss-cn-beijing.aliyuncs.com/swagger-1.png" alt></p><p>设置请求方法的“查看粉丝和关注列表”（<strong>设置了请求方法</strong>）<br><img src="https://weaf.oss-cn-beijing.aliyuncs.com/swagger-3.png" alt></p><p>未设置请求方法的api<br><img src="https://weaf.oss-cn-beijing.aliyuncs.com/swagger-4.png" alt></p><p>两种设置方法的详细内容（通过点击try it可以进行测试）这里我们也可以通过<strong>Postman</strong>进行测试<br><img src="https://weaf.oss-cn-beijing.aliyuncs.com/swagger-5.png" alt><br><img src="https://weaf.oss-cn-beijing.aliyuncs.com/swagger-6.png" alt></p><h1 id="四、相关注解"><a href="#四、相关注解" class="headerlink" title="四、相关注解"></a>四、相关注解</h1><p><img src="https://weaf.oss-cn-beijing.aliyuncs.com/swagger-7.png" alt></p><p>参考文档：<a href="https://swagger.io/" target="_blank" rel="noopener">https://swagger.io/</a></p>]]></content>
    
    <summary type="html">
    
      SpringBoot使用Swagger2
    
    </summary>
    
      <category term="JAVA" scheme="https://us-forever.com/categories/JAVA/"/>
    
    
      <category term="JAVA" scheme="https://us-forever.com/tags/JAVA/"/>
    
  </entry>
  
  <entry>
    <title>Redisson 的介绍与使用</title>
    <link href="https://us-forever.com/2018/06/05/Redisson-%E7%9A%84%E4%BB%8B%E7%BB%8D%E4%B8%8E%E4%BD%BF%E7%94%A8/"/>
    <id>https://us-forever.com/2018/06/05/Redisson-的介绍与使用/</id>
    <published>2018-06-04T18:04:44.000Z</published>
    <updated>2019-04-04T07:44:33.388Z</updated>
    
    <content type="html"><![CDATA[<h1 id="一、简介"><a href="#一、简介" class="headerlink" title="一、简介"></a>一、简介</h1><p><img src="https://camo.githubusercontent.com/5664d7af9b355209fac47098d3b51f64c4e265c7/68747470733a2f2f7265646973736f6e2e6f72672f6c6f676f2e706e67" alt="Redisson-1"><br>Redisson是一个在Redis的基础上实现的Java驻内存数据网格（In-Memory Data Grid）。它不仅提供了一系列的分布式的Java常用对象，还提供了许多分布式服务。其中包括(BitSet, Set, Multimap, SortedSet, Map, List, Queue, BlockingQueue, Deque, BlockingDeque, Semaphore, Lock, AtomicLong, CountDownLatch, Publish / Subscribe, Bloom filter, Remote service, Spring cache, Executor service, Live Object service, Scheduler service) Redisson提供了使用Redis的最简单和最便捷的方法。Redisson的宗旨是促进使用者对Redis的关注分离（Separation of Concern），从而让使用者能够将精力更集中地放在处理业务逻辑上。<br><a id="more"></a></p><h1 id="二、分布式锁"><a href="#二、分布式锁" class="headerlink" title="二、分布式锁"></a>二、分布式锁</h1><p>今天也只是就Redisson分布式锁这一部分进行讲解。<br>在很多时候，一个服务器已经不满足我们对服务性能的要求了，所以我们引进和很多相关的技术，引入了分布式服务的方式，但是这样既带来了方便，其实也带来了问题，多台服务器一起运行相同的代码，一旦两台服务运行了相同的代码，那就要保证服务”<strong>幂等性</strong>“的设计。而且要考虑服务并发带来的可能性问题。</p><p>那么我们现在引入分布式锁的概念，顾名思义，就是使用锁，将我们要紧行操作的对象或者数据加锁。操作后释放锁。使得此时操作这个对象的服务器只有一个（或者说只能对当前对象进行当前拿到锁的操作，拿不到锁的都不允许操作）。这样保证数据的每次操作前后都不会有问题。当然同一个服务器也只能对当前对象进行一个操作。</p><p>其实为了保证这一点，其实还有很多锁，相信大家也知道，乐观锁，悲观锁、表锁、行锁等。</p><p>三、具体配置</p><p>此文是以SpringBoot为基础来实现的。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> lock;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.redisson.Redisson;</span><br><span class="line"><span class="keyword">import</span> org.redisson.api.RedissonClient;</span><br><span class="line"><span class="keyword">import</span> org.redisson.config.Config;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> ：yaxuSong</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 11:30 2018/6/30</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Modified</span> by:</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedissionServiceConfig</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;spring.redis.host&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> String redisHost;</span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;spring.redis.port&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> String redisPort;</span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;spring.redis.password&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> String redisPassword;</span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;spring.redis.database&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> Integer redisDatabase;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Bean</span>(<span class="string">"redisson"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> RedissonClient <span class="title">redissionConfig</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Config config = <span class="keyword">new</span> Config();</span><br><span class="line">        config.useSingleServer().setAddress(redisHost + <span class="string">":"</span> + redisPort).setPassword(redisPassword)</span><br><span class="line">            .setDatabase(redisDatabase);</span><br><span class="line">        <span class="keyword">return</span> Redisson.create(config);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>四、实现与应用</p><p>实现部分<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> lock;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> xxx.ExceptionCodeEnum;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.redisson.api.RLock;</span><br><span class="line"><span class="keyword">import</span> org.redisson.api.RedissonClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Qualifier;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> ：yaxuSong</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 11:30 2018/6/30</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Modified</span> by:</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="meta">@Service</span>(<span class="string">"redissonLockService"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedissonLockServiceImpl</span> <span class="keyword">implements</span> <span class="title">LockService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="meta">@Qualifier</span>(<span class="string">"redisson"</span>)</span><br><span class="line">    <span class="keyword">private</span> RedissonClient redisson;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">tryLock</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> tryLock(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">tryLock</span><span class="params">(String key, <span class="keyword">long</span> timeout, TimeUnit unit)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> tryLock(key, timeout, LockService.DEFAULT_EXPIRE_TIME, unit);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">tryLock</span><span class="params">(String key, <span class="keyword">long</span> waitTime, <span class="keyword">long</span> leaseTime, TimeUnit unit)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            RLock lock = redisson.getLock(key);</span><br><span class="line">            <span class="keyword">boolean</span> res = lock.tryLock(waitTime, leaseTime, unit);</span><br><span class="line">            <span class="keyword">return</span> res;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            RedissonLockServiceImpl.log.error(<span class="string">"获取redisson锁异常, key is &#123;&#125;, timeout is &#123;&#125;,leaseTime is &#123;&#125;, unit is &#123;&#125;."</span>, key,</span><br><span class="line">                    waitTime, leaseTime, unit, e);</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> LockException(ExceptionCodeEnum.CACHE_EXCEPTION_LOCK_FAIL);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">lock</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line">        RLock lock = redisson.getLock(key);</span><br><span class="line">        lock.lock();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">unLock</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            RLock lock = redisson.getLock(key);</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            RedissonLockServiceImpl.log.error(<span class="string">"redisson解锁失败,key=&#123;&#125;"</span>, key, e);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>应用<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">String lockKey = <span class="string">"xxxx"</span>;</span><br><span class="line">   <span class="keyword">if</span>(!lockService.tryLock(lockKey))&#123;</span><br><span class="line">       log.warn(<span class="string">"current request can't not be locked!"</span>);</span><br><span class="line">       <span class="keyword">throw</span> <span class="keyword">new</span> LockException(code,msg);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//...</span></span><br><span class="line"></span><br><span class="line">lockService.unLock(lockKey);</span><br></pre></td></tr></table></figure></p><p>五、相关问题<br>大家都知道，如果负责储存这个分布式锁的Redis节点宕机以后，而且这个锁正好处于锁住的状态时，这个锁会出现锁死的状态。为了避免这种情况的发生，Redisson内部提供了一个监控锁的看门狗，它的作用是在Redisson实例被关闭前，不断的延长锁的有效期。默认情况下，看门狗的检查锁的超时时间是30秒钟，也可以通过修改Config.lockWatchdogTimeout来另行指定。</p><p>参考文章 ：<img src="https://github.com/redisson/redisson/wiki/%E7%9B%AE%E5%BD%95" alt="https://github.com/redisson/redisson/wiki/%E7%9B%AE%E5%BD%95"></p>]]></content>
    
    <summary type="html">
    
      Redisson 的介绍与使用
    
    </summary>
    
      <category term="JAVA" scheme="https://us-forever.com/categories/JAVA/"/>
    
    
      <category term="JAVA" scheme="https://us-forever.com/tags/JAVA/"/>
    
  </entry>
  
  <entry>
    <title>Spring Boot 关乎java程序员</title>
    <link href="https://us-forever.com/2018/05/17/Spring-Boot--about-java-software-engineer/"/>
    <id>https://us-forever.com/2018/05/17/Spring-Boot--about-java-software-engineer/</id>
    <published>2018-05-16T18:04:44.000Z</published>
    <updated>2019-04-04T07:44:54.349Z</updated>
    
    <content type="html"><![CDATA[<h1 id="一、简介"><a href="#一、简介" class="headerlink" title="一、简介"></a>一、简介</h1><p>Spring Boot2.0一推出就激起了一阵学习Spring Boot的热浪，就百度和搜索引擎的数据报告显示Spring Boot相关搜索指数急剧增加。</p><p>那么Spring Boot到底是什么？（想必大家都有了一些了解）<br>那么为什么会有这么多人去学习他呢？（值得思考的问题）</p><h3 id="Spring-Boot的诞生"><a href="#Spring-Boot的诞生" class="headerlink" title="Spring Boot的诞生"></a>Spring Boot的诞生</h3><p>随着使用Spring的人越来越多，Spring就开始从一个简单、单一的小框架变成一个大而全的开源软件，都后来，几乎用整个Spring就可以支撑起企业中所有的服务了。但是随之也使得带来一些问题。</p><p>之前的Spring 有着各种各样的配置文件。导致我们在使用的时候不得不配置很多东西。</p><p>后来Spring慢慢的发现了这个问题。为了解决这一问题，开始了Spring Boot项目的研发。</p><h3 id="Spring-Boot是什么？"><a href="#Spring-Boot是什么？" class="headerlink" title="Spring Boot是什么？"></a>Spring Boot是什么？</h3><p>Spring Boot是由Pivotal团队提供的全新框架，其设计目的是用来简化新Spring应用的初始搭建以及开发过程。该框架使用了特定的方式来进行配置，从而使开发人员不再需要定义样板化的配置。通过这种方式，Spring Boot致力于在蓬勃发展的快速应用开发领域(rapid application development)成为领导者。<br><a id="more"></a></p><h5 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h5><ol><li>创建独立的Spring应用程序</li><li>嵌入的Tomcat，无需部署WAR文件</li><li>简化Maven配置</li><li>自动配置Spring</li><li>提供生产就绪型功能，如指标，健康检查和外部配置</li><li>绝对没有代码生成和对XML没有要求配置</li></ol><h1 id="二、SpringBoot关乎Java程序员"><a href="#二、SpringBoot关乎Java程序员" class="headerlink" title="二、SpringBoot关乎Java程序员"></a>二、SpringBoot关乎Java程序员</h1><p>首先我们要知道，现在企业中很多都是用Spring开源框架，并且现在Spring Boot2.0作为Spring的优秀产物，已经吸引了很多技术和企业去使用它。<br>这使得我们Java程序员不得不去学习他的一个原因。<br>其次，Spring Boot 还具有一下特点：</p><ol><li>Spring Boot 让开发变得更简单<ol><li>登录网址 <a href="http://start.spring.io/" target="_blank" rel="noopener">http://start.spring.io/</a> 选择对应的组件直接下载</li><li>导入项目，直接开发</li></ol></li><li>Spring Boot 使测试变得更简单<ol><li>引入spring-boot-start-test依赖包</li><li>对数据库、Mock、 Web 等各种情况进行测试。</li></ol></li><li>Spring Boot 让配置变得更简单</li><li>Spring Boot 让部署变得更简单</li><li>Spring Boot 让监控变得更简单</li></ol><h1 id="三、项目生产"><a href="#三、项目生产" class="headerlink" title="三、项目生产"></a>三、项目生产</h1><p>Spring Boot项目搭建非常简单</p><p>我们可以使用spring提供的网站直接生产自己想要的项目</p><p><a href="https://start.spring.io/" target="_blank" rel="noopener">https://start.spring.io/</a></p><p><img src="https://weaf.oss-cn-beijing.aliyuncs.com/springboot-1.png" alt="springboot-1"></p><p>这里生产的demo可以将你所需的所有东西都集成进去。</p><p>我们可以通过点击 <strong>Switch to the full version</strong> 来查看所有支持的列表</p><p>四、目录解析</p><p><img src="https://weaf.oss-cn-beijing.aliyuncs.com/springboot-2.png" alt="springboot-2"></p><p>我们可以看出默认给出的demo的项目目录很简单。</p><p>都是我们通常使用的三个目录</p><ol><li>src/main/java/ </li><li>src/main/resources/</li><li>src/test/java/</li></ol><p>这里resources 我使用的是yaml文件。而且SpringBoot对它的支持也是非常好的。<br><img src="https://weaf.oss-cn-beijing.aliyuncs.com/springboot-3.png" alt="springboot-3">。</p><p>参考文档：</p><ol><li><a href="https://spring.io/projects/spring-boot" target="_blank" rel="noopener">https://spring.io/projects/spring-boot</a></li><li><a href="http://blog.51cto.com/ityouknow/2128700" target="_blank" rel="noopener">http://blog.51cto.com/ityouknow/2128700</a></li></ol>]]></content>
    
    <summary type="html">
    
      Spring Boot 关乎java程序员
    
    </summary>
    
      <category term="JAVA" scheme="https://us-forever.com/categories/JAVA/"/>
    
    
      <category term="JAVA" scheme="https://us-forever.com/tags/JAVA/"/>
    
  </entry>
  
  <entry>
    <title>Kafka在SpringBoot 2.0中的整合-1</title>
    <link href="https://us-forever.com/2018/05/07/SpringBoot-integration-with-Kafka-1%20-%20%E5%89%AF%E6%9C%AC/"/>
    <id>https://us-forever.com/2018/05/07/SpringBoot-integration-with-Kafka-1 - 副本/</id>
    <published>2018-05-07T10:13:02.000Z</published>
    <updated>2019-04-04T07:45:12.957Z</updated>
    
    <content type="html"><![CDATA[<h1 id="一、简介"><a href="#一、简介" class="headerlink" title="一、简介"></a>一、简介</h1><p>之前我讲过关于SpringBoot整合Kafka的demo,但是后来使用过程中，越来与发现这个已经不能适合我们现在使用的环境了。</p><p>之前是简单的发送消息而已，而现在我们需要的是一个高吞吐量的web中间件。</p><p>现在美妙大概能发送1000条左右的数据，但是接受这边并不能承受这么高的吞吐量，导致kafka消息堆积，消息堆积的越来越多。</p><p>恰巧我们的产品所需要的数据实时性非常高。所以这不得以我要改进我读的速度。</p><h1 id="二、入门"><a href="#二、入门" class="headerlink" title="二、入门"></a>二、入门</h1><p>简单介绍一点相关的概念</p><p>##2.1 消费消息基本流程</p><p>Kafka 订阅者在订阅消息时的基本流程是：</p><ol><li>Poll 数据</li><li>执行消费逻辑</li><li>再次 poll 数据<a id="more"></a>##2.2 负载均衡</li></ol><p>每个 Consumer Group 可以包含多个消费实例，即可以启动多个 Kafka Consumer，并把参数 group.id 设置成相同的值。属于同一个 Consumer Group 的消费实例会负载消费订阅的 Topic。</p><p>举例：Consumer Group A 订阅了 Topic A，并开启三个消费实例 C1、C2、C3，则发送到 Topic A 的每条消息最终只会传给 C1、C2、C3 的某一个。Kafka 默认会均匀地把消息传给各个消息实例，以做到消费负载均衡。</p><p>Kafka 负载消费的内部原理是，把订阅的 Topic 的分区，平均分配给各个消费实例。因此，消费实例的个数不要大于分区的数量，否则会有实例分配不到任何分区而处于空跑状态。这个负载均衡发生的时间，除了第一次启动上线之外，后续消费实例发生重启、增加、减少等变更时，都会触发一次负载均衡。</p><p>消息队列 Kafka 的每个 Topic 的分区数量默认是 16 个，已经足够满足大部分场景的需求，且云上服务会根据容量调整分区数。</p><p>##2.3 多个订阅<br>一个 Consumer Group 可以订阅多个 Topic。一个 Topic 也可以被多个 Consumer Group 订阅，且各个 Consumer Group 独立消费 Topic 下的所有消息。</p><p>举例：Consumer Group A 订阅了 Topic A，Consumer Group B 也订阅了 Topic A，则发送到 Topic A 的每条消息，不仅会传一份给 Consumer Group A 的消费实例，也会传一份给 Consumer Group B 的消费实例，且这两个过程相互独立，相互没有任何影响。</p><p>##2.4 消费位点<br>每个 Topic 会有多个分区，每个分区会统计当前消息的总条数，这个称为最大位点 MaxOffset。Kafka Consumer 会按顺序依次消费分区内的每条消息，记录已经消费了的消息条数，称为ConsumerOffset。</p><p>剩余的未消费的条数（也称为消息堆积量） = MaxOffset - ConsumerOffset</p><p>##2.5 消费位点提交<br>Kafka 消费者有两个相关参数：</p><ul><li>enable.auto.commit：默认值为 true。</li><li>auto.commit.interval.ms： 默认值为 1000，也即 1s。</li></ul><p>这两个参数组合的结果就是，每次 poll 数据前会先检查上次提交位点的时间，如果距离当前时间已经超过参数auto.commit.interval.ms规定的时长，则客户端会启动位点提交动作。</p><p>因此，如果将enable.auto.commit设置为 true，则需要在每次 poll 数据时，确保前一次 poll 出来的数据已经消费完毕，否则可能导致位点跳跃。</p><p>如果想自己控制位点提交，请把 enable.auto.commit 设为 false，并调用 commit(offsets)函数自行控制位点提交。</p><p>##2.6 消息重复和消费幂等<br>Kafka 消费的语义是 “at least once”， 也就是至少投递一次，保证消息不丢，但是不会保证消息不重复。在出现网络问题、客户端重启时均有可能出现少量重复消息，此时应用消费端如果对消息重复比较敏感（比如说订单交易类），则应该做到消息幂等。</p><p>以数据库类应用为例，常用做法是：</p><p>发送消息时，传入 key 作为唯一流水号ID；<br>消费消息时，判断 key 是否已经消费过，如果已经消费过了，则忽略，如果没消费过，则消费一次；<br>当然，如果应用本身对少量消息重复不敏感，则不需要做此类幂等检查。</p><p>##2.7 消费失败<br>Kafka 是按分区一条一条消息顺序向前推进消费的，如果消费端拿到某条消息后执行消费逻辑失败，比如应用服务器出现了脏数据，导致某条消息处理失败，等待人工干预，那么有以下两种处理方式：</p><p>失败后一直尝试再次执行消费逻辑。这种方式有可能造成消费线程阻塞在当前消息，无法向前推进，造成消息堆积；<br>由于 Kafka 自身没有处理失败消息的设计，实践中通常会打印失败的消息、或者存储到某个服务（比如创建一个 Topic 专门用来放失败的消息），然后定时 check 失败消息的情况，分析失败原因，根据情况处理。</p><p>##2.8 消费阻塞以及堆积<br>消费端最常见的问题就是消费堆积，最常造成堆积的原因是：</p><p>消费速度跟不上生产速度，此时应该提高消费速度，详见下一节《提高消费速度》；<br>消费端产生了阻塞。<br>消费端拿到消息后，执行消费逻辑，通常会执行一些远程调用，如果这个时候同步等待结果，则有可能造成一直等待，消费进程无法向前推进。</p><p>消费端应该竭力避免堵塞消费线程，如果存在等待调用结果的情况，建议设置等待的超时时间，超时后作消费失败处理。</p><p>##2.9 提高消费速度<br>提高消费速度有以下两个办法：</p><p>增加 Consumer 实例个数<br>增加消费线程</p><p>#####增加 Consumer 实例<br>可以在进程内直接增加（需要保证每个实例对应一个线程，否则没有太大意义），也可以部署多个消费实例进程；需要注意的是，实例个数超过分区数量后就不再能提高速度，将会有消费实例不工作。</p><p>#####增加消费线程<br>增加 Consumer 实例本质上也是增加线程的方式来提升速度，因此更加重要的性能提升方式是增加消费线程，最基本的步骤如下：</p><ol><li>定义一个线程池；</li><li>Poll 数据；</li><li>把数据提交到线程池进行并发处理；</li><li>等并发结果返回成功后，再次 poll 数据执行。</li></ol><p>##2.10 消息过滤<br>Kafka 自身没有消息过滤的语义。实践中可以采取以下两个办法：</p><p>如果过滤的种类不多，可以采取多个 Topic 的方式达到过滤的目的；<br>如果过滤的种类多，则最好在客户端业务层面自行过滤。<br>实践中请根据业务具体情况进行选择，也可以综合运用上面两种办法。</p><p>##2.11 消息广播<br>Kafka 自身没有消息广播的语义，可以通过创建不同的 Consumer Group 来模拟实现。</p><p>##2.12 订阅关系<br>同一个 Consumer Group 内，各个消费实例订阅的 Topic 最好保持一致，避免给排查问题带来干扰。</p><h1 id="三、开始抛代码"><a href="#三、开始抛代码" class="headerlink" title="三、开始抛代码"></a>三、开始抛代码</h1><p>我们的问题是由于消费的速度不够引起的。根据2.9的办法。我提供了以下代码<br>消费者配置：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xxx.xxxxxx.kafka;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.clients.CommonClientConfigs;</span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.clients.consumer.ConsumerConfig;</span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.common.config.SaslConfigs;</span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.common.config.SslConfigs;</span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.common.serialization.StringDeserializer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.kafka.annotation.EnableKafka;</span><br><span class="line"><span class="keyword">import</span> org.springframework.kafka.config.ConcurrentKafkaListenerContainerFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.kafka.config.KafkaListenerContainerFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.kafka.core.ConsumerFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.kafka.core.DefaultKafkaConsumerFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.kafka.listener.BatchLoggingErrorHandler;</span><br><span class="line"><span class="keyword">import</span> org.springframework.kafka.listener.ConcurrentMessageListenerContainer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> ：yaxuSong</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 18:15 2018/4/24</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Modified</span> by:</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableKafka</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReceiverConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;spring.kafka.bootstrap-servers&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> String bootstrapServers;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;app.group.id&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> String groupId;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;kafka.client.truststore&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> String kafkaClientTruststore;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;app.topic.test&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> String topic;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">consumerConfigs</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Map&lt;String, Object&gt; props = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapServers);</span><br><span class="line">        props.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class);</span><br><span class="line">        props.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class);</span><br><span class="line">        props.put(ConsumerConfig.GROUP_ID_CONFIG, groupId);</span><br><span class="line">        props.put(SslConfigs.SSL_TRUSTSTORE_LOCATION_CONFIG,kafkaClientTruststore);</span><br><span class="line">        props.put(SslConfigs.SSL_TRUSTSTORE_PASSWORD_CONFIG,<span class="string">"KafkaOnsClient"</span>);</span><br><span class="line">        props.put(CommonClientConfigs.SECURITY_PROTOCOL_CONFIG,<span class="string">"SASL_SSL"</span>);</span><br><span class="line">        props.put(SaslConfigs.SASL_MECHANISM,<span class="string">"ONS"</span>);</span><br><span class="line">        props.put(ConsumerConfig.ENABLE_AUTO_COMMIT_CONFIG,<span class="keyword">false</span>);</span><br><span class="line">        props.put(ConsumerConfig.AUTO_COMMIT_INTERVAL_MS_CONFIG,<span class="number">1000</span>);</span><br><span class="line">        props.put(ConsumerConfig.MAX_POLL_RECORDS_CONFIG,<span class="number">50</span>);</span><br><span class="line">        props.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG,<span class="string">"latest"</span>);</span><br><span class="line">        <span class="keyword">return</span> props;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ConsumerFactory&lt;String, String&gt; <span class="title">consumerFactory</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> DefaultKafkaConsumerFactory&lt;&gt;(consumerConfigs());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; <span class="title">kafkaListenerContainerFactory</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; factory = <span class="keyword">new</span> ConcurrentKafkaListenerContainerFactory&lt;&gt;();</span><br><span class="line">        factory.setConsumerFactory(consumerFactory());</span><br><span class="line">        factory.setBatchListener(<span class="keyword">true</span>);</span><br><span class="line">        factory.setAutoStartup(<span class="keyword">true</span>);</span><br><span class="line">        factory.setAckDiscarded(<span class="keyword">true</span>);</span><br><span class="line">        factory.setConcurrency(<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> factory;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>以下是消费代码</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xxx.xxxxxx.kafka;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSONObject;</span><br><span class="line"><span class="keyword">import</span> com.xxx.xxxxxx.common.Constants;</span><br><span class="line"><span class="keyword">import</span> com.xxx.xxxxxx.entry.vo.TrendInfoVO;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.lang3.StringUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.clients.consumer.ConsumerRecord;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.RedisTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.kafka.annotation.KafkaListener;</span><br><span class="line"><span class="keyword">import</span> org.springframework.kafka.listener.KafkaDataListener;</span><br><span class="line"><span class="keyword">import</span> org.springframework.kafka.listener.MessageListener;</span><br><span class="line"><span class="keyword">import</span> org.springframework.kafka.support.KafkaHeaders;</span><br><span class="line"><span class="keyword">import</span> org.springframework.messaging.handler.annotation.Header;</span><br><span class="line"><span class="keyword">import</span> org.springframework.messaging.handler.annotation.Payload;</span><br><span class="line"><span class="keyword">import</span> org.springframework.scheduling.annotation.Async;</span><br><span class="line"><span class="keyword">import</span> org.springframework.scheduling.annotation.EnableAsync;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Calendar;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> ：yaxuSong</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 17:09 2018/4/24</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Modified</span> by:</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@EnableAsync</span></span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TrendConsumer</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RedisTemplate&lt;String, String&gt; redisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> Long timestart = System.currentTimeMillis();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Async</span>(<span class="string">"kafkaExecutor"</span>)</span><br><span class="line">    <span class="meta">@KafkaListener</span>(id = <span class="string">"list"</span>, topics = <span class="string">"$&#123;app.topic.test&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">receive</span><span class="params">(@Payload List&lt;String&gt; messages,</span></span></span><br><span class="line"><span class="function"><span class="params">                        @Header(KafkaHeaders.RECEIVED_PARTITION_ID)</span> List&lt;Integer&gt; partitions,</span></span><br><span class="line"><span class="function">                        @<span class="title">Header</span><span class="params">(KafkaHeaders.OFFSET)</span> List&lt;Long&gt; offsets) </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (String str :messages)</span><br><span class="line">        &#123;</span><br><span class="line">            doRedisTask(str);</span><br><span class="line">            count++;</span><br><span class="line">            <span class="keyword">if</span> (System.currentTimeMillis()-timestart&gt;=<span class="number">10000</span>) &#123;</span><br><span class="line">                log.info(<span class="string">"时间：&#123;&#125;kafka消费数量：&#123;&#125;"</span>, Calendar.getInstance().getTime(),count);</span><br><span class="line">                count = <span class="number">0</span>;</span><br><span class="line">                timestart = System.currentTimeMillis();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Async</span>(<span class="string">"redisExecutor"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doRedisTask</span><span class="params">(String message)</span></span>&#123;</span><br><span class="line">        JSONObject json = JSONObject.parseObject(message);</span><br><span class="line">        String exchange = json.getString(<span class="string">"exchange"</span>);</span><br><span class="line">        String symbol = json.getString(<span class="string">"symbol"</span>);</span><br><span class="line">        redisTemplate.opsForValue().set(Constants.KAFKA_TRADE_PREFIX+exchange+symbol,message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这里使用了异步线程去消费。提高消费的速度。</p><p>四、特别注意</p><p>注意以下几点配置</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">props.put(ConsumerConfig.ENABLE_AUTO_COMMIT_CONFIG,<span class="keyword">false</span>);</span><br><span class="line">props.put(ConsumerConfig.AUTO_COMMIT_INTERVAL_MS_CONFIG,<span class="number">1000</span>);</span><br><span class="line">props.put(ConsumerConfig.MAX_POLL_RECORDS_CONFIG,<span class="number">50</span>);</span><br><span class="line">props.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG,<span class="string">"latest"</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">factory.setBatchListener(<span class="keyword">true</span>);</span><br><span class="line">actory.setConcurrency(<span class="number">1</span>);</span><br></pre></td></tr></table></figure><p>五、参考地址</p><ol><li><a href="https://help.aliyun.com/document_detail/68166.html?spm=a2c4g.11186623.6.566.nnWMLo" target="_blank" rel="noopener">阿里云kafka订阅者最佳实践:https://help.aliyun.com/document_detail/68166.html?spm=a2c4g.11186623.6.566.nnWMLo</a></li><li><a href="https://docs.spring.io/spring-kafka/docs/2.1.5.RELEASE/reference/html/" target="_blank" rel="noopener">Spring KAFKA地址：https://docs.spring.io/spring-kafka/docs/2.1.5.RELEASE/reference/html/</a></li></ol>]]></content>
    
    <summary type="html">
    
      Kafka在SpringBoot 2.0中的整合-1
    
    </summary>
    
      <category term="JAVA" scheme="https://us-forever.com/categories/JAVA/"/>
    
    
      <category term="JAVA" scheme="https://us-forever.com/tags/JAVA/"/>
    
  </entry>
  
  <entry>
    <title>微信公众号后台在SpringBoot2.0中的实现（上）</title>
    <link href="https://us-forever.com/2018/05/01/wechat-for-java-backend/"/>
    <id>https://us-forever.com/2018/05/01/wechat-for-java-backend/</id>
    <published>2018-05-01T10:13:02.000Z</published>
    <updated>2018-05-22T04:18:11.328Z</updated>
    
    <content type="html"><![CDATA[<p>现在微信在中国作为最重要的社交软件，相信很多人都使用微信公众号。<br>而且微信公众号也成为一些企业传播资讯最好的平台。<br>那么今天就来讲下微信公众号后台具体如何来实现。</p><h2 id="一、申请公众号"><a href="#一、申请公众号" class="headerlink" title="一、申请公众号"></a>一、申请公众号</h2><p>首先我们根据自己活着企业的所需的东西，选定好一下几种类别的账号。<br><img src="https://weaf.oss-cn-beijing.aliyuncs.com/wechat-1.png" alt="wechat-1"><br>不同的账户拥有的权限不尽相同。<br>这个我们可以根据权限文档进行查看！</p><p><a href="https://mp.weixin.qq.com/advanced/advanced?action=table&amp;token=1776791094&amp;lang=zh_CN" target="_blank" rel="noopener">接口权限：https://mp.weixin.qq.com/advanced/advanced?action=table&amp;token=1776791094&amp;lang=zh_CN</a><br>然后就是根据自己的接口的要求，去审批。</p><h2 id="二、设置基本配置"><a href="#二、设置基本配置" class="headerlink" title="二、设置基本配置"></a>二、设置基本配置</h2><p><img src="https://weaf.oss-cn-beijing.aliyuncs.com/wechat-2.png" alt="wechat-2"><br>这里需要我们先开启自己的开发者密码。（这个是我们在开发过程中需要使用的）</p><p>服务器地址（URL）:这里需要设置公网可访问的接口</p><p>令牌（Token）：这块我们可以设置为一个32为UUID的字符串。</p><p>更多细节请参考官方文档：<a href="https://mp.weixin.qq.com/wiki?t=resource/res_main&amp;id=mp1421135319" target="_blank" rel="noopener">https://mp.weixin.qq.com/wiki?t=resource/res_main&amp;id=mp1421135319</a></p><p>三、代码的实现<br>其他的也就不多说了，直接上代码。</p><p>我们首先创建一个介入指南中，微信需要验证的接口。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"><span class="keyword">import</span> java.io.UnsupportedEncodingException;</span><br><span class="line"><span class="keyword">import</span> java.security.MessageDigest;</span><br><span class="line"><span class="keyword">import</span> java.security.NoSuchAlgorithmException;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**---------*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"verification"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">weChatVerification</span><span class="params">(String signature, String timestamp, String nonce, String echostr, HttpServletRequest request)</span> <span class="keyword">throws</span> AesException </span>&#123;</span><br><span class="line">    log.info(<span class="string">"微信校验参数：signature=&#123;&#125;，timestamp=&#123;&#125;，nonce=&#123;&#125;，echostr=&#123;&#125;"</span>,signature,timestamp,nonce,echostr);</span><br><span class="line">    <span class="keyword">if</span>(signature.equals(getSHA1(token,timestamp,nonce)))</span><br><span class="line">            <span class="keyword">return</span> echostr;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> String <span class="title">getSHA1</span><span class="params">(String token, String timestamp, String nonce)</span> <span class="keyword">throws</span> AesException</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            String[] array = <span class="keyword">new</span> String[] &#123; token, timestamp, nonce &#125;;</span><br><span class="line">            StringBuffer sb = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">            <span class="comment">// 字符串排序</span></span><br><span class="line">            Arrays.sort(array);</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">                sb.append(array[i]);</span><br><span class="line">            &#125;</span><br><span class="line">            String str = sb.toString();</span><br><span class="line">            <span class="comment">// SHA1签名生成</span></span><br><span class="line">            MessageDigest md = MessageDigest.getInstance(<span class="string">"SHA-1"</span>);</span><br><span class="line">            md.update(str.getBytes());</span><br><span class="line">            <span class="keyword">byte</span>[] digest = md.digest();</span><br><span class="line"></span><br><span class="line">            StringBuffer hexstr = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">            String shaHex = <span class="string">""</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; digest.length; i++) &#123;</span><br><span class="line">                shaHex = Integer.toHexString(digest[i] &amp; <span class="number">0xFF</span>);</span><br><span class="line">                <span class="keyword">if</span> (shaHex.length() &lt; <span class="number">2</span>) &#123;</span><br><span class="line">                    hexstr.append(<span class="number">0</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                hexstr.append(shaHex);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> hexstr.toString();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> AesException(AesException.ComputeSignatureError);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p><p>现在就已经接入了微信公众平台。</p>]]></content>
    
    <summary type="html">
    
      微信公众号后台在SpringBoot2.0中的实现（上）
    
    </summary>
    
      <category term="JAVA" scheme="https://us-forever.com/categories/JAVA/"/>
    
    
      <category term="JAVA" scheme="https://us-forever.com/tags/JAVA/"/>
    
  </entry>
  
  <entry>
    <title>Kafka在SpringBoot 2.0中的整合</title>
    <link href="https://us-forever.com/2018/04/23/Kafka%E5%9C%A8SpringBoot-2-0%E4%B8%AD%E7%9A%84%E6%95%B4%E5%90%88/"/>
    <id>https://us-forever.com/2018/04/23/Kafka在SpringBoot-2-0中的整合/</id>
    <published>2018-04-23T10:13:02.000Z</published>
    <updated>2018-04-28T07:44:36.817Z</updated>
    
    <content type="html"><![CDATA[<h2 id="一、Windows平台Kafka的环境搭建"><a href="#一、Windows平台Kafka的环境搭建" class="headerlink" title="一、Windows平台Kafka的环境搭建"></a>一、Windows平台Kafka的环境搭建</h2><p>注意：确保JAVA环境变量的正确</p><h3 id="1-ZooKeeper的安装"><a href="#1-ZooKeeper的安装" class="headerlink" title="1.ZooKeeper的安装"></a>1.ZooKeeper的安装</h3><p>Kafka的运行依赖于Zookeeper，所以需要先安装Zookeeper.<br>Zookeeper下载地址：<a href="http://mirror.bit.edu.cn/apache/zookeeper/" target="_blank" rel="noopener">Zookeeper</a><br><img src="https://weaf.oss-cn-beijing.aliyuncs.com/kafka-1.png" alt="kafka-1"><br>解压出来，放在指定位置。<br>在conf文件夹下修改zoo_sample.cfg名为zoo.cfg<br>然后打开zoo.cfg<br>添加一下变量（如果没有请添加，存在请修改）<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dataDir=D:\data\logs\zookeeper </span><br><span class="line">dataLogDir=D:\data\logs\zookeeper</span><br></pre></td></tr></table></figure></p><p>然后进入bin目录双击zkServer.cmd运行。如下图：<br><img src="https://weaf.oss-cn-beijing.aliyuncs.com/kafka-2.png" alt="kafka-2"></p><h3 id="2-Kafka的安装"><a href="#2-Kafka的安装" class="headerlink" title="2.Kafka的安装"></a>2.Kafka的安装</h3><p>Kafka下载地址：<a href="http://kafka.apache.org/downloads.html" target="_blank" rel="noopener">Kafka</a><br><img src="https://weaf.oss-cn-beijing.aliyuncs.com/kafka-3.png" alt="kafka-3"><br>解压文件到指定地方<br>打开config下的server.properties<br>修改以下变量<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">log.dirs=D:\data\logs\kafka</span><br></pre></td></tr></table></figure></p><p>我们可以看到bin目录下的是linux的启动脚本，然后有个单独的文件夹装着windows的脚本。<br>我们在根目录下打开命令行，运行以下命令启动Kafka。<br>我们在运行前需要注意以下几点</p><ol><li>确认JAVA环境变量没有问题</li><li>路径不能有空格，不然可能会出现无法加载主类的错误。</li><li>出现无法加载主类错误，可修改bin\windows目录中的kafka-run-class.bat中<br>set COMMAND=%JAVA% %KAFKA_HEAP_OPTS% %KAFKA_JVM_PERFORMANCE_OPTS% %KAFKA_JMX_OPTS% %KAFKA_LOG4J_OPTS% -cp %CLASSPATH% %KAFKA_OPTS% %*<br>中”%CLASSPATH%”加上双引号</li></ol><p><img src="https://weaf.oss-cn-beijing.aliyuncs.com/kafka-4.png" alt="kafka-3"><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.\bin\windows\kafka-server-start.bat .\config\server.properties</span><br></pre></td></tr></table></figure></p><h2 id="二、SpringBoot2-0相关配置"><a href="#二、SpringBoot2-0相关配置" class="headerlink" title="二、SpringBoot2.0相关配置"></a>二、SpringBoot2.0相关配置</h2><p>pom文件加入以下依赖</p><h5 id="pom-xml"><a href="#pom-xml" class="headerlink" title="pom.xml"></a>pom.xml</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- kafka --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.kafka<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-kafka<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>我这里SpringBoot的配置文件使用的是YAML。<br>在相应环境中配置Kafka</p><h5 id="application-local-yml"><a href="#application-local-yml" class="headerlink" title="application-local.yml"></a>application-local.yml</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">server:</span><br><span class="line">    port: 7777</span><br><span class="line"></span><br><span class="line">spring:</span><br><span class="line">    datasource:</span><br><span class="line">        name: test</span><br><span class="line">        driverClassName: com.mysql.jdbc.Driver</span><br><span class="line">        url: jdbc:mysql://.....</span><br><span class="line">        username: ...</span><br><span class="line">        password: ....</span><br><span class="line">    redis:</span><br><span class="line">      database: 0</span><br><span class="line">      host: localhost</span><br><span class="line">      port: 6379</span><br><span class="line">      jedis:</span><br><span class="line">        pool:</span><br><span class="line">          min-idle: 0</span><br><span class="line">          max-idle: 8</span><br><span class="line">          max-active: 8</span><br><span class="line">          max-wait: -1ms</span><br><span class="line">      password: 123456</span><br><span class="line">    kafka:</span><br><span class="line">        consumer:</span><br><span class="line">          group-id: foo</span><br><span class="line">          auto-offset-reset: earliest</span><br><span class="line">          key-deserializer: org.apache.kafka.common.serialization.StringDeserializer</span><br><span class="line">          value-deserializer: org.apache.kafka.common.serialization.StringDeserializer</span><br><span class="line">        producer:</span><br><span class="line">          key-serializer: org.apache.kafka.common.serialization.StringSerializer</span><br><span class="line">          value-serializer: org.apache.kafka.common.serialization.StringSerializer</span><br><span class="line">        bootstrap-servers: localhost:9092</span><br><span class="line">app:</span><br><span class="line">      topic:</span><br><span class="line">        foo: foo.t</span><br></pre></td></tr></table></figure><p>可以仅关注spring.kafka和app.topic节点<br>更多spring.kafka配置信息请查看<a href="https://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html" target="_blank" rel="noopener">官网文档</a></p><h2 id="三、代码"><a href="#三、代码" class="headerlink" title="三、代码"></a>三、代码</h2><p>主要代码结构<br><img src="https://weaf.oss-cn-beijing.aliyuncs.com/kafka-5.png" alt="kafka-5"><br>消费者代码<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xxx.kafka.consumer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.kafka.annotation.KafkaListener;</span><br><span class="line"><span class="keyword">import</span> org.springframework.messaging.handler.annotation.Payload;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> ：yaxuSong</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 17:56 2018/4/23</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Modified</span> by:</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Receiver</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@KafkaListener</span>(topics = <span class="string">"$&#123;app.topic.foo&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">listen</span><span class="params">(@Payload String message)</span> </span>&#123;</span><br><span class="line">        log.info(<span class="string">"received message='&#123;&#125;'"</span>, message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>生产者代码<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xxx.kafka.producer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.kafka.core.KafkaTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> ：yaxuSong</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 17:57 2018/4/23</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Modified</span> by:</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Sender</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> KafkaTemplate&lt;String, String&gt; kafkaTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;app.topic.foo&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> String topic;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">send</span><span class="params">(String message)</span></span>&#123;</span><br><span class="line">        log.info(<span class="string">"sending message='&#123;&#125;' to topic='&#123;&#125;'"</span>, message, topic);</span><br><span class="line">        kafkaTemplate.send(topic, message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>测试代码<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xxx.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.xxx.controller.entry.ResMsg;</span><br><span class="line"><span class="keyword">import</span> com.xxx.Sender;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> ：yaxuSong</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 11:21 2018/4/21</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Modified</span> by:</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"test"</span>)</span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> Sender sender;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"send"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResMsg <span class="title">send</span><span class="params">(String content)</span></span>&#123;</span><br><span class="line">        sender.send(<span class="string">"Spring Kafka and Spring Boot Send Message:"</span>+content);</span><br><span class="line">        <span class="keyword">return</span> ResMsg.success();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="四、简单的测试"><a href="#四、简单的测试" class="headerlink" title="四、简单的测试"></a>四、简单的测试</h2><p>运行项目<br><img src="https://weaf.oss-cn-beijing.aliyuncs.com/kafka-6.png" alt="kafka-6"><br>测试发送<br><img src="https://weaf.oss-cn-beijing.aliyuncs.com/kafka-7.png" alt="kafka-6"><br>查看接收结果：<br><img src="https://weaf.oss-cn-beijing.aliyuncs.com/kafka-8.png" alt="kafka-6"></p><h2 id="五、SpringBoot-Demo"><a href="#五、SpringBoot-Demo" class="headerlink" title="五、SpringBoot-Demo"></a>五、SpringBoot-Demo</h2><p>本人最近使用阿里云的Kafka发现没有SpringBoot的Demo便写了一个。<br>代码地址：<a href="https://github.com/songyaxu/kafka-springboot-demo" target="_blank" rel="noopener">https://github.com/songyaxu/kafka-springboot-demo</a></p><p>本文参考地址<a href="https://docs.spring.io/spring-kafka/docs/2.1.5.RELEASE/reference/html/" target="_blank" rel="noopener">https://docs.spring.io/spring-kafka/docs/2.1.5.RELEASE/reference/html/</a></p>]]></content>
    
    <summary type="html">
    
      Kafka在SpringBoot 2.0中的整合
    
    </summary>
    
    
      <category term="Java" scheme="https://us-forever.com/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>Redis在SpringBoot 2.0中的整合</title>
    <link href="https://us-forever.com/2018/04/18/Redis%E5%9C%A8SpringBoot-2-0%E4%B8%AD%E7%9A%84%E6%95%B4%E5%90%88/"/>
    <id>https://us-forever.com/2018/04/18/Redis在SpringBoot-2-0中的整合/</id>
    <published>2018-04-18T08:24:15.000Z</published>
    <updated>2018-04-18T09:50:15.310Z</updated>
    
    <content type="html"><![CDATA[<h2 id="一、Redis的安装"><a href="#一、Redis的安装" class="headerlink" title="一、Redis的安装"></a>一、Redis的安装</h2><p>为了方便教程这里先简单介绍Redis的安装。</p><h3 id="1-windows平台的安装"><a href="#1-windows平台的安装" class="headerlink" title="1. windows平台的安装"></a>1. windows平台的安装</h3><p>现在官网已经不提供windows平台的下载，所以只能去github上下载安装<br><a href="https://github.com/MSOpenTech/redis/tags" target="_blank" rel="noopener">github下载网址</a><br>进入之后选择好版本点击msi下载<br><img src="https://weaf.oss-cn-beijing.aliyuncs.com/redis-1.png" alt="Redis"><br>然后双击安装。<br>默认是直接运行的。<br>可以通过控制台访问如<br><img src="https://weaf.oss-cn-beijing.aliyuncs.com/redis-2.png" alt="Redis"><br>具体语法可以在相关网上查阅。</p><h3 id="2-Linux平台的安装"><a href="#2-Linux平台的安装" class="headerlink" title="2. Linux平台的安装"></a>2. Linux平台的安装</h3><p>直接到官网下载<br><a href="http://redis.io/download" target="_blank" rel="noopener">Redis.io</a><br>解压并安装<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wget http://download.redis.io/releases/redis-4.0.9.tar.gz</span><br><span class="line">tar xzf redis-4.0.9.tar.gz</span><br><span class="line">cd redis-4.0.9</span><br><span class="line">make</span><br></pre></td></tr></table></figure></p><a id="more"></a><p>服务端运行脚本<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">src/redis-server</span><br></pre></td></tr></table></figure></p><p>客户端运行脚本<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">src/redis-cli</span><br></pre></td></tr></table></figure></p><h3 id="3-SpringBoot2-0相关配置"><a href="#3-SpringBoot2-0相关配置" class="headerlink" title="3. SpringBoot2.0相关配置"></a>3. SpringBoot2.0相关配置</h3><p>pom文件加入以下依赖<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure></p><p>我这里SpringBoot的配置文件使用的是YAML。<br>在相应环境中配置Redis</p><h5 id="application-local-yml"><a href="#application-local-yml" class="headerlink" title="application-local.yml"></a>application-local.yml</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">spring:</span><br><span class="line">    datasource:</span><br><span class="line">        name: test</span><br><span class="line">        driverClassName: com.mysql.jdbc.Driver</span><br><span class="line">        url: jdbc:mysql://127.0.0.1:3306/local?useUnicode=true&amp;characterEncoding=UTF-8</span><br><span class="line">        username: root</span><br><span class="line">        password: root</span><br><span class="line">    redis:</span><br><span class="line">          database: 0</span><br><span class="line">          host: localhost</span><br><span class="line">          port: 6379</span><br><span class="line">          jedis:</span><br><span class="line">            pool:</span><br><span class="line">              min-idle: 0</span><br><span class="line">              max-idle: 8</span><br><span class="line">              max-active: 8</span><br><span class="line">              max-wait: -1ms</span><br></pre></td></tr></table></figure><h3 id="4-代码级别配置"><a href="#4-代码级别配置" class="headerlink" title="4.代码级别配置"></a>4.代码级别配置</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.xxx.controller.entry.entity.AccessToken;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cache.annotation.CachingConfigurerSupport;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cache.annotation.EnableCaching;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.cache.RedisCacheManager;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.connection.RedisConnectionFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.connection.jedis.JedisConnectionFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.RedisTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.convert.KeyspaceConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.repository.configuration.EnableRedisRepositories;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.serializer.Jackson2JsonRedisSerializer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.serializer.StringRedisSerializer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Collections;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> ：yaxuSong</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 18:35 2018/4/17</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Modified</span> by:</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableCaching</span></span><br><span class="line"><span class="comment">//增加Respository支持，并使其支持@TimeToLive</span></span><br><span class="line"><span class="meta">@EnableRedisRepositories</span>(keyspaceConfiguration = RedisCacheConfig.MyKeyspaceConfiguration.class)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedisCacheConfig</span> <span class="keyword">extends</span> <span class="title">CachingConfigurerSupport</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> RedisCacheManager <span class="title">cacheManager</span><span class="params">(RedisConnectionFactory connectionFactory)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> RedisCacheManager.builder(connectionFactory).build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    @Bean</span></span><br><span class="line"><span class="comment">//    public RedisConnectionFactory connectionFactory() &#123;</span></span><br><span class="line"><span class="comment">//        return new JedisConnectionFactory();</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> RedisTemplate&lt;?, ?&gt; redisTemplate(RedisConnectionFactory redisConnectionFactory) &#123;</span><br><span class="line">        RedisTemplate&lt;<span class="keyword">byte</span>[], <span class="keyword">byte</span>[]&gt; template = <span class="keyword">new</span> RedisTemplate&lt;<span class="keyword">byte</span>[], <span class="keyword">byte</span>[]&gt;();</span><br><span class="line">        template.setConnectionFactory(redisConnectionFactory);</span><br><span class="line">        <span class="keyword">return</span> template;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    @Bean</span></span><br><span class="line"><span class="comment">//    public RedisTemplate&lt;Object, Object&gt; redisTemplate(RedisConnectionFactory redisConnectionFactory)&#123;</span></span><br><span class="line"><span class="comment">//        RedisTemplate&lt;Object, Object&gt; redisTemplate = new RedisTemplate&lt;Object, Object&gt;();</span></span><br><span class="line"><span class="comment">//        redisTemplate.setConnectionFactory(redisConnectionFactory);</span></span><br><span class="line"><span class="comment">//        redisTemplate.setKeySerializer(new StringRedisSerializer());//key序列化</span></span><br><span class="line"><span class="comment">//        redisTemplate.setValueSerializer(new Jackson2JsonRedisSerializer(Object.class));  //value序列化</span></span><br><span class="line"><span class="comment">//        redisTemplate.afterPropertiesSet();</span></span><br><span class="line"><span class="comment">//        return redisTemplate;</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MyKeyspaceConfiguration</span> <span class="keyword">extends</span> <span class="title">KeyspaceConfiguration</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">protected</span> Iterable&lt;KeyspaceSettings&gt; <span class="title">initialConfiguration</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> Collections.singleton(<span class="keyword">new</span> KeyspaceSettings(AccessToken.class, <span class="string">"accessToken"</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>缓存对象AccessToken<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.annotation.Id;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.RedisHash;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.TimeToLive;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> ：yaxuSong</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 14:26 2018/4/18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Modified</span> by:</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RedisHash</span>(<span class="string">"accessToken"</span>)</span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccessToken</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    String id;</span><br><span class="line">    String accessToken;</span><br><span class="line">    <span class="meta">@TimeToLive</span></span><br><span class="line">    Long expire;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>创建Respository<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.xxx.controller.entry.entity.AccessToken;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.repository.CrudRepository;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> ：yaxuSong</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 14:34 2018/4/18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Modified</span> by:</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="comment">// 继承自CURD，里边有最基本的方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">AccessTokenRepository</span> <span class="keyword">extends</span> <span class="title">CrudRepository</span>&lt;<span class="title">AccessToken</span>, <span class="title">String</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>接下来完成自己的业务服务类<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.xxx.controller.entry.entity.AccessToken;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> ：yaxuSong</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 14:50 2018/4/18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Modified</span> by:</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">AccessTokenService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">AccessToken <span class="title">save</span><span class="params">(AccessToken accessToken)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">delete</span><span class="params">(AccessToken accessToken)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">AccessToken <span class="title">get</span><span class="params">(String id)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>业务服务类的实现<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.xxx.controller.entry.entity.AccessToken;</span><br><span class="line"><span class="keyword">import</span> com.xxx.dao.repository.AccessTokenRepository;</span><br><span class="line"><span class="keyword">import</span> com.xxx.service.AccessTokenService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Optional;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> ：yaxuSong</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 14:52 2018/4/18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Modified</span> by:</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Service</span>(<span class="string">"accessTokenService"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccessTokenServiceImpl</span> <span class="keyword">implements</span> <span class="title">AccessTokenService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> AccessTokenRepository repo;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> AccessToken <span class="title">save</span><span class="params">(AccessToken accessToken)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span>  repo.save(accessToken);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(AccessToken accessToken)</span> </span>&#123;</span><br><span class="line">        repo.delete(accessToken);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> AccessToken <span class="title">get</span><span class="params">(String id)</span> </span>&#123;</span><br><span class="line">        Optional&lt;AccessToken&gt; accessToken = repo.findById(id);</span><br><span class="line">        <span class="keyword">return</span> accessToken.orElse(<span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>以上完成了整个整合过程。</p><h3 id="5-简单的测试"><a href="#5-简单的测试" class="headerlink" title="5. 简单的测试"></a>5. 简单的测试</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.xxx.controller.entry.entity.AccessToken;</span><br><span class="line"><span class="keyword">import</span> com.xxx.service.AccessTokenService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> ：yaxuSong</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 15:16 2018/4/18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Modified</span> by:</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"test"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> AccessTokenService accessTokenService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"add"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">        AccessToken accessToken = <span class="keyword">new</span> AccessToken();</span><br><span class="line">        accessToken.setAccessToken(<span class="string">"dadaadadsdadewqeqfskksdbfdbkfsdkdajdhwke2elhsbcslc/DNDAWDAWWAFEWFSD23E2342"</span>);</span><br><span class="line">        accessToken.setExpire(<span class="number">60L</span>);</span><br><span class="line"><span class="comment">//单位 秒</span></span><br><span class="line">        AccessToken at = accessTokenService.save(accessToken);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"成功"</span>+<span class="string">"键值为："</span>+at.getId();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"get"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">get</span><span class="params">(String id)</span></span>&#123;</span><br><span class="line">        AccessToken accessToken = accessTokenService.get(id);</span><br><span class="line">        <span class="keyword">return</span> accessToken==<span class="keyword">null</span>?<span class="string">"已过期"</span>:accessToken.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>测试结果：</p><p><img src="https://weaf.oss-cn-beijing.aliyuncs.com/redis-3.png" alt="Redis"></p><p>我这里添加了一个过期时间为60s的token。<br>我们通过查看可以看到时间的变化</p><p>第一次查询：<br><img src="https://weaf.oss-cn-beijing.aliyuncs.com/redis-4.png" alt="Redis"><br>第二次查询：<br><img src="https://weaf.oss-cn-beijing.aliyuncs.com/redis-5.png" alt="Redis"><br>第三次查询：<br><img src="https://weaf.oss-cn-beijing.aliyuncs.com/redis-6.png" alt="Redis"></p><p>我们查看下本地Rdis所有键值情况：<br><img src="https://weaf.oss-cn-beijing.aliyuncs.com/redis-7.png" alt="Redis"><br>过一段时间后查询：<br><img src="https://weaf.oss-cn-beijing.aliyuncs.com/redis-9.png" alt="Redis"><br>我们发现之前还存在键值id为c07cde6a-aec7-40f3-ad39-41862209bc9f的，但是内容没有了。<br>后来查询的就被删除了（过期后不会直接删除，会稍有延迟，只有id存在，其他都已被删除）</p><p>我们看到键值为：d2b97d54-1c8b-4803-8f60-6aaf3384fc32的是我之前存的TTL=7200s的。<br><img src="https://weaf.oss-cn-beijing.aliyuncs.com/redis-8.png" alt="Redis"></p><p>至此所有相关的内容就介绍完了。</p><p>本文参考地址：<a href="https://docs.spring.io/spring-data/redis/docs/2.0.5.RELEASE/reference/html/" target="_blank" rel="noopener">Spring-data-redis</a></p>]]></content>
    
    <summary type="html">
    
      Redis在SpringBoot 2.0中的整合
    
    </summary>
    
    
      <category term="Java" scheme="https://us-forever.com/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>好久都没有发表博客了</title>
    <link href="https://us-forever.com/2018/04/18/%E5%A5%BD%E4%B9%85%E9%83%BD%E6%B2%A1%E6%9C%89%E5%8F%91%E8%A1%A8%E5%8D%9A%E5%AE%A2%E4%BA%86/"/>
    <id>https://us-forever.com/2018/04/18/好久都没有发表博客了/</id>
    <published>2018-04-18T08:12:28.000Z</published>
    <updated>2018-04-18T08:17:43.000Z</updated>
    
    <content type="html"><![CDATA[<p>好久都没有发表博客了，自己忙了起来，有很多事情要做，感觉每一天很充实。<br>但是过得也浑浑噩噩，也许是因为自己一个人没有女朋友，所以生活过得得过且过，没有任何值得我去可以安排的。</p><p>去年说要看的书还没有看完，并不是自己的时间不够，而是自己比较懒惰吧，最近自己一直很忙。仿佛淡出了所有的交际圈一样。</p><p>不过相信过一阵子，所有该做的事情，我们还需要去做。</p><h1 id="2018，加油！"><a href="#2018，加油！" class="headerlink" title="2018，加油！"></a>2018，加油！</h1>]]></content>
    
    <summary type="html">
    
      好久都没有发表博客了
    
    </summary>
    
    
      <category term="随笔" scheme="https://us-forever.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>使用Xtrabackup备份InnoDB(MySQL)</title>
    <link href="https://us-forever.com/2018/03/06/%E4%BD%BF%E7%94%A8Xtrabackup%E5%A4%87%E4%BB%BDInnoDB-MySQL/"/>
    <id>https://us-forever.com/2018/03/06/使用Xtrabackup备份InnoDB-MySQL/</id>
    <published>2018-03-06T08:08:56.000Z</published>
    <updated>2018-03-07T09:13:18.583Z</updated>
    
    <content type="html"><![CDATA[<h2 id="一、Xtrabackup的简单介绍"><a href="#一、Xtrabackup的简单介绍" class="headerlink" title="一、Xtrabackup的简单介绍"></a>一、Xtrabackup的简单介绍</h2><p>Percona XtraBackup 是世界上唯一的开源免费的MySQL热备份软件，可以执行非阻塞操作<br>InnoDB和XtraDB数据库的备份。 Percona XtraBackup可提供以下优点：</p><ul><li>备份快速安全可靠</li><li>备份期间不间断的事务处理</li><li>节省磁盘空间和网络带宽</li><li>自动备份验证</li><li>更快的恢复时间保证正常工作</li></ul><p>Percona XtraBackup 为所有版本的Percona服务器，MySQL和MariaDB提供MySQL热备份。 它可执行<br>流媒体，压缩和增量MySQL备份。<br><a id="more"></a></p><h2 id="二、Xtrabackup的安装"><a href="#二、Xtrabackup的安装" class="headerlink" title="二、Xtrabackup的安装"></a>二、Xtrabackup的安装</h2><p>如果在互联网下 可使用以下命令安装</p><pre><code>wget https://www.percona.com/downloads/XtraBackup/Percona-XtraBackup-2.4.4/binary/redhat/7/x86_64/percona-xtrabackup-24-2.4.4-1.el7.x86_64.rpm</code></pre><p>获取相应rpm包<br>安装部分依赖(不同的操作系统可能已安装的库不尽相同)</p><pre><code>rpm -ivh mysql-community-libs-compat-5.7.20-1.el7.x86_64.rpm#根据mysql版本而定yum list|grep perlyum -y install perl-DBI.x86_64 perl-DBD-MySQL.x86_64</code></pre><p>然后安装Xtrabackup</p><pre><code>rpm -ivh percona-xtrabackup-24-2.4.4-1.el7.x86_64.rpm</code></pre><p>参考：</p><pre><code>yum install cmake gcc gcc-c++ libaio libaio-devel automake autoconf bison libtool ncurses-devel libgcrypt-devel libev-devel libcurl-devel vim-common</code></pre><h2 id="三、Xtrabackup备份MySQL"><a href="#三、Xtrabackup备份MySQL" class="headerlink" title="三、Xtrabackup备份MySQL"></a>三、Xtrabackup备份MySQL</h2><pre><code>xtrabackup --defaults-file=/etc/my.cnf --user=root --password=root --host=localhost --backup --target-dir=/data/backups/可指定数据库--databases=test</code></pre><h2 id="四、Xtrabackup的备份恢复"><a href="#四、Xtrabackup的备份恢复" class="headerlink" title="四、Xtrabackup的备份恢复"></a>四、Xtrabackup的备份恢复</h2><p>备份之前必须先关闭MySQL server<br>然后删除data目录（/var/lib/mysql一般情况是这个）</p><pre><code>xtrabackup  --copy-back --target-dir=/data/backups/</code></pre><p>执行完恢复之后需要设置文件权限</p><pre><code>chown -R mysql:mysql /var/lib/mysql</code></pre><p>然后启动mysql</p><pre><code>systemctl start mysqld.service#或者使用服务service mysqld start</code></pre><h2 id="五、使用脚本自动备份7天之内的数据"><a href="#五、使用脚本自动备份7天之内的数据" class="headerlink" title="五、使用脚本自动备份7天之内的数据"></a>五、使用脚本自动备份7天之内的数据</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/sh</span><br><span class="line"></span><br><span class="line"># Database info</span><br><span class="line">DB_USER="root"</span><br><span class="line">DB_PASS="root"</span><br><span class="line">DB_HOST="localhost"</span><br><span class="line"></span><br><span class="line"># Others vars</span><br><span class="line">BCK_DIR="/opt/app/mysqlbackup"    #the backup file directory</span><br><span class="line">CONF_DIR="/etc/my.cnf"</span><br><span class="line">DATE=`date +%F`</span><br><span class="line">RMDATE=`date -d '-7 day' +%F`</span><br><span class="line"></span><br><span class="line"># TODO</span><br><span class="line"></span><br><span class="line">mkdir -p $BCK_DIR/$DATE/</span><br><span class="line">#Create dir for save backup data</span><br><span class="line">xtrabackup --defaults-file=$CONF_DIR --user=$DB_USER --password=$DB_PASS --host=$DB_HOST --backup --target-dir=$BCK_DIR/$DATE/</span><br><span class="line">#Backup mysql data</span><br><span class="line">rm -rf $BCK_DIR/$RMDATE</span><br><span class="line">#Delete the backup 7 days ago</span><br><span class="line">#热备份数据库</span><br></pre></td></tr></table></figure><p>加入crontab</p><pre><code>30 2 * * * /bin/sh /home/scripts/mysqlbackup.sh</code></pre><p><a href="https://learn.percona.com/hubfs/Manuals/Percona_Xtra_Backup/Percona_XtraBackup_2.4/Percona-XtraBackup-2.4.9.pdf" target="_blank" rel="noopener">更多请参考官方文档</a></p>]]></content>
    
    <summary type="html">
    
      使用Xtrabackup备份InnoDB(MySQL)
    
    </summary>
    
    
      <category term="Linux" scheme="https://us-forever.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>LinuxMySQL的安装(3)</title>
    <link href="https://us-forever.com/2018/02/08/LinuxMySQL%E7%9A%84%E5%AE%89%E8%A3%85-3/"/>
    <id>https://us-forever.com/2018/02/08/LinuxMySQL的安装-3/</id>
    <published>2018-02-08T05:24:03.000Z</published>
    <updated>2018-02-08T06:03:52.199Z</updated>
    
    <content type="html"><![CDATA[<h2 id="一、查看是否安装了MySQL数据库"><a href="#一、查看是否安装了MySQL数据库" class="headerlink" title="一、查看是否安装了MySQL数据库"></a>一、查看是否安装了MySQL数据库</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa|grep mysql</span><br></pre></td></tr></table></figure><p><img src="/img/mysql1.png" alt><br>卸载<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -e --nodeps mysql-libs-5.1.71-1.el6.x86_64</span><br></pre></td></tr></table></figure></p><p>二、安装<br>安装一下包<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">rpm -ivh MySQL-devel-5.6.23-1.linux_glibc2.5.x86_64.rpm</span><br><span class="line">rpm -ivh MySQL-client-5.6.23-1.linux_glibc2.5.x86_64.rpm</span><br><span class="line">rpm -ivh MySQL-server-5.6.23-1.linux_glibc2.5.x86_64.rpm</span><br><span class="line">rpm -ivh MySQL-embedded-5.6.23-1.linux_glibc2.5.x86_64.rpm</span><br><span class="line">rpm -ivh MySQL-shared-5.6.23-1.linux_glibc2.5.x86_64.rpm</span><br><span class="line">rpm -ivh MySQL-shared-compat-5.6.23-1.linux_glibc2.5.x86_64.rpm</span><br></pre></td></tr></table></figure></p><p>三、启动登录设置密码<br>使用以下命令开启服务</p><pre><code>service mysql start</code></pre><p>获取初始密码：<br><img src="/img/mysql2.png" alt><br>使用root登录</p><pre><code>mysql -uroot -p</code></pre><p>然后试用一下命令设置密码</p><pre><code>SET PASSWORD = PASSWORD(&apos;123456&apos;);</code></pre>]]></content>
    
    <summary type="html">
    
      LinuxMySQL的安装(3)
    
    </summary>
    
    
      <category term="Linux" scheme="https://us-forever.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Linux下MySQL主从数据库的安装与配置</title>
    <link href="https://us-forever.com/2018/02/08/Linux%E4%B8%8BMySQL%E4%B8%BB%E4%BB%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/"/>
    <id>https://us-forever.com/2018/02/08/Linux下MySQL主从数据库的安装与配置/</id>
    <published>2018-02-08T03:36:42.000Z</published>
    <updated>2018-02-09T01:45:43.667Z</updated>
    
    <content type="html"><![CDATA[<h2 id="一、准备环境"><a href="#一、准备环境" class="headerlink" title="一、准备环境"></a>一、准备环境</h2><ol><li>两台服务器：服务器A、服务器B</li><li>服务器A：Red Hat Enterprise Linux Server release 6.5 (Santiago)</li><li>服务器B：Red Hat Enterprise Linux Server release 6.5 (Santiago)</li><li>服务器A IP：172.16.125.50</li><li>服务器B IP：172.16.125.52</li><li>MySQL版本：5.6.23</li></ol><h2 id="二、安装MySQL"><a href="#二、安装MySQL" class="headerlink" title="二、安装MySQL"></a>二、安装MySQL</h2><p>具体安装请见</p><ol><li><a href="http://us-forever.com/2018/01/15/LinuxMySQL的安装/">LinuxMySQL的安装(1)</a></li><li><a href="http://us-forever.com/2018/02/02/LinuxMySQL的安装-2/">LinuxMySQL的安装(2)</a></li><li><a href="http://us-forever.com/2018/02/08/LinuxMySQL的安装-3/">LinuxMySQL的安装(3)</a></li></ol><a id="more"></a><h2 id="三、主从库配置"><a href="#三、主从库配置" class="headerlink" title="三、主从库配置"></a>三、主从库配置</h2><h3 id="1、主库在-etc-my-cnf里添加以下内容"><a href="#1、主库在-etc-my-cnf里添加以下内容" class="headerlink" title="1、主库在/etc/my.cnf里添加以下内容"></a>1、主库在/etc/my.cnf里添加以下内容</h3><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#log日志</span></span><br><span class="line"><span class="attr">log_bin</span>=mysql_bin</span><br><span class="line"><span class="comment">#server ID</span></span><br><span class="line"><span class="attr">server_id</span>=<span class="number">2</span></span><br><span class="line"><span class="comment">#忽略同步的库</span></span><br><span class="line"><span class="attr">binlog-ignore-db</span>=information_schema</span><br><span class="line"><span class="attr">binlog-ignore-db</span>=cluster</span><br><span class="line"><span class="attr">binlog-ignore-db</span>=mysql</span><br><span class="line"><span class="comment">#需要同步的库</span></span><br><span class="line"><span class="attr">binlog-do-db</span>=test</span><br></pre></td></tr></table></figure><h3 id="2、从库在-etc-my-cnf里添加以下内容"><a href="#2、从库在-etc-my-cnf里添加以下内容" class="headerlink" title="2、从库在/etc/my.cnf里添加以下内容"></a>2、从库在/etc/my.cnf里添加以下内容</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">log_bin=mysql_bin</span><br><span class="line">server_id=3</span><br><span class="line">binlog-ignore-db=information_schema</span><br><span class="line">binlog-ignore-db=cluster</span><br><span class="line">binlog-ignore-db=mysql</span><br><span class="line">replicate-do-db=ufind_db</span><br><span class="line">replicate-ignore-db=mysql</span><br><span class="line">log-slave-updates</span><br><span class="line">slave-skip-errors=all</span><br><span class="line">slave-net-timeout=60</span><br></pre></td></tr></table></figure><h2 id="四、主从库设置"><a href="#四、主从库设置" class="headerlink" title="四、主从库设置"></a>四、主从库设置</h2><h3 id="1、进入主库，我们在主库中创建一个的账户，从库通过使用这个账号来同步数据。"><a href="#1、进入主库，我们在主库中创建一个的账户，从库通过使用这个账号来同步数据。" class="headerlink" title="1、进入主库，我们在主库中创建一个的账户，从库通过使用这个账号来同步数据。"></a>1、进入主库，我们在主库中创建一个的账户，从库通过使用这个账号来同步数据。</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE USER &apos;repl&apos;@&apos;172.16.125.52&apos; IDENTIFIED BY &apos;123456&apos;;</span><br></pre></td></tr></table></figure><h3 id="2、赋予相应的权限"><a href="#2、赋予相应的权限" class="headerlink" title="2、赋予相应的权限"></a>2、赋予相应的权限</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">GRANT FILE ON *.* TO 'repl'@'172.16.125.52' IDENTIFIED BY '123456';</span><br><span class="line"></span><br><span class="line">GRANT REPLICATION SLAVE ON *.* TO 'repl'@'172.16.125.52' IDENTIFIED BY '123456';</span><br><span class="line"></span><br><span class="line">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure><h3 id="3、重启数据库（主库）执行以下命令"><a href="#3、重启数据库（主库）执行以下命令" class="headerlink" title="3、重启数据库（主库）执行以下命令"></a>3、重启数据库（主库）执行以下命令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW MASTER STATUS;</span><br></pre></td></tr></table></figure><p><img src="/img/mysqlsync.png" alt><br>要记住以上的信息，在设置从库的时候需要填写并设置。</p><h3 id="4、在从库里边执行以下命令"><a href="#4、在从库里边执行以下命令" class="headerlink" title="4、在从库里边执行以下命令"></a>4、在从库里边执行以下命令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">stop slave;</span><br><span class="line">change master to master_host=&apos;172.16.125.50&apos;,master_user=&apos;repl&apos;,master_password=&apos;123456&apos;,master_log_file=&apos;mysql_bin.000023&apos;, master_log_pos=120;</span><br><span class="line">start slave;</span><br></pre></td></tr></table></figure><h3 id="5、然后执行一下命令查看状态"><a href="#5、然后执行一下命令查看状态" class="headerlink" title="5、然后执行一下命令查看状态"></a>5、然后执行一下命令查看状态</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show slave status \G;</span><br></pre></td></tr></table></figure><p>内容如下：<br><img src="/img/mysqlsync1.png" alt><br><img src="/img/mysqlsync2.png" alt></p><h3 id="6、测试与提示"><a href="#6、测试与提示" class="headerlink" title="6、测试与提示"></a>6、测试与提示</h3><p>后期的测试中我们只针对<strong>test</strong>库进行了同步。<br>所以只能针对<strong>test</strong>进行的操作才有效。</p><p>如果后期对一些列库进行操作，需要 添加相应的配置</p><pre><code>#主库配置文件binlog-do-db=test#从库配置文件replicate-do-db=test</code></pre><p>并查询出最新的master的状态，停止从库。并改变从库的配置重启同步。</p>]]></content>
    
    <summary type="html">
    
      Linux下MySQL主从数据库的安装与配置
    
    </summary>
    
    
      <category term="Linux" scheme="https://us-forever.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Linux离线安装Nginx</title>
    <link href="https://us-forever.com/2018/02/07/Linux%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85Nginx/"/>
    <id>https://us-forever.com/2018/02/07/Linux离线安装Nginx/</id>
    <published>2018-02-07T06:59:44.000Z</published>
    <updated>2018-02-07T09:25:01.809Z</updated>
    
    <content type="html"><![CDATA[<h1 id="一、准备工作"><a href="#一、准备工作" class="headerlink" title="一、准备工作"></a>一、准备工作</h1><p>一般情况下为了确保安装没有任何问题，我们先使用有网络环境的下安装的方法，去检测当前机器具体需要安装什么冬天链接库，然后按照提示缺失的库去下载相应的库。<br>我们按照正常的流程，去解压nginx<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf nginx-1.13.8.tar.gz</span><br></pre></td></tr></table></figure></p><p>进入解压后的目录执行<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd nginx-1.13.8</span><br><span class="line">./configure</span><br></pre></td></tr></table></figure></p><p>出现以下错误：<br><img src="/img/nginxerror.png" alt></p><p>我们按照有网络环境的方法去检测缺失的库及其版本。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install gcc gcc-c++ autoconf automake make</span><br></pre></td></tr></table></figure></p><a id="more"></a><p>显示如下：<br><img src="/img/liberror.png" alt></p><p>我们下载号相应的库<br>下边提供几个下载的网址：</p><ul><li><a href="http://mirrors.163.com/centos/6/os/x86_64/Packages/" target="_blank" rel="noopener">http://mirrors.163.com/centos/6/os/x86_64/Packages/</a></li><li><a href="http://rpmfind.net/" target="_blank" rel="noopener">http://rpmfind.net/</a></li><li><a href="https://pkgs.org" target="_blank" rel="noopener">https://pkgs.org</a></li></ul><p>下边是下载好的库<br><img src="/img/gcclib.png" alt><br>安装相应的库（<strong>集体安装情况具体分析</strong>）：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">rpm -ivh mpfr-2.4.1-6.el6.x86_64.rpm</span><br><span class="line">rpm -ivh cpp-4.4.7-18.el6.x86_64.rpm</span><br><span class="line">rpm -Uvh tzdata-2016j-1.el6.noarch.rpm</span><br><span class="line">rpm -Uvh glibc-common-2.12-1.209.el6.x86_64.rpm glibc-2.12-1.209.el6.x86_64.rpm glibc-headers-2.12-1.209.el6.x86_64.rpm glibc-devel-2.12-1.209.el6.x86_64.rpm kernel-headers-2.6.32-696.el6.x86_64.rpm</span><br><span class="line">rpm -ivh libgomp-4.4.7-18.el6.x86_64.rpm</span><br><span class="line">rpm -Uvh libstdc++-4.4.7-18.el6.x86_64.rpm</span><br><span class="line">rpm -ivh libstdc++-devel-4.4.7-18.el6.x86_64.rpm</span><br><span class="line">rpm -ivh ppl-0.10.2-11.el6.x86_64.rpm</span><br><span class="line">rpm -ivh cloog-ppl-0.15.7-1.2.el6.x86_64.rpm</span><br><span class="line">rpm -Uvh libgcc-4.4.7-18.el6.x86_64.rpm</span><br><span class="line">rpm -ivh gcc-4.4.7-18.el6.x86_64.rpm</span><br><span class="line">rpm -ivh gcc-c++-4.4.7-18.el6.x86_64.rpm</span><br><span class="line">rpm -ivh automake-1.11.1-4.el6.noarch.rpm autoconf-2.63-5.1.el6.noarch.rpm</span><br></pre></td></tr></table></figure></p><p>然后执行./configure<br>发现错误：<br><img src="/img/nginxerror1.png" alt><br>    然后安装一下库<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">rpm -Uvh pcre-7.8-7.el6.x86_64.rpm</span><br><span class="line">rpm -ivh pcre-devel-7.8-7.el6.x86_64.rpm</span><br><span class="line">rpm -Uvh zlib-1.2.3-29.el6.x86_64.rpm</span><br><span class="line">rpm -ivh zlib-devel-1.2.3-29.el6.x86_64.rpm</span><br><span class="line">rpm -i --force --nodeps krb5-devel-1.10.3-65.el6.x86_64.rpm</span><br><span class="line">rpm -Uvh openssl-1.0.1e-57.el6.x86_64.rpm</span><br><span class="line">rpm -ivh openssl-devel-1.0.1e-57.el6.x86_64.rpm</span><br></pre></td></tr></table></figure></p><p>然后执行<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">./configure</span><br><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure></p><p>安装完成</p><h1 id="二、查看版本信息"><a href="#二、查看版本信息" class="headerlink" title="二、查看版本信息"></a>二、查看版本信息</h1><p>根据安装完成的信息查看nginx.</p>]]></content>
    
    <summary type="html">
    
      Linux离线安装Nginx
    
    </summary>
    
    
      <category term="Linux" scheme="https://us-forever.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Linux定时任务备份mysql和数据</title>
    <link href="https://us-forever.com/2018/02/06/Linux%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E5%A4%87%E4%BB%BDmysql%E5%92%8C%E6%95%B0%E6%8D%AE/"/>
    <id>https://us-forever.com/2018/02/06/Linux定时任务备份mysql和数据/</id>
    <published>2018-02-06T03:04:43.000Z</published>
    <updated>2018-02-06T07:38:56.867Z</updated>
    
    <content type="html"><![CDATA[<p>一般的Linux的定时任务都需要和脚本一起才能完成定时任务。</p><h2 id="一、写好要执行的shell脚本"><a href="#一、写好要执行的shell脚本" class="headerlink" title="一、写好要执行的shell脚本"></a>一、写好要执行的shell脚本</h2><p>下边是mysqldump的脚本<br>使用vi创建一下脚本<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /scripts/mysqldump.sh</span><br></pre></td></tr></table></figure></p><p>脚本内容如下<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span>!/bin/sh</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> Database info</span><br><span class="line">DB_USER="root"</span><br><span class="line">DB_PASS="root"</span><br><span class="line">DB_HOST="192.168.31.62"</span><br><span class="line">DB_NAME="confluence"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> Others vars</span><br><span class="line">BIN_DIR="/usr/bin"            #the mysql bin path</span><br><span class="line">BCK_DIR="/app/backup/mysql"    #the backup file directory</span><br><span class="line">DATE=`date +%F-%H-%M-%S`</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> TODO</span><br><span class="line"><span class="meta">#</span> /usr/bin/mysqldump --opt -uroot -proot -h192.168.31.62 confluence &gt; /app/backup/mysql/confluence_`date +%F`.sql</span><br><span class="line"><span class="meta">$</span>BIN_DIR/mysqldump --opt -u$DB_USER -p$DB_PASS -h$DB_HOST $DB_NAME &gt; $BCK_DIR/confluence_$DATE.sql</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span>还原数据库</span><br><span class="line"><span class="meta">#</span>用mysql-front导入前一天的 *.sql 文件即可恢复数据</span><br></pre></td></tr></table></figure></p><a id="more"></a><h2 id="二、设置定时任务"><a href="#二、设置定时任务" class="headerlink" title="二、设置定时任务"></a>二、设置定时任务</h2><p>使用一下命令来编辑定时任务</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crontab -e</span><br></pre></td></tr></table></figure><p>并添加一下内容：</p><pre><code>* * * * * /bin/sh /scripts/mysqldump.sh &gt;/dev/null 2&gt;&amp;1</code></pre><p><strong>crontab</strong>一些相关内容如下图：<br><img src="/img/crontab.png" alt="crontab"></p><h2 id="三、查看备份位置得到相应文件"><a href="#三、查看备份位置得到相应文件" class="headerlink" title="三、查看备份位置得到相应文件"></a>三、查看备份位置得到相应文件</h2><p><img src="/img/mysqldump.png" alt></p><h2 id="四、备份JIRA、Confluence数据，定时删除不必要数据"><a href="#四、备份JIRA、Confluence数据，定时删除不必要数据" class="headerlink" title="四、备份JIRA、Confluence数据，定时删除不必要数据"></a>四、备份JIRA、Confluence数据，定时删除不必要数据</h2><h3 id="1、JIRA备份5分钟之内的数据"><a href="#1、JIRA备份5分钟之内的数据" class="headerlink" title="1、JIRA备份5分钟之内的数据"></a>1、JIRA备份5分钟之内的数据</h3><p>书写脚本<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tar -zcvf "/app/backup/jira/`date +%F-%H-%M-%S`.tar.gz" /var/atlassian/application-data/jira/data</span><br><span class="line">rm -f /app/backup/jira/`date -d '-5 minute' +%F-%H-%M`*</span><br><span class="line">#删除5分钟之前的</span><br></pre></td></tr></table></figure></p><p>直接添加crontab命令<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crontab -e</span><br></pre></td></tr></table></figure></p><p>添加一下脚本：</p><pre><code>* * * * * /bin/sh /scripts/jirabackup.sh &gt;/dev/null 2&gt;&amp;1</code></pre><h3 id="2、Confluence备份5分钟之内的数据"><a href="#2、Confluence备份5分钟之内的数据" class="headerlink" title="2、Confluence备份5分钟之内的数据"></a>2、Confluence备份5分钟之内的数据</h3><p>书写脚本<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tar -zcvf "/app/backup/confluence/`date +%F-%H-%M-%S`.tar.gz" /app/atlassian/application-data/confluence/attachments</span><br><span class="line">rm -f /app/backup/confluence/`date -d '-5 minute' +%F-%H-%M`*</span><br></pre></td></tr></table></figure></p><p>直接添加crontab命令<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crontab -e</span><br></pre></td></tr></table></figure></p><p>并添加一下内容</p><pre><code>* * * * * /bin/sh /scripts/confluencebackup.sh &gt;/dev/null 2&gt;&amp;1</code></pre><p>因为这个是测试的案例。我写了比较正式的参考如下：<br>mysql备份7天之内的数据</p><pre><code>#!/bin/sh# Database infoDB_USER=&quot;root&quot;DB_PASS=&quot;root&quot;DB_HOST=&quot;192.168.31.62&quot;DB_NAME=&quot;confluence&quot;# Others varsBIN_DIR=&quot;/usr/bin&quot;            #the mysql bin pathBCK_DIR=&quot;/app/backup/mysql&quot;    #the backup file directoryDATE=`date +%F`RMDATE=`date -d &apos;-7 day&apos; +%F`*# TODO# /usr/bin/mysqldump --opt -uroot -proot -h192.168.31.62 confluence &gt; /app/backup/mysql/confluence_`date +%F`.sql$BIN_DIR/mysqldump --opt -u$DB_USER -p$DB_PASS -h$DB_HOST $DB_NAME &gt; $BCK_DIR/confluence_$DATE.sqlrm -f $BCK_DIR/confluence_$RMDATE.sql#备份Confluence数据库，并保存7天之内的记录</code></pre><p>crontab写法：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">30 2 * * * /bin/sh /scripts/mysqldump.sh</span><br></pre></td></tr></table></figure></p><p>JIRA备份7天之内的附件</p><pre><code>#!/bin/shAPP_NAME=jiraBACKUP_DIR=/app/backup/jiraDATE=`date +%F`RMDATE=`date -d &apos;-7 day&apos; +%F`*JIRA_DATA=/var/atlassian/application-data/jira/datatar -zcvf $BACKUP_DIR/$APP_NAME-$DATE.tar.gz $JIRA_DATArm -f $BACKUP_DIR/$APP_NAME-$RMDATE.tar.gz#备份JIRA数据，并保存7天之内的记录</code></pre><p>crontab写法<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">30 2 * * * /bin/sh /scripts/jirabackup.sh</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      Linux定时任务备份mysql和数据
    
    </summary>
    
    
      <category term="ATLASSIAN" scheme="https://us-forever.com/tags/ATLASSIAN/"/>
    
      <category term="Linux" scheme="https://us-forever.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>回家过年前一周</title>
    <link href="https://us-forever.com/2018/02/05/%E5%9B%9E%E5%AE%B6%E8%BF%87%E5%B9%B4%E5%89%8D%E4%B8%80%E5%91%A8/"/>
    <id>https://us-forever.com/2018/02/05/回家过年前一周/</id>
    <published>2018-02-05T09:06:18.000Z</published>
    <updated>2018-02-05T09:09:51.574Z</updated>
    
    <content type="html"><![CDATA[<p>过年回家的前一周：<br>    这一周还是有很多任务去做的。<br>    写好多文档。<br>    做好多东西。<br>    安装各种东西。<br>    学习各种东西。<br>    感觉好忙碌。<br>    应该很快就会过去吧。<br>    至少今天已经马上结束了。</p><pre style="color = red">    ^_^ 2018 ヾ(◍°∇°◍)ﾉﾞ加油。</pre>]]></content>
    
    <summary type="html">
    
      回家过年前一周
    
    </summary>
    
    
      <category term="随笔" scheme="https://us-forever.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>LinuxMySQL的安装(2)</title>
    <link href="https://us-forever.com/2018/02/02/LinuxMySQL%E7%9A%84%E5%AE%89%E8%A3%85-2/"/>
    <id>https://us-forever.com/2018/02/02/LinuxMySQL的安装-2/</id>
    <published>2018-02-02T08:00:21.000Z</published>
    <updated>2018-02-02T08:12:53.812Z</updated>
    
    <content type="html"><![CDATA[<h2 id="一、查看是否安装了MySQL"><a href="#一、查看是否安装了MySQL" class="headerlink" title="一、查看是否安装了MySQL"></a>一、查看是否安装了MySQL</h2><p>使用命令：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa|grep -i mysql</span><br></pre></td></tr></table></figure></p><p>如果使用centos，可能会出现冲突，解决冲突需要卸载mariadb<br>首先查看是否安装了Mariadb<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa|grep mariadb</span><br></pre></td></tr></table></figure></p><a id="more"></a><p>然后卸载<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -e mariadb-libs-5.5.56-2.el7.x86_64</span><br></pre></td></tr></table></figure></p><p>强制卸载(可选):<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -e --nodeps mariadb-libs-5.5.56-2.el7.x86_64</span><br></pre></td></tr></table></figure></p><p><img src="/img/linuxMySQL-1.png" alt="mysql-1"></p><h2 id="二、如果安装了需删除已安装版本"><a href="#二、如果安装了需删除已安装版本" class="headerlink" title="二、如果安装了需删除已安装版本"></a>二、如果安装了需删除已安装版本</h2><p>删除命令：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rpm -e --nodeps 包名</span><br><span class="line">( rpm -ev mysql-4.1.12-3.RHEL4.1 )</span><br></pre></td></tr></table></figure></p><p>删除老版本mysql的开发头文件和库<br>命令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rm -fr /usr/lib/mysql</span><br><span class="line">rm -fr /usr/include/mysql</span><br></pre></td></tr></table></figure></p><p>注意：卸载后/var/lib/mysql中的数据及/etc/my.cnf不会删除，如果确定没用后就手工删除<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rm -f /etc/my.cnf</span><br><span class="line">rm -fr /var/lib/mysql</span><br></pre></td></tr></table></figure></p><p>三、准备安装的环境<br>wget <a href="https://dev.mysql.com/get/Downloads/MySQL-5.7/mysql-5.7.20-1.el7.x86_64.rpm-bundle.tar" target="_blank" rel="noopener">https://dev.mysql.com/get/Downloads/MySQL-5.7/mysql-5.7.20-1.el7.x86_64.rpm-bundle.tar</a><br>或者用自己准备好的包<br>mysql-5.7.20-1.el7.x86_64.rpm-bundle.tar<br>解压包<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -xvf mysql-5.7.20-1.el7.x86_64.rpm-bundle.tar</span><br></pre></td></tr></table></figure></p><p>然后按照以下顺序安装<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rpm -ivh mysql-community-common-5.7.20-1.el7.x86_64.rpm </span><br><span class="line">rpm -ivh mysql-community-libs-5.7.20-1.el7.x86_64.rpm </span><br><span class="line">rpm -ivh mysql-community-client-5.7.20-1.el7.x86_64.rpm </span><br><span class="line">rpm -ivh mysql-community-server-5.7.20-1.el7.x86_64.rpm</span><br></pre></td></tr></table></figure></p><p>四、启动并修改密码<br>安装完成后就可以启动服务了<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service mysqld start</span><br></pre></td></tr></table></figure></p><p>启动后查看配置文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/my.cnf</span><br></pre></td></tr></table></figure></p><p><img src="/img/linuxMySQL-1-2.png" alt="linuxMySQL-1-2.png"><br>找打log文件 进入查找默认root密码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /var/log/mysqld.log</span><br></pre></td></tr></table></figure></p><p><img src="/img/linuxMySQL-1-3.png" alt></p><p>使用一下命令登录并修改密码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -p</span><br></pre></td></tr></table></figure></p><p>修改密码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SET PASSWORD FOR &apos;root&apos;@&apos;localhost&apos; = PASSWORD(&apos;newpass&apos;);</span><br><span class="line">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure></p><p><img src="/img/linuxMySQL-1-4.png" alt></p>]]></content>
    
    <summary type="html">
    
      LinuxMySQL的安装(2)
    
    </summary>
    
    
      <category term="ATLASSIAN" scheme="https://us-forever.com/tags/ATLASSIAN/"/>
    
      <category term="Linux" scheme="https://us-forever.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Atlassian产品设置JVM</title>
    <link href="https://us-forever.com/2018/01/31/Atlassian%E4%BA%A7%E5%93%81%E8%AE%BE%E7%BD%AEJVM/"/>
    <id>https://us-forever.com/2018/01/31/Atlassian产品设置JVM/</id>
    <published>2018-01-31T11:56:58.000Z</published>
    <updated>2018-01-31T11:56:58.386Z</updated>
    
    <summary type="html">
    
      Atlassian产品设置JVM
    
    </summary>
    
    
      <category term="读书笔记" scheme="https://us-forever.com/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>Crucible安装</title>
    <link href="https://us-forever.com/2018/01/29/Crucible%E5%AE%89%E8%A3%85/"/>
    <id>https://us-forever.com/2018/01/29/Crucible安装/</id>
    <published>2018-01-29T03:35:15.000Z</published>
    <updated>2018-01-29T04:03:44.805Z</updated>
    
    <content type="html"><![CDATA[<p>一、创建Crucible用户</p><blockquote><p>useradd crucible</p></blockquote>]]></content>
    
    <summary type="html">
    
      Crucible安装
    
    </summary>
    
    
      <category term="读书笔记" scheme="https://us-forever.com/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>当璀璨速朽成尘埃</title>
    <link href="https://us-forever.com/2018/01/25/%E5%BD%93%E7%92%80%E7%92%A8%E9%80%9F%E6%9C%BD%E6%88%90%E5%B0%98%E5%9F%83/"/>
    <id>https://us-forever.com/2018/01/25/当璀璨速朽成尘埃/</id>
    <published>2018-01-25T05:46:33.000Z</published>
    <updated>2018-01-26T10:15:45.022Z</updated>
    
    <content type="html"><![CDATA[<p>一个人喜欢一个人不是错，但是却总是受伤。<br>从任何细微的角度和力度去分析不同的东西，都会体会到辛酸。</p><p>每一次的受挫都会让自己的信心缩减，一次又一次的失落的最终结果就是放弃。</p><p>而另一个人的态度是决定整个事情的关键。</p><p>事情可以复杂，也可以简单。</p><p>但是其中最主要的问题就是追求者的执着。</p><p>也许马上就要到达尽头了，因为他发现所有的付出都不会有任何的回报。</p><p>连一句话都没有。</p><p>他觉得这样的人不值得他为她做的更多。</p><p>但是之所以继续，就是因为他喜欢她。而且也是曾承诺过。所以他坚持。</p>]]></content>
    
    <summary type="html">
    
      当璀璨速朽成尘埃
    
    </summary>
    
    
      <category term="读书笔记" scheme="https://us-forever.com/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>JIRA高于7.2版本导出xlsx格式的EXCEL文件</title>
    <link href="https://us-forever.com/2018/01/22/JIRA%E9%AB%98%E4%BA%8E7-2%E7%89%88%E6%9C%AC%E5%AF%BC%E5%87%BAxlsx%E6%A0%BC%E5%BC%8F%E7%9A%84EXCEL%E6%96%87%E4%BB%B6/"/>
    <id>https://us-forever.com/2018/01/22/JIRA高于7-2版本导出xlsx格式的EXCEL文件/</id>
    <published>2018-01-22T04:06:28.000Z</published>
    <updated>2018-01-22T04:46:40.229Z</updated>
    
    <content type="html"><![CDATA[<p>Locate the <strong>jira-config.properties</strong> file in the <strong>$JIRA_HOME</strong> directory.<br>If the file does not exist, please proceed to create it.<br>Open the file and add the below on a separate line:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jira.export.excel.enabled=true</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      JIRA高于7.2版本导出xlsx格式的EXCEL文件
    
    </summary>
    
    
      <category term="ATLASSIAN" scheme="https://us-forever.com/tags/ATLASSIAN/"/>
    
  </entry>
  
  <entry>
    <title>Linux离线git的安装</title>
    <link href="https://us-forever.com/2018/01/17/Linux%E7%A6%BB%E7%BA%BFgit%E7%9A%84%E5%AE%89%E8%A3%85/"/>
    <id>https://us-forever.com/2018/01/17/Linux离线git的安装/</id>
    <published>2018-01-17T05:41:13.000Z</published>
    <updated>2018-02-02T08:57:09.856Z</updated>
    
    <content type="html"><![CDATA[<h2 id="一、简介"><a href="#一、简介" class="headerlink" title="一、简介"></a>一、简介</h2><p>不同操作系统的Linux的安装可能不太一样。<br>本教程使用的是CentOS或者RHEL。</p><h2 id="二、准备环境"><a href="#二、准备环境" class="headerlink" title="二、准备环境"></a>二、准备环境</h2><p>如果有网络的情况下肯定相当容易：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum install curl-devel expat-devel gettext-devel openssl-devel zlib-devel gcc perl-ExtUtils-MakeMaker</span><br><span class="line"></span><br><span class="line">yum install git</span><br></pre></td></tr></table></figure></p><p>若果yum源安装的版本较低，不执行<strong>yum install git</strong>命令，并按照四、五步骤操作。<br>如果是离线需要完成后续操作：<br>首先我们需要到官网下载相应的安装包<br><a href="https://www.kernel.org/pub/software/scm/git/" target="_blank" rel="noopener">https://www.kernel.org/pub/software/scm/git/</a><br>选择<strong>tar.gz</strong></p><h2 id="三、下载和安装依赖"><a href="#三、下载和安装依赖" class="headerlink" title="三、下载和安装依赖"></a>三、下载和安装依赖</h2><p>然后最麻烦的地方就是依赖动态链接库的下载。<br>需要下载的库可以到这两个网站上去找：<br><a href="http://www.rpmfind.net/linux/RPM/index.html" target="_blank" rel="noopener">fr2.rpmfind.net</a><br><a href="https://pkgs.org/" target="_blank" rel="noopener">Linux Packages Search-pkgs.org</a><br>我这里提供了一些<br><a id="more"></a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">cpio-2.11-24.el7.x86_64.rpm</span><br><span class="line">curl-7.29.0-42.el7.x86_64.rpm</span><br><span class="line">expat-2.1.0-10.el7_3.x86_64.rpm</span><br><span class="line">expat-devel-2.1.0-10.el7_3.x86_64.rpm</span><br><span class="line">gdbm-devel-1.10-8.el7.x86_64.rpm</span><br><span class="line">gettext-0.19.8.1-2.el7.x86_64.rpm</span><br><span class="line">gettext-devel-0.19.8.1-2.el7.x86_64.rpm</span><br><span class="line">krb5-devel-1.15.1-8.el7.x86_64.rpm</span><br><span class="line">libcurl-7.29.0-42.el7.x86_64.rpm</span><br><span class="line">libcurl-devel-7.29.0-42.el7.x86_64.rpm</span><br><span class="line">libdb-devel-5.3.21-20.el7.x86_64.rpm</span><br><span class="line">openssl-1.0.2k-8.el7.x86_64.rpm</span><br><span class="line">openssl-devel-1.0.2k-8.el7.x86_64.rpm</span><br><span class="line">perl-5.16.3-292.el7.x86_64.rpm</span><br><span class="line">perl-devel-5.16.3-292.el7.x86_64.rpm</span><br><span class="line">perl-ExtUtils-CBuilder-0.28.2.6-292.el7.noarch.rpm</span><br><span class="line">perl-ExtUtils-Install-1.58-292.el7.noarch.rpm</span><br><span class="line">perl-ExtUtils-MakeMaker-6.68-3.el7.noarch.rpm</span><br><span class="line">perl-ExtUtils-Manifest-1.61-244.el7.noarch.rpm</span><br><span class="line">perl-ExtUtils-ParseXS-3.18-3.el7.noarch.rpm</span><br><span class="line">systemtap-sdt-devel-3.1-3.el7.x86_64.rpm</span><br><span class="line">zlib-1.2.7-17.el7.x86_64.rpm</span><br><span class="line">zlib-devel-1.2.7-17.el7.x86_64.rpm</span><br></pre></td></tr></table></figure></p><p>这是git需要的一些库，需要安装的不是很多，但是安装的库也需要依赖。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">rpm -ivh perl-5.16.3-292.el7.x86_64.rpm</span><br><span class="line">rpm -ivh perl-devel-5.16.3-292.el7.x86_64.rpm</span><br><span class="line">rpm -ivh zlib-devel-1.2.7-17.el7.x86_64.rpm</span><br><span class="line">rpm -ivh libcurl-devel-7.29.0-42.el7.x86_64.rpm</span><br><span class="line">rpm -ivh curl-7.29.0-42.el7.x86_64.rpm</span><br><span class="line">rpm -ivh zlib-devel-1.2.7-17.el7.x86_64.rpm</span><br><span class="line">rpm -ivh openssl-devel-1.0.2k-8.el7.x86_64.rpm</span><br><span class="line">rpm -ivh perl-ExtUtils-MakeMaker-6.68-3.el7.noarch.rpm</span><br><span class="line">rpm -ivh gettext-devel-0.19.8.1-2.el7.x86_64.rpm</span><br></pre></td></tr></table></figure></p><p>以上库需要安装，并需要安装对应依赖。<br>有时候有些包可能互相依赖，安装时可使用一下命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -ivh perl-ExtUtils-MakeMaker-6.68-3.el7.noarch.rpm perl-ExtUtils-Install-1.58-292.el7.noarch.rpm zlib-devel-1.2.7-17.el7.x86_64.rpm</span><br></pre></td></tr></table></figure></p><p>编译安装可能需要的包<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">rpm -ivh cloog-ppl-0.15.7-1.2.el6.x86_64.rpm</span><br><span class="line">rpm -ivh cpp-4.4.7-18.el6.x86_64.rpm</span><br><span class="line">rpm -ivh gcc-4.4.7-18.el6.x86_64.rpm</span><br><span class="line">rpm -ivh gcc-c++-4.4.7-18.el6.x86_64.rpm</span><br><span class="line">rpm -ivh libgcc-4.4.7-18.el6.x86_64.rpm</span><br><span class="line">rpm -ivh libgomp-4.4.7-18.el6.x86_64.rpm</span><br><span class="line">rpm -ivh libstdc++-4.4.7-18.el6.x86_64.rpm</span><br><span class="line">rpm -ivh libstdc++-devel-4.4.7-18.el6.x86_64.rpm</span><br><span class="line">rpm -ivh mpfr-2.4.1-6.el6.x86_64.rpm</span><br><span class="line">rpm -ivh ppl-0.10.2-11.el6.x86_64.rpm</span><br></pre></td></tr></table></figure></p><p>有时会发生冲突可以使用枪支卸载，或者不考虑依赖安装。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">rpm -e  --nodeps mariadb-libs-5.5.56-2.el7.x86_64</span><br><span class="line">//强制卸载</span><br><span class="line"></span><br><span class="line">rpm -i --force --nodeps krb5-devel-1.15.1-8.el7.x86_64.rpm</span><br><span class="line">//强制安装 --force可选</span><br></pre></td></tr></table></figure></p><h2 id="四、解压和安装"><a href="#四、解压和安装" class="headerlink" title="四、解压和安装"></a>四、解压和安装</h2><p>解压安装包<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf git-2.15.1.tar.gz</span><br></pre></td></tr></table></figure></p><p>进入解压后的文件夹<br><img src="/img/git-1.png" alt><br>执行一下命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./configure</span><br></pre></td></tr></table></figure></p><p>检查没有任何出错<br><img src="/img/git-2.png" alt><br>然后执行以下命令进行编译<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make</span><br></pre></td></tr></table></figure></p><p>检查没有问题执行安装<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make install</span><br></pre></td></tr></table></figure></p><p>检查没有任何出错<br><img src="/img/git-4.png" alt></p><h2 id="五、查看安装结果"><a href="#五、查看安装结果" class="headerlink" title="五、查看安装结果"></a>五、查看安装结果</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git --version</span><br></pre></td></tr></table></figure><p><img src="/img/git-5.png" alt></p>]]></content>
    
    <summary type="html">
    
      Linux离线git的安装
    
    </summary>
    
    
      <category term="Linux" scheme="https://us-forever.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>终于复活啦</title>
    <link href="https://us-forever.com/2018/01/15/%E7%BB%88%E4%BA%8E%E5%A4%8D%E6%B4%BB%E5%95%A6/"/>
    <id>https://us-forever.com/2018/01/15/终于复活啦/</id>
    <published>2018-01-15T09:14:59.000Z</published>
    <updated>2018-01-15T09:15:58.276Z</updated>
    
    <content type="html"><![CDATA[<p>博客终于恢复了，可以更新了。有些功能还有点问题，需要修缮。</p>]]></content>
    
    <summary type="html">
    
      终于复活啦
    
    </summary>
    
    
      <category term="随笔" scheme="https://us-forever.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>LinuxMySQL的安装(1)</title>
    <link href="https://us-forever.com/2018/01/15/LinuxMySQL%E7%9A%84%E5%AE%89%E8%A3%85-1/"/>
    <id>https://us-forever.com/2018/01/15/LinuxMySQL的安装-1/</id>
    <published>2018-01-15T02:20:07.000Z</published>
    <updated>2018-02-02T07:59:52.924Z</updated>
    
    <content type="html"><![CDATA[<h2 id="一、查看是否安装了MySQL"><a href="#一、查看是否安装了MySQL" class="headerlink" title="一、查看是否安装了MySQL"></a>一、查看是否安装了MySQL</h2><p>使用命令：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa|grep -i mysql</span><br></pre></td></tr></table></figure></p><p>如果使用centos，可能会出现冲突，解决冲突需要卸载mariadb<br>首先查看是否安装了Mariadb<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa|grep mariadb</span><br></pre></td></tr></table></figure></p><a id="more"></a><p>然后卸载<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -e mariadb-libs-5.5.56-2.el7.x86_64</span><br></pre></td></tr></table></figure></p><p>强制卸载(可选):<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -e --nodeps mariadb-libs-5.5.56-2.el7.x86_64</span><br></pre></td></tr></table></figure></p><p><img src="/img/linuxMySQL-1.png" alt="mysql-1"></p><h2 id="二、如果安装了需删除已安装版本"><a href="#二、如果安装了需删除已安装版本" class="headerlink" title="二、如果安装了需删除已安装版本"></a>二、如果安装了需删除已安装版本</h2><p>删除命令：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rpm -e --nodeps 包名</span><br><span class="line">( rpm -ev mysql-4.1.12-3.RHEL4.1 )</span><br></pre></td></tr></table></figure></p><p>删除老版本mysql的开发头文件和库<br>命令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rm -fr /usr/lib/mysql</span><br><span class="line">rm -fr /usr/include/mysql</span><br></pre></td></tr></table></figure></p><p>注意：卸载后/var/lib/mysql中的数据及/etc/my.cnf不会删除，如果确定没用后就手工删除<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rm -f /etc/my.cnf</span><br><span class="line">rm -fr /var/lib/mysql</span><br></pre></td></tr></table></figure></p><h2 id="三、安装mysql准备环境"><a href="#三、安装mysql准备环境" class="headerlink" title="三、安装mysql准备环境"></a>三、安装mysql准备环境</h2><p>我自mysql官网下载通用的Linux版本安装包<br>mysql-5.7.20-linux-glibc2.12-x86_64.tar.gz<br>将下载好的包放在 /usr/local 目录下，或者执行命令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local</span><br><span class="line">wget https://cdn.mysql.com//Downloads/MySQL-5.7/mysql-5.7.20-linux-glibc2.12-x86_64.tar.gz</span><br></pre></td></tr></table></figure></p><p><img src="/img/linuxMySQL-2.png" alt="mysql-2"></p><p>解压下载的文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf mysql-5.7.20-linux-glibc2.12-x86_64.tar.gz</span><br></pre></td></tr></table></figure></p><p>将解压之后的所有文件移动到/usr/local/mysql<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv ./mysql-5.7.20-linux-glibc2.12-x86_64/* ./mysql</span><br></pre></td></tr></table></figure></p><p>为mysql创建系统用户(可选，新版本会自动创建相应用户)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">groupadd mysql</span><br><span class="line">useradd -r -g mysql mysql</span><br></pre></td></tr></table></figure></p><p>//-r参数表示mysql用户是系统用户，不可用于登录系统<br>并变更mysql安装目录的所属用户和用户组<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chown -R mysql:mysql mysql</span><br><span class="line">// -R 迭代处理</span><br></pre></td></tr></table></figure></p><p><img src="/img/linuxMySQL-3.png" alt="mysql-3"></p><h2 id="四、-安装和初始化"><a href="#四、-安装和初始化" class="headerlink" title="四、 安装和初始化"></a>四、 安装和初始化</h2><p>初始化数据库<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./bin/mysqld --initialize --user=mysql --basedir=/usr/local/mysql --datadir=/usr/local/mysql/data --lc_messages_dir=/usr/local/mysql/share --lc_messages=en_US</span><br></pre></td></tr></table></figure></p><p>记录刚刚输出的密码：<br>    jk9tEao&lt;94MC<br><img src="/img/linuxMySQL-4.png" alt="mysql-4"></p><p>配置/etc/my.cnf </p><p><a href="http://us-forever.com/file/my.cnf">my.cnf</a></p><h2 id="五、-启动登录和设置密码"><a href="#五、-启动登录和设置密码" class="headerlink" title="五、 启动登录和设置密码"></a>五、 启动登录和设置密码</h2><p>切换到mysql安装目录的bin下启动<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./mysqld_safe --user=mysql</span><br></pre></td></tr></table></figure></p><p>启动后可能无法使用当前窗口</p><p>登录进去设置新的密码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./mysql -u root -p</span><br></pre></td></tr></table></figure></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> <span class="keyword">password</span>=<span class="keyword">password</span>(<span class="string">"root"</span>);</span><br><span class="line"><span class="keyword">flush</span> <span class="keyword">privileges</span>;</span><br></pre></td></tr></table></figure><p><img src="/img/linuxMySQL-5.png" alt="mysql-5"></p><p>六、 添加到服务</p><p>切换到 support-files目录下，并执行以下命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp mysql.server /etc/init.d/mysql</span><br></pre></td></tr></table></figure></p><p>然后停止当前进程，使用服务启动mysql<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service mysql start</span><br></pre></td></tr></table></figure></p><p>并添加mysql环境变量<br>在 /etc/profile 的文件末尾追加：<br>    export PATH=$PATH:/usr/local/mysql/bin<br>保存后执行<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure></p><p>最后使用新密码登录到mysql<br><img src="/img/linuxMySQL-6.png" alt="mysql-6"></p>]]></content>
    
    <summary type="html">
    
      LinuxMySQL的安装
    
    </summary>
    
    
      <category term="ATLASSIAN" scheme="https://us-forever.com/tags/ATLASSIAN/"/>
    
      <category term="Linux" scheme="https://us-forever.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Bitbucket的安装</title>
    <link href="https://us-forever.com/2018/01/15/Bitbucket%E7%9A%84%E5%AE%89%E8%A3%85/"/>
    <id>https://us-forever.com/2018/01/15/Bitbucket的安装/</id>
    <published>2018-01-15T01:57:45.000Z</published>
    <updated>2018-01-22T04:49:34.621Z</updated>
    
    <content type="html"><![CDATA[<h1 id="一、安装环境"><a href="#一、安装环境" class="headerlink" title="一、安装环境"></a>一、安装环境</h1><p>1、数据库:MySQL(这里使用的是MySQL)</p><p>2、操作系统：Centos或者是RHEL</p><p>3、网络环境：无法连接到公网</p><p>4、准备文件：</p><ul><li>atlassian-jira-software-7.6.0-x64.bin</li><li>mysql-connector-java-5.1.44-bin.jar</li><li>nginx-1.12.2.tar.gz(反向代理)</li><li>git-2.15.1.tar.gz（2.7.4版本以上）</li></ul><h1 id="二、准备数据库"><a href="#二、准备数据库" class="headerlink" title="二、准备数据库"></a>二、准备数据库</h1><p>Bitbucket支持MySQL/MariaDB。</p><p>执行一下语句来创建相应的数据库和数据库角色</p><pre><code>CREATE DATABASE bitbucket CHARACTER SET utf8 COLLATE utf8_bin;CREATE USER `bitbucketuser`@`bitbucket-hostname` IDENTIFIED BY &apos;password&apos;;GRANT ALL PRIVILEGES ON bitbucket.* TO &apos;bitbucketuser&apos;@&apos;bitbucket-hostname&apos; IDENTIFIED BY &apos;password&apos;;FLUSH PRIVILEGES;</code></pre><h1 id="三、安装"><a href="#三、安装" class="headerlink" title="三、安装"></a>三、安装</h1><p>切换到root,或者有root权限的用户。</p><pre><code>chmod a+x atlassian-bitbucket-5.7.0-x64.binsudo ./atlassian-bitbucket-5.7.0-x64.bin</code></pre><p>并按照一下步骤操作。<br><img src="/img/bitbucket-1.png" alt><br><img src="/img/bitbucket-2.png" alt></p><p>复制 mysql-connector-java-5.1.44-bin.jar 到Bitbucket的Home/lib目录。<br>没有初始化的Bitbucket需要创建lib目录。（<strong>并注意创建目录的拥有者是atlbitbucket</strong>）</p><pre><code>mkdir /var/atlassian/application-data/bitbucket/libmv mysql-connector-java-5.1.44-bin.jar /var/atlassian/application-data/bitbucket/libchown -R atlbitbucket:atlbitbucket /var/atlassian/application-data/bitbucket/lib</code></pre><h1 id="四、启动并配置"><a href="#四、启动并配置" class="headerlink" title="四、启动并配置"></a>四、启动并配置</h1><p>使用服务启动Bitbucket</p><pre><code>service atlbitbucket start//启动服务service atlbitbucket status//查看运行状态service atlbitbucket stop//停止服务</code></pre><p><img src="/img/bitbucket-3.png" alt></p><p>配置数据库</p><p><img src="/img/bitbucket-4.png" alt></p><p>输入License</p><p><img src="/img/bitbucket-5.png" alt></p><p>设置Bitbucket管理员用户名和密码</p><p><img src="/img/bitbucket-6.png" alt></p>]]></content>
    
    <summary type="html">
    
      Bitbucket的安装
    
    </summary>
    
    
      <category term="ATLASSIAN" scheme="https://us-forever.com/tags/ATLASSIAN/"/>
    
  </entry>
  
  <entry>
    <title>JIRA修改license</title>
    <link href="https://us-forever.com/2018/01/11/JIRA%E4%BF%AE%E6%94%B9license/"/>
    <id>https://us-forever.com/2018/01/11/JIRA修改license/</id>
    <published>2018-01-11T05:27:01.000Z</published>
    <updated>2018-01-22T04:49:54.750Z</updated>
    
    <content type="html"><![CDATA[<p>If for whatever reason the JIRA license key needs to be extracted from the database, it can be done with the following SQL:<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> propertyvalue <span class="keyword">AS</span> license </span><br><span class="line"><span class="keyword">FROM</span>   propertytext pt </span><br><span class="line">       <span class="keyword">JOIN</span> propertyentry pe </span><br><span class="line">         <span class="keyword">ON</span> pt.id = pe.id </span><br><span class="line"><span class="keyword">WHERE</span>  property_key = <span class="string">'License20'</span>;</span><br></pre></td></tr></table></figure></p><a id="more"></a><p>(info) This is tested on PostgreSQL and may need modifying for other DBMS such as Oracle or SQL Server.</p><p>For JIRA 7.0.5 and above:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> productlicense;</span><br></pre></td></tr></table></figure><p>Updating the License<br>The license can be updated as per Specifying your License Details. If this does not work, it is possible to do so with an update to the database however it is not recommended. This is because it can cause data integrity problems and may lead to data corruption. If you choose to do this please keep in mind we may be unable to provide support.</p><p>Always back up your data before performing any modification to the database. If possible, try your modifications on a test server.</p><p>Stop JIRA.<br>Execute the following to locate the ID to modify:</p><p>JIRA 7.0.4 and below<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> pt.id </span><br><span class="line"><span class="keyword">FROM</span>   propertytext pt </span><br><span class="line">       <span class="keyword">JOIN</span> propertyentry pe </span><br><span class="line">         <span class="keyword">ON</span> pt.id = pe.id </span><br><span class="line"><span class="keyword">WHERE</span>  property_key = <span class="string">'License20'</span>;</span><br></pre></td></tr></table></figure></p><p>JIRA 7.0.4 and above<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> productlicense;</span><br></pre></td></tr></table></figure></p><p>Update the license with the following:</p><p>JIRA 7.0.4 and below<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> propertytext <span class="keyword">SET</span> propertyvalue = <span class="string">'&lt;license_string&gt;'</span> <span class="keyword">WHERE</span> <span class="keyword">id</span> = &lt;id_from_step_2&gt;;</span><br></pre></td></tr></table></figure></p><p>JIRA 7.0.4 and above<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> productlicense <span class="keyword">set</span> license =<span class="string">'&lt;license_string&gt;'</span> <span class="keyword">WHERE</span> <span class="keyword">id</span>= &lt;id_from_step_2&gt;;</span><br></pre></td></tr></table></figure></p><p>Start JIRA.</p>]]></content>
    
    <summary type="html">
    
      JIRA修改license
    
    </summary>
    
    
      <category term="ATLASSIAN" scheme="https://us-forever.com/tags/ATLASSIAN/"/>
    
  </entry>
  
  <entry>
    <title>rsync的使用与配置</title>
    <link href="https://us-forever.com/2018/01/09/rsync%E7%9A%84%E4%BD%BF%E7%94%A8%E4%B8%8E%E9%85%8D%E7%BD%AE/"/>
    <id>https://us-forever.com/2018/01/09/rsync的使用与配置/</id>
    <published>2018-01-09T03:31:15.000Z</published>
    <updated>2018-01-09T06:34:27.029Z</updated>
    
    <content type="html"><![CDATA[<h2 id="一、什么是rsync"><a href="#一、什么是rsync" class="headerlink" title="一、什么是rsync"></a>一、什么是rsync</h2><p><strong>rsync</strong>，remote synchronize顾名思意就知道它是一款实现远程同步功能的软件，它在同步文件的同时，可以保持原来文件的权限、时间、软硬链接等附加信息。 rsync是用 “rsync 算法”提供了一个客户机和远程文件服务器的文件同步的快速方法，而且可以通过ssh方式来传输文件，这样其保密性也非常好，另外它还是免费的软件。</p><h2 id="二、rsync的安装"><a href="#二、rsync的安装" class="headerlink" title="二、rsync的安装"></a>二、rsync的安装</h2><p>rysnc的官方网站：<a href="http://rsync.samba.org" target="_blank" rel="noopener">http://rsync.samba.org</a><br>可以从上面得到最新的版本。目前最新版是3.1.2。当然，因为rsync是一款如此有用的软件，所以很多Linux的发行版本都将它收录在内了。</p><a id="more"></a><p>　　软件包安装</p><table><thead><tr><th>命令</th><th>平台</th></tr></thead><tbody><tr><td># sudo apt-get  install  rsync</td><td>注：在debian、ubuntu 等在线安装方法；</td></tr><tr><td># yum install rsync</td><td>注：Fedora、Redhat 等在线安装方法；</td></tr><tr><td># rpm -ivh rsync</td><td>注：Fedora、Redhat 等rpm包安装方法；</td></tr></tbody></table><p>　　其它Linux发行版，请用相应的软件包管理方法来安装。</p><p>　　源码包安装</p><p>　　tar xvf  rsync-xxx.tar.gz<br>　　cd rsync-xxx<br>　　./configure –prefix=/usr  ;make ;make install   注：在用源码包编译安装之前，您得安装gcc等编译开具才行；</p><h2 id="三、rsync的配置"><a href="#三、rsync的配置" class="headerlink" title="三、rsync的配置"></a>三、rsync的配置</h2><p>rsync的主要有以下三个配置文件<strong>rsyncd.conf</strong>(主配置文件)、<strong>rsyncd.secrets</strong>(密码文件)、<strong>rsyncd.motd</strong>(rysnc服务器信息)<br>比如我们要备份服务器上的/home和/opt，在/home中我想把easylife和samba目录排除在外；<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">　　# Distributed under the terms of the GNU General Public License v2</span><br><span class="line">　　# Minimal configuration file for rsync daemon</span><br><span class="line">　　# See rsync(1) and rsyncd.conf(5) man pages for help</span><br><span class="line"></span><br><span class="line">　　# This line is required by the /etc/init.d/rsyncd script</span><br><span class="line">　　pid file = /var/run/rsyncd.pid   </span><br><span class="line">　　port = 873</span><br><span class="line">　　address = 192.168.1.171  </span><br><span class="line">　　#uid = nobody </span><br><span class="line">　　#gid = nobody    </span><br><span class="line">　　uid = root   </span><br><span class="line">　　gid = root  </span><br><span class="line"></span><br><span class="line">　　use chroot = yes  </span><br><span class="line">　　read only = yes </span><br><span class="line"></span><br><span class="line">　　#limit access to private LANs</span><br><span class="line">　　hosts allow=192.168.1.0/255.255.255.0 10.0.1.0/255.255.255.0  </span><br><span class="line">　　hosts deny=*</span><br><span class="line"></span><br><span class="line">　　max connections = 5 </span><br><span class="line">　　motd file = /etc/rsyncd.motd</span><br><span class="line"></span><br><span class="line">　　#This will give you a separate log file</span><br><span class="line">　　#log file = /var/log/rsync.log</span><br><span class="line"></span><br><span class="line">　　#This will log every file transferred - up to 85,000+ per user, per sync</span><br><span class="line">　　#transfer logging = yes</span><br><span class="line"></span><br><span class="line">　　log format = %t %a %m %f %b</span><br><span class="line">　　syslog facility = local3</span><br><span class="line">　　timeout = 300</span><br><span class="line"></span><br><span class="line">　　[rhel4home]   </span><br><span class="line">　　path = /home    </span><br><span class="line">　　list=yes </span><br><span class="line">　　ignore errors </span><br><span class="line">　　auth users = root</span><br><span class="line">　　secrets file = /etc/rsyncd.secrets  </span><br><span class="line">　　comment = This is RHEL 4 data  </span><br><span class="line">　　exclude = easylife/  samba/     </span><br><span class="line"></span><br><span class="line">　　[rhel4opt]</span><br><span class="line">　　path = /opt </span><br><span class="line">　　list=no</span><br><span class="line">　　ignore errors</span><br><span class="line">　　comment = This is RHEL 4 opt </span><br><span class="line">　　auth users = easylife</span><br><span class="line">　　secrets file = /etc/rsyncd/rsyncd.secrets</span><br></pre></td></tr></table></figure></p><p>　　注：关于auth users是必须在服务器上存在的真实的系统用户，如果你想用多个用户以,号隔开，比如auth users = easylife,root<br>　　设定密码文件</p><p>　　密码文件格式很简单，rsyncd.secrets的内容格式为：</p><p>　　用户名:密码</p><p>　　我们在例子中rsyncd.secrets的内容如下类似的；在文档中说，有些系统不支持长密码，自己尝试着设置一下吧。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">　　easylife:keer</span><br><span class="line">　　root:mike</span><br></pre></td></tr></table></figure></p><p>　　chown root.root rsyncd.secrets 　#修改属主<br>　　chmod 600 rsyncd.secrets     #修改权限</p><p>　　注：1、将rsyncd.secrets这个密码文件的文件属性设为root拥有, 且权限要设为600, 否则无法备份成功!            出于安全目的，文件的属性必需是只有属主可读。<br>　　　　2、这里的密码值得注意，为了安全你不能把系统用户的密码写在这里。比如你的系统用户easylife密码是000000，为了安全你可以让rsync中的easylife为keer。这和samba的用户认证的密码原理是差不多的。</p><p>　　设定rsyncd.motd 文件;</p><p>　 　它是定义rysnc服务器信息的，也就是用户登录信息。比如让用户知道这个服务器是谁提供的等；类似ftp服务器登录时，我们所看到的 linuxsir.org ftp ……。 当然这在全局定义变量时，并不是必须的，你可以用#号注掉，或删除；我在这里写了一个 rsyncd.motd的内容为：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">　　++++++++++++++++++++++++++++++++++++++++++++++</span><br><span class="line">　　Welcome to use the mike.org.cn rsync services!</span><br><span class="line">2002------2009</span><br><span class="line">　　++++++++++++++++++++++++++++++++++++++++++++++</span><br></pre></td></tr></table></figure></p><h2 id="四、启动rsync服务器"><a href="#四、启动rsync服务器" class="headerlink" title="四、启动rsync服务器"></a>四、启动rsync服务器</h2><p>   相当简单，有以下几种方法</p><p>　　A、–daemon参数方式，是让rsync以服务器模式运行</p><p>　　#/usr/bin/rsync –daemon  –config=/etc/rsyncd/rsyncd.conf 　#–config用于指定rsyncd.conf的位置,如果在/etc下可以不写</p><p>　　B、xinetd方式</p><p>　　修改services加入如下内容<br>　　# nano -w /etc/services</p><p>　　rsync　　873/tcp　　# rsync<br>　　rsync　　873/udp　　# rsync</p><p>　　这一步一般可以不做，通常都有这两行(我的RHEL4和GENTOO默认都有)。修改的目的是让系统知道873端口对应的服务名为rsync。如没有的话就自行加入。</p><p>　　设定 /etc/xinetd.d/rsync, 简单例子如下:</p><p>　　# default: off<br>　　# description: The rsync server is a good addition to am ftp server, as it \<br>　　#       allows crc checksumming etc.<br>　　service rsync<br>　　{<br>        disable = no<br>        socket_type     = stream<br>        wait            = no<br>        user            = root<br>        server          = /usr/bin/rsync<br>        server_args     = –daemon<br>        log_on_failure  += USERID<br>　　}</p><p>　　上述, 主要是要打开rsync這個daemon, 一旦有rsync client要连接時, xinetd会把它转介給 rsyncd(port 873)。然后service xinetd restart, 使上述设定生效.</p><p>　　rsync服务器和防火墙</p><p>　　Linux 防火墙是用iptables，所以我们至少在服务器端要让你所定义的rsync 服务器端口通过，客户端上也应该让通过。</p><p>　　#iptables -A INPUT -p tcp -m state –state NEW  -m tcp –dport 873 -j ACCEPT<br>　　#iptables -L  查看一下防火墙是不是打开了 873端口</p><p>　　如果你不太懂防火墙的配置，可以先service iptables stop 将防火墙关掉。当然在生产环境这是很危险的，做实验才可以这么做哟！</p><h2 id="五、通过rsync客户端来同步数据"><a href="#五、通过rsync客户端来同步数据" class="headerlink" title="五、通过rsync客户端来同步数据"></a>五、通过rsync客户端来同步数据</h2><h3 id="B1、列出rsync-服务器上的所提供的同步内容；"><a href="#B1、列出rsync-服务器上的所提供的同步内容；" class="headerlink" title="B1、列出rsync 服务器上的所提供的同步内容；"></a>B1、列出rsync 服务器上的所提供的同步内容；</h3><p>　　首先：我们看看rsync服务器上提供了哪些可用的数据源</p><p>　　# rsync  –list-only  <a href="mailto:root@192.168.145.5" target="_blank" rel="noopener">root@192.168.145.5</a>::<br>　　++++++++++++++++++++++++++++++++++++++++++++++<br>　　Welcome to use the mike.org.cn rsync services!<br>    　　       2002——2009<br>　　++++++++++++++++++++++++++++++++++++++++++++++</p><p>　　rhel4home       This is RHEL 4 data</p><p>　 　注：前面是rsync所提供的数据源，也就是我们在rsyncd.conf中所写的[rhel4home]模块。而“This is RHEL 4 data”是由[rhel4home]模块中的 comment = This is RHEL 4 data 提供的；为什么没有把rhel4opt数据源列出来呢？因为我们在[rhel4opt]中已经把list=no了。</p><p>　　$ rsync  –list-only  <a href="mailto:root@192.168.145.5" target="_blank" rel="noopener">root@192.168.145.5</a>::rhel4home </p><p>　　++++++++++++++++++++++++++++++++++++++++++++++<br>　　Welcome to use the mike.org.cn rsync services!<br> 　　          2002——2009<br>　　++++++++++++++++++++++++++++++++++++++++++++++</p><p>　　Password:<br>　　drwxr-xr-x        4096 2009/03/15 21:33:13 .<br>　　-rw-r–r–        1018 2009/03/02 02:33:41 ks.cfg<br>　　-rwxr-xr-x       21288 2009/03/15 21:33:13 wgetpaste<br>　　drwxrwxr-x        4096 2008/10/28 21:04:05 cvsroot<br>　　drwx——        4096 2008/11/30 16:30:58 easylife<br>　　drwsr-sr-x        4096 2008/09/20 22:18:05 giddir<br>　　drwx——        4096 2008/09/29 14:18:46 quser1<br>　　drwx——        4096 2008/09/27 14:38:12 quser2<br>　　drwx——        4096 2008/11/14 06:10:19 test<br>　　drwx——        4096 2008/09/22 16:50:37 vbird1<br>　　drwx——        4096 2008/09/19 15:28:45 vbird2</p><p>　　后面的root@ip中，root是指定密码文件中的用户名，之后的::rhel4home这是rhel4home模块名</p><h3 id="B2、rsync客户端同步数据；"><a href="#B2、rsync客户端同步数据；" class="headerlink" title="B2、rsync客户端同步数据；"></a>B2、rsync客户端同步数据；</h3><p>　　#rsync -avzP <a href="mailto:root@192.168.145.5" target="_blank" rel="noopener">root@192.168.145.5</a>::rhel4home rhel4home<br>　　Password: 这里要输入root的密码，是服务器端rsyncd.secrets提供的。在前面的例子中我们用的是mike，输入的密码并不回显，输好就回车。</p><p>　 　注： 这个命令的意思就是说，用root用户登录到服务器上，把rhel4home数据，同步到本地当前目录rhel4home上。当然本地的目录是可以你自己 定义的。如果当你在客户端上当前操作的目录下没有rhel4home这个目录时，系统会自动为你创建一个；当存在rhel4home这个目录中，你要注意 它的写权限。</p><p>　　#rsync -avzP  –delete <a href="mailto:linuxsir@linuxsir.org" target="_blank" rel="noopener">linuxsir@linuxsir.org</a>::rhel4home   rhel4home</p><p>　 　这回我们引入一个–delete 选项，表示客户端上的数据要与服务器端完全一致，如果 linuxsirhome目录中有服务器上不存在的文件，则删除。最终目的是让linuxsirhome目录上的数据完全与服务器上保持一致；用的时候要 小心点，最好不要把已经有重要数所据的目录，当做本地更新目录，否则会把你的数据全部删除；</p><p>　　設定 rsync client</p><p>　　设定密码文件</p><p>　　#rsync -avzP  –delete  –password-file=rsyncd.secrets   <a href="mailto:root@192.168.145.5" target="_blank" rel="noopener">root@192.168.145.5</a>::rhel4home rhel4home</p><p>　　这次我们加了一个选项 –password-file=rsyncd.secrets，这是当我们以root用户登录rsync服务器同步数据时，密码将读取rsyncd.secrets这个文件。这个文件内容只是root用户的密码。我们要如下做；</p><p>　　# touch rsyncd.secrets<br>　　# chmod 600 rsyncd.secrets<br>　　# echo “mike”&gt; rsyncd.secrets</p><p>　　# rsync -avzP  –delete  –password-file=rsyncd.secrets   <a href="mailto:root@192.168.145.5" target="_blank" rel="noopener">root@192.168.145.5</a>::rhel4home rhel4home</p><p>　　注：这里需要注意的是这份密码文件权限属性要设得只有属主可读。</p><p>　　　　这样就不需要密码了；其实这是比较重要的，因为服务器通过crond 计划任务还是有必要的；</p><h3 id="B3、让rsync客户端自动与服务器同步数据"><a href="#B3、让rsync客户端自动与服务器同步数据" class="headerlink" title="B3、让rsync客户端自动与服务器同步数据"></a>B3、让rsync客户端自动与服务器同步数据</h3><p>　 　服务器是重量级应用，所以数据的网络备份还是极为重要的。我们可以在生产型服务器上配置好rsync 服务器。我们可以把一台装有rysnc机器当做是备份服务器。让这台备份服务器，每天在早上4点开始同步服务器上的数据；并且每个备份都是完整备份。有时 硬盘坏掉，或者服务器数据被删除，完整备份还是相当重要的。这种备份相当于每天为服务器的数据做一个镜像，当生产型服务器发生事故时，我们可以轻松恢复数 据，能把数据损失降到最低；是不是这么回事？？</p><p>　　step1：创建同步脚本和密码文件<br>　　<br>　　#mkdir   /etc/cron.daily.rsync<br>　　#cd  /etc/cron.daily.rsync<br>　　#touch rhel4home.sh  rhel4opt.sh<br>　　#chmod 755 /etc/cron.daily.rsync/<em>.sh<br>　　#mkdir /etc/rsyncd/<br>　　#touch /etc/rsyncd/rsyncrhel4root.secrets<br>　　#touch /etc/rsyncd/rsyncrhel4easylife.secrets<br>　　#chmod 600  /etc/rsyncd/rsync.</em></p><p>　 　注： 我们在 /etc/cron.daily/中创建了两个文件rhel4home.sh和rhel4opt.sh ，并且是权限是755的。创建了两个密码文件root用户用的是rsyncrhel4root.secrets ，easylife用户用的是 rsyncrhel4easylife.secrets，权限是600；</p><p>　　我们编辑rhel4home.sh，内容是如下的：</p><p>　　#!/bin/sh<br>　　#backup 192.168.145.5:/home<br>　　/usr/bin/rsync   -avzP  –password-file=/etc/rsyncd/rsyncrhel4root.secrets    <a href="mailto:root@192.168.145.5" target="_blank" rel="noopener">root@192.168.145.5</a>::rhel4home   /home/rhel4homebak/$(date +’%m-%d-%y’)</p><p>　　我们编辑 rhel4opt.sh ，内容是：</p><p>　　#!/bin/sh<br>　　#backup 192.168.145.5:/opt<br>　　/usr/bin/rsync   -avzP  –password-file=/etc/rsyncd/rsyncrhel4easylife.secrets    <a href="mailto:easylife@192.168.145.5" target="_blank" rel="noopener">easylife@192.168.145.5</a>::rhel4opt   /home/rhel4hoptbak/$(date +’%m-%d-%y’)</p><p>　　注：你可以把rhel4home.sh和rhel4opt.sh的内容合并到一个文件中，比如都写到rhel4bak.sh中；</p><p>　　接着我们修改 /etc/rsyncd/rsyncrhel4root.secrets和rsyncrhel4easylife.secrets的内容；</p><p>　　# echo “mike” &gt; /etc/rsyncd/rsyncrhel4root.secrets<br>　　# echo “keer”&gt; /etc/rsyncd/rsyncrhel4easylife.secrets</p><p>　 　然后我们再/home目录下创建rhel4homebak 和rhel4optbak两个目录，意思是服务器端的rhel4home数据同步到备份服务器上的/home/rhel4homebak 下，rhel4opt数据同步到 /home/rhel4optbak/目录下。并按年月日归档创建目录；每天备份都存档；</p><p>　　#mkdir /home/rhel4homebak<br>　　#mkdir /home/rhel4optbak</p><p>　　step2：修改crond服务器的配置文件 加入到计划任务</p><p>　　#crontab  -e</p><p>　　加入下面的内容：</p><p>　　# Run daily cron jobs at 4:10 every day  backup rhel4 data:<br>　　10 4 <em> </em> * /usr/bin/run-parts   /etc/cron.daily.rsync   1&gt; /dev/null</p><p>　　注：第一行是注释，是说明内容，这样能自己记住。<br>　　　　第二行表示在每天早上4点10分的时候，运行 /etc/cron.daily.rsync 下的可执行脚本任务；<br>　　　　<br>　　配置好后，要重启crond 服务器；</p><p>　　# killall crond    注：杀死crond 服务器的进程；<br>　　# ps aux |grep crond  注：查看一下是否被杀死；<br>　　# /usr/sbin/crond    注：启动 crond 服务器；<br>　　# ps aux  |grep crond  注：查看一下是否启动了？<br>　　root      3815  0.0  0.0   1860   664 ?        S    14:44   0:00 /usr/sbin/crond<br>　　root      3819  0.0  0.0   2188   808 pts/1    S+   14:45   0:00 grep crond</p>]]></content>
    
    <summary type="html">
    
      rsync的使用与配置
    
    </summary>
    
    
      <category term="Linux" scheme="https://us-forever.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>最近电脑重装了，导致电脑里边的博客全没了</title>
    <link href="https://us-forever.com/2018/01/08/%E6%9C%80%E8%BF%91%E7%94%B5%E8%84%91%E9%87%8D%E8%A3%85%E4%BA%86%EF%BC%8C%E5%AF%BC%E8%87%B4%E7%94%B5%E8%84%91%E9%87%8C%E8%BE%B9%E7%9A%84%E5%8D%9A%E5%AE%A2%E5%85%A8%E6%B2%A1%E4%BA%86/"/>
    <id>https://us-forever.com/2018/01/08/最近电脑重装了，导致电脑里边的博客全没了/</id>
    <published>2018-01-08T09:59:56.000Z</published>
    <updated>2018-01-08T10:03:59.694Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>难受的事情发生了，上周的时候电脑出现无法进入系统的毛病，一直重启，一直想重做电脑的我，也正好趁着这次机会重做了系统，但是悲剧发生了。<br>首先我没有还原系统，直接进行的系统重置，导致我的很多开发环境都没了。<br><a id="more"></a></p></blockquote><blockquote><p>其次，我的博客没有备份….<br>所以今天有点时间，把博客的环境安装上了，但是md的文件没有了，原来的html网页还在，我在考虑怎么恢复。</p></blockquote><h2 id="超级难受"><a href="#超级难受" class="headerlink" title="超级难受"></a>超级难受</h2>]]></content>
    
    <summary type="html">
    
      最近电脑重装了，导致电脑里边的博客全没了
    
    </summary>
    
    
      <category term="随笔" scheme="https://us-forever.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>JIRA安装</title>
    <link href="https://us-forever.com/2017/12/15/jira%E5%AE%89%E8%A3%85/"/>
    <id>https://us-forever.com/2017/12/15/jira安装/</id>
    <published>2017-12-15T08:20:04.000Z</published>
    <updated>2018-02-27T04:12:40.278Z</updated>
    
    <content type="html"><![CDATA[<h2 id="一、安装环境"><a href="#一、安装环境" class="headerlink" title="一、安装环境"></a>一、安装环境</h2><p>1、数据库:MySQL(这里使用的是MySQL)</p><p>2、操作系统：Centos或者是RHEL</p><p>3、网络环境：无法连接到公网/有网络环境</p><p>4、准备文件：</p><p>atlassian-jira-software-7.7.0-x64.bin<br>mysql-connector-java-5.1.45-bin.jar<br>nginx-1.12.2.tar.gz(反向代理)</p><h2 id="二、安装步骤"><a href="#二、安装步骤" class="headerlink" title="二、安装步骤"></a>二、安装步骤</h2><p>1、切换到管理员用户执行以下命令<br>chmod a+x atlassian-jira-software-7.7.0-x64.bin<br>sudo ./atlassian-jira-software-7.7.0-x64.bin<br><img src="/img/jira1.png" alt><br>2、按照提示安装<br><img src="/img/jira2.png" alt><br><img src="/img/jira3.png" alt><br>这里先不启动JIRA，复制mysql connector到到安装目录/lib/下<br>cp ./mysql-connector-java-5.1.44-bin.jar /home/atlassian/jira/lib<br>chmod a+r /home/atlassian/jira/lib/mysql-connector-java-5.1.45-bin.jar</p><h2 id="三、为JIRA创建数据库"><a href="#三、为JIRA创建数据库" class="headerlink" title="三、为JIRA创建数据库"></a>三、为JIRA创建数据库</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CREATE DATABASE jira CHARACTER SET utf8 COLLATE utf8_bin;</span><br><span class="line">CREATE USER &apos;jirauser&apos;@&apos;192.1.105.21&apos; IDENTIFIED BY &apos;Dev1234!@#$&apos;; </span><br><span class="line">GRANT SELECT,INSERT,UPDATE,DELETE,CREATE,DROP,ALTER,INDEX on jira.* TO &apos;jirauser&apos;@&apos;192.1.105.21&apos; IDENTIFIED BY &apos;Dev1234!@#$&apos;;</span><br><span class="line">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure><p><img src="/img/jira4.png" alt></p><h2 id="四、启动JIRA，并设置相关信息"><a href="#四、启动JIRA，并设置相关信息" class="headerlink" title="四、启动JIRA，并设置相关信息"></a>四、启动JIRA，并设置相关信息</h2><p>使用服务启动JIRA<br>    service jira start<br>根据以下提示设置JIRA<br><img src="/img/jira5.png" alt><br>填写刚刚创建好的数据库信息,点击<strong>Test Connection</strong>通过后点击<strong>Next</strong><br><img src="/img/jira6.png" alt><br>这里不用动，直接点击<strong>Next</strong><br><img src="/img/jira7.png" alt><br>将事先准备好的license填写进去点击<strong>Next</strong><br><img src="/img/jira8.png" alt><br>设置JIRAADMIN<br><img src="/img/jira9.png" alt></p>]]></content>
    
    <summary type="html">
    
      jira安装
    
    </summary>
    
    
      <category term="ATLASSIAN" scheme="https://us-forever.com/tags/ATLASSIAN/"/>
    
  </entry>
  
  <entry>
    <title>Nginx代理Atlassian产品(2):Use Domain:*.mydomain.com</title>
    <link href="https://us-forever.com/2017/12/13/Nginx%E4%BB%A3%E7%90%86Atlassian%E4%BA%A7%E5%93%81-2-Use-Domain-mydomain-com/"/>
    <id>https://us-forever.com/2017/12/13/Nginx代理Atlassian产品-2-Use-Domain-mydomain-com/</id>
    <published>2017-12-13T08:15:05.000Z</published>
    <updated>2018-01-22T04:52:17.627Z</updated>
    
    <summary type="html">
    
      Nginx代理Atlassian产品(2):Use Domain:*.mydomain.com
    
    </summary>
    
    
      <category term="ATLASSIAN" scheme="https://us-forever.com/tags/ATLASSIAN/"/>
    
  </entry>
  
  <entry>
    <title>Nginx代理Atlassian产品(1):Use Domain:www.mydomain.com/*</title>
    <link href="https://us-forever.com/2017/12/13/Nginx%E4%BB%A3%E7%90%86Atlassian%E4%BA%A7%E5%93%81-1-Use-Domain-www-mydomain-com/"/>
    <id>https://us-forever.com/2017/12/13/Nginx代理Atlassian产品-1-Use-Domain-www-mydomain-com/</id>
    <published>2017-12-13T07:07:32.000Z</published>
    <updated>2018-01-22T04:52:11.232Z</updated>
    
    <content type="html"><![CDATA[<h1 id="一、配置JIRA"><a href="#一、配置JIRA" class="headerlink" title="一、配置JIRA"></a>一、配置JIRA</h1><h3 id="1-配置-conf-server-xml"><a href="#1-配置-conf-server-xml" class="headerlink" title="1.配置/conf/server.xml"></a>1.配置/conf/server.xml</h3><p>修改前</p><pre><code>&lt;Context docBase=&quot;${catalina.home}/atlassian-jira&quot; path=&quot;&quot; reloadable=&quot;false&quot; useHttpOnly=&quot;true&quot;&gt;</code></pre><p>修改后</p><pre><code>&lt;Context docBase=&quot;${catalina.home}/atlassian-jira&quot; path=&quot;/jira&quot; reloadable=&quot;false&quot; useHttpOnly=&quot;true&quot;&gt;</code></pre><p>添加proxyName和proxyPort</p><pre><code>&lt;!-- Nginx Proxy Connector --&gt;&lt;Connector port=&quot;8080&quot; maxThreads=&quot;150&quot; minSpareThreads=&quot;25&quot; connectionTimeout=&quot;20000&quot; enableLookups=&quot;false&quot; maxHttpHeaderSize=&quot;8192&quot; protocol=&quot;HTTP/1.1&quot; useBodyEncodingForURI=&quot;false&quot; redirectPort=&quot;8443&quot; acceptCount=&quot;100&quot; disableUploadTimeout=&quot;true&quot;proxyName=&quot;www.atlassian.com&quot; proxyPort=&quot;80&quot;/&gt; &lt;!-- OPTIONAL,Nginx Proxy Connector with https --&gt;&lt;Connector port=&quot;8081&quot; maxThreads=&quot;150&quot; minSpareThreads=&quot;25&quot; connectionTimeout=&quot;20000&quot; enableLookups=&quot;false&quot; maxHttpHeaderSize=&quot;8192&quot; protocol=&quot;HTTP/1.1&quot; useBodyEncodingForURI=&quot;false&quot; redirectPort=&quot;8443&quot; acceptCount=&quot;100&quot; disableUploadTimeout=&quot;true&quot;proxyName=&quot;www.atlassian.com&quot; proxyPort=&quot;443&quot; scheme=&quot;https&quot; secure=&quot;true&quot;/&gt; &lt;!-- Standard HTTP Connector --&gt;&lt;Connector port=&quot;8082&quot; maxThreads=&quot;150&quot; minSpareThreads=&quot;25&quot; connectionTimeout=&quot;20000&quot; enableLookups=&quot;false&quot; maxHttpHeaderSize=&quot;8192&quot; protocol=&quot;HTTP/1.1&quot; useBodyEncodingForURI=&quot;false&quot; redirectPort=&quot;8443&quot; acceptCount=&quot;100&quot; disableUploadTimeout=&quot;true&quot;/&gt;</code></pre><h3 id="2-配置-conf-nginx-conf"><a href="#2-配置-conf-nginx-conf" class="headerlink" title="2.配置/conf/nginx.conf"></a>2.配置/conf/nginx.conf</h3><pre><code>server {    listen 80;    server_name www.atlassian.com;    location /jira {        proxy_set_header X-Forwarded-Host $host;        proxy_set_header X-Forwarded-Server $host;        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;         proxy_pass http://jira-hostname:8080/jira;        client_max_body_size 100M;    }}</code></pre><h1 id="二、配置bitbucket"><a href="#二、配置bitbucket" class="headerlink" title="二、配置bitbucket"></a>二、配置bitbucket</h1><h3 id="1-配置-shared-bitbucket-properties"><a href="#1-配置-shared-bitbucket-properties" class="headerlink" title="1.配置/shared/bitbucket.properties"></a>1.配置/shared/bitbucket.properties</h3><pre><code>server.port=7990server.secure=trueserver.scheme=httpserver.proxy-port=80server.proxy-name=mydomain.comserver.context-path=/bitbucket</code></pre><h3 id="2-配置-conf-nginx-conf-1"><a href="#2-配置-conf-nginx-conf-1" class="headerlink" title="2.配置/conf/nginx.conf"></a>2.配置/conf/nginx.conf</h3><pre><code>server {    listen          80;    server_name     mydomain.com;    location /bitbucket {        proxy_pass             http://localhost:7990;        proxy_set_header     X-Forwarded-Host $host;        proxy_set_header     X-Forwarded-Server $host;        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;        proxy_set_header    X-Real-IP $remote_addr;        proxy_redirect         off;    }}</code></pre><h1 id="三、配置confluence"><a href="#三、配置confluence" class="headerlink" title="三、配置confluence"></a>三、配置confluence</h1><h3 id="1-配置-conf-server-xml-1"><a href="#1-配置-conf-server-xml-1" class="headerlink" title="1.配置/conf/server.xml"></a>1.配置/conf/server.xml</h3><p>修改前</p><pre><code>&lt;Context path=&quot;&quot; docBase=&quot;../confluence&quot; debug=&quot;0&quot; reloadable=&quot;false&quot;&gt;</code></pre><p>修改后</p><pre><code>&lt;Context path=&quot;/confluence&quot; docBase=&quot;../confluence&quot; debug=&quot;0&quot; reloadable=&quot;false&quot;&gt;</code></pre><p>添加proxyName和proxyPort</p><pre><code>&lt;Connector port=&quot;8090&quot; connectionTimeout=&quot;20000&quot; redirectPort=&quot;8443&quot;maxThreads=&quot;48&quot; minSpareThreads=&quot;10&quot;enableLookups=&quot;false&quot; acceptCount=&quot;10&quot; debug=&quot;0&quot; URIEncoding=&quot;UTF-8&quot;            protocol=&quot;org.apache.coyote.http11.Http11NioProtocol&quot; proxyName=&quot;www.mydomain.com&quot; proxyPort=&quot;80&quot; scheme=&quot;http&quot;/&gt;</code></pre><h3 id="2-配置-conf-nginx-conf-2"><a href="#2-配置-conf-nginx-conf-2" class="headerlink" title="2.配置/conf/nginx.conf"></a>2.配置/conf/nginx.conf</h3><pre><code>server {    listen 80;    server_name www.mydomain.com;    location /confluence {        client_max_body_size 100m;        proxy_set_header X-Forwarded-Host $host;        proxy_set_header X-Forwarded-Server $host;        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;        proxy_pass http://localhost:8090/confluence;    }    location /synchrony {        proxy_set_header X-Forwarded-Host $host;        proxy_set_header X-Forwarded-Server $host;        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;        proxy_pass http://localhost:8091/synchrony;        proxy_http_version 1.1;        proxy_set_header Upgrade $http_upgrade;        proxy_set_header Connection &quot;Upgrade&quot;;    }}</code></pre><h1 id="四、配置bamboo"><a href="#四、配置bamboo" class="headerlink" title="四、配置bamboo"></a>四、配置bamboo</h1><h3 id="1-配置-conf-server-xml-2"><a href="#1-配置-conf-server-xml-2" class="headerlink" title="1.配置/conf/server.xml"></a>1.配置/conf/server.xml</h3><p>修改path</p><pre><code>&lt;Context path=&quot;/bamboo&quot; docBase=&quot;${catalina.home}/atlassian-bamboo&quot; reloadable=&quot;false&quot; useHttpOnly=&quot;true&quot;&gt;....&lt;/Context&gt;</code></pre><p>添加scheme、proxyName和proxyPort</p><pre><code>&lt;Connector port=&quot;8085&quot;  protocol=&quot;HTTP/1.1&quot; connectionTimeout=&quot;20000&quot; useBodyEncodingForURI=&quot;false&quot; .... .... scheme=&quot;http&quot; proxyName=&quot;www.mydomain.com&quot;  proxyPort=&quot;80&quot; /&gt;</code></pre><h3 id="2-配置-conf-nginx-conf-3"><a href="#2-配置-conf-nginx-conf-3" class="headerlink" title="2.配置/conf/nginx.conf"></a>2.配置/conf/nginx.conf</h3><pre><code>server {    listen          80;    server_name     www.mydomain.com;    location /bamboo {        proxy_pass             http://localhost:8085/bamboo;        proxy_set_header     X-Forwarded-Host $host;        proxy_set_header     X-Forwarded-Server $host;        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;        proxy_set_header    X-Real-IP $remote_addr;        proxy_redirect         off;    }}</code></pre><h1 id="五、配置fisheye"><a href="#五、配置fisheye" class="headerlink" title="五、配置fisheye"></a>五、配置fisheye</h1><h3 id="1-配置-config-xml"><a href="#1-配置-config-xml" class="headerlink" title="1.配置/config.xml"></a>1.配置/config.xml</h3><p>修改前</p><pre><code>&lt;web-server&gt;    &lt;http bind=&quot;:8060&quot;/&gt;&lt;/web-server&gt;</code></pre><p>修改后</p><pre><code>&lt;web-server site-url=&quot;http://www.mydomain.com&quot; context=&quot;/fisheye&quot;&gt;     &lt;http bind=&quot;:8060&quot; proxy-host=&quot;www.mydomain.com&quot; proxy-port=&quot;80&quot; proxy-scheme=&quot;http&quot;/&gt;&lt;/web-server&gt;</code></pre><h3 id="2-配置-conf-nginx-conf-4"><a href="#2-配置-conf-nginx-conf-4" class="headerlink" title="2.配置/conf/nginx.conf"></a>2.配置/conf/nginx.conf</h3><pre><code>server {    listen 80;    server_name www.atlassian.com;    location /fisheye{        proxy_pass          http://localhost:8060/fisheye;        proxy_set_header    Host            $host;        proxy_set_header    X-Real-IP       $remote_addr;        proxy_set_header    X-Forwarded-for $remote_addr;        port_in_redirect off;        proxy_connect_timeout 300;    }}</code></pre><h1 id="六、配置jiraServiceDesk"><a href="#六、配置jiraServiceDesk" class="headerlink" title="六、配置jiraServiceDesk"></a>六、配置jiraServiceDesk</h1><pre><code>请参考 一、配置JIRA</code></pre>]]></content>
    
    <summary type="html">
    
      Nginx代理Atlassian产品(1):Use Domain:www.mydomain.com/*
    
    </summary>
    
    
      <category term="ATLASSIAN" scheme="https://us-forever.com/tags/ATLASSIAN/"/>
    
  </entry>
  
  <entry>
    <title>Atlassian产品使用单点登陆-SSO</title>
    <link href="https://us-forever.com/2017/12/13/Atlassian%E4%BA%A7%E5%93%81%E4%BD%BF%E7%94%A8%E5%8D%95%E7%82%B9%E7%99%BB%E9%99%86-SSO/"/>
    <id>https://us-forever.com/2017/12/13/Atlassian产品使用单点登陆-SSO/</id>
    <published>2017-12-13T06:42:37.000Z</published>
    <updated>2018-01-22T04:51:52.832Z</updated>
    
    <content type="html"><![CDATA[<h1 id="一、配置JIRA"><a href="#一、配置JIRA" class="headerlink" title="一、配置JIRA"></a>一、配置JIRA</h1><h3 id="1-修改-atlassian-jira-WEB-INF-classes-seraph-config-xml"><a href="#1-修改-atlassian-jira-WEB-INF-classes-seraph-config-xml" class="headerlink" title="1.修改/atlassian-jira/WEB-INF/classes/seraph-config.xml"></a>1.修改/atlassian-jira/WEB-INF/classes/seraph-config.xml</h3><pre><code>&lt;!--注释以下节点--&gt;&lt;!--&lt;authenticator class=&quot;com.atlassian.jira.security.login.JiraSeraphAuthenticator&quot;/&gt;--&gt;&lt;!--取消注释以下节点--&gt;&lt;authenticator class=&quot;com.atlassian.jira.security.login.SSOSeraphAuthenticator&quot;/&gt;</code></pre><h3 id="2-复制-client-conf-crowd-properties到-lt-JIRA-INSTALLATION-atlassian-jira-WEB-INF-classes下"><a href="#2-复制-client-conf-crowd-properties到-lt-JIRA-INSTALLATION-atlassian-jira-WEB-INF-classes下" class="headerlink" title="2.复制/client/conf/crowd.properties到&lt;JIRA-INSTALLATION/atlassian-jira/WEB-INF/classes下."></a>2.复制/client/conf/crowd.properties到&lt;JIRA-INSTALLATION/atlassian-jira/WEB-INF/classes下.</h3><p>编辑/atlassian-jira/WEB-INF/classes/crowd.properties</p><table><thead><tr><th>Key</th><th>Value</th></tr></thead><tbody><tr><td>application.name</td><td>jira The application name must match the name that you specified when you defined the application in Crowd (see Step 1 above).</td></tr><tr><td>application.password</td><td>The password must match the one that you specified when you defined the application in Crowd (see Step 1 above).</td><td></td></tr><tr><td>crowd.base.url</td><td>eg. (<a href="http://localhost:8095/crowd/)If" target="_blank" rel="noopener">http://localhost:8095/crowd/)If</a> your Crowd server’s port is configured differently from the default (i.e. 8095), set it accordingly.crowd.base.url must be the same URL used to access Crowd in your Browser.</td></tr><tr><td>session.validationinterval</td><td>Set to 0, if you want authentication checks to occur on each request. Otherwise set to the number of minutes between request to validate if the user is logged in or out of the Crowd SSO server. Setting this value to 1 or higher will increase the performance of Crowd’s integration.</td></tr><tr><td></td><td><strong>以上信息几乎在文件里边都有，只需修改对应的取值即可</strong></td></tr></tbody></table><h1 id="二、配置bitbucket"><a href="#二、配置bitbucket" class="headerlink" title="二、配置bitbucket"></a>二、配置bitbucket</h1><p>添加/shared/bitbucket.properties</p><pre><code>plugin.auth-crowd.sso.enabled=true</code></pre><p>一些可选的参数：</p><table><thead><tr><th>key</th><th>value</th><th>description</th></tr></thead><tbody><tr><td>plugin.auth-crowd.sso.enabled</td><td>false</td><td>Whether SSO support should be enabled or not. Regardless of this setting SSO authentication will only be activated when the system is connected to a Crowd directory that is configured for SSO.</td></tr><tr><td>plugin.auth-crowd.sso.config.ttl</td><td>15</td><td>The auth plugin caches the SSO configuration that is retrieved from the remote Crowd server. This setting controls the time to live of that cache.This value is in minutes.</td></tr><tr><td>plugin.auth-crowd.sso.config.error.wait</td><td>1</td><td>If an error occurs while retrieving the SSO configuration from the remote Crowd server, the system will wait this long before retrying. The wait time between subsequent attempts is incremented exponentially (1s -&gt; 1.5s -&gt; 2.3s -&gt; 3.4s, etc). The wait time is capped at the configured TTL.This value is in seconds.</td></tr><tr><td>plugin.auth-crowd.sso.http.max.connections</td><td>20</td><td>The maximum number of HTTP connections in the connection pool for communication with the Crowd server.</td></tr><tr><td>plugin.auth-crowd.sso.http.proxy.host</td><td></td><td>The name of the proxy server used to transport SOAP traffic to the Crowd server.</td></tr><tr><td>plugin.auth-crowd.sso.http.proxy.port</td><td></td><td>The connection port of the proxy server (must be specified if a proxy host is specified).</td></tr><tr><td>plugin.auth-crowd.sso.http.proxy.username</td><td></td><td>The username used to authenticate with the proxy server (if the proxy server requires authentication).</td></tr><tr><td>plugin.auth-crowd.sso.http.proxy.password</td><td></td><td>The password used to authenticate with the proxy server (if the proxy server requires authentication).</td></tr><tr><td>plugin.auth-crowd.sso.http.timeout</td><td>5000</td><td>The HTTP connection timeout used for communication with the Crowd server. A value of zero indicates that there is no connection timeout.This value is in milliseconds.</td></tr><tr><td>plugin.auth-crowd.sso.socket.timeout</td><td>20000</td><td>The socket timeout. You may wish to override the default value if the latency to the Crowd server is high.This value is in milliseconds.</td></tr><tr><td>plugin.auth-crowd.sso.session.validationinterval</td><td>3</td><td>The number of minutes to cache authentication validation in the session. If this value is set to 0, each HTTP request will be authenticated with the Crowd server.</td></tr><tr><td>plugin.auth-crowd.sso.session.lastvalidation</td><td>atl.crowd.sso.lastvalidation</td><td>The session key to use when storing a Date value of the user’s last authentication.</td></tr><tr><td>plugin.auth-crowd.sso.session.tokenkey</td><td>atl.crowd.sso.tokenkey</td><td>The session key to use when storing a String value of the user’s authentication token.</td></tr></tbody></table><h1 id="三、配置confluence"><a href="#三、配置confluence" class="headerlink" title="三、配置confluence"></a>三、配置confluence</h1><h3 id="1-修改-confluence-WEB-INF-classes-seraph-config-xml"><a href="#1-修改-confluence-WEB-INF-classes-seraph-config-xml" class="headerlink" title="1.修改/confluence/WEB-INF/classes/seraph-config.xml"></a>1.修改/confluence/WEB-INF/classes/seraph-config.xml</h3><pre><code>&lt;!--注释以下节点--&gt;&lt;!-- &lt;authenticator class=&quot;com.atlassian.confluence.user.ConfluenceAuthenticator&quot;/&gt; --&gt;&lt;!--取消注释以下节点--&gt;&lt;authenticator class=&quot;com.atlassian.confluence.user.ConfluenceCrowdSSOAuthenticator&quot;/&gt;</code></pre><h3 id="2-复制-client-conf-crowd-properties到-lt-CONFLUENCE-INSTALLATION-confluence-WEB-INF-classes下"><a href="#2-复制-client-conf-crowd-properties到-lt-CONFLUENCE-INSTALLATION-confluence-WEB-INF-classes下" class="headerlink" title="2.复制/client/conf/crowd.properties到&lt;CONFLUENCE-INSTALLATION/confluence/WEB-INF/classes下."></a>2.复制/client/conf/crowd.properties到&lt;CONFLUENCE-INSTALLATION/confluence/WEB-INF/classes下.</h3><p>编辑/confluence/WEB-INF/classes/crowd.properties</p><table><thead><tr><th>Key</th><th>Value</th></tr></thead><tbody><tr><td>application.name</td><td><strong>confluence</strong> The application name must match the name that you specified when you defined the application in Crowd (see Step 1 above).</td></tr><tr><td>application.password</td><td>The password must match the one that you specified when you defined the application in Crowd (see Step 1 above).</td></tr><tr><td>crowd.base.url</td><td>eg. (<a href="http://localhost:8095/crowd/)If" target="_blank" rel="noopener">http://localhost:8095/crowd/)If</a> your Crowd server’s port is configured differently from the default (i.e. 8095), set it accordingly.crowd.base.url must be the same URL used to access Crowd in your Browser.</td></tr><tr><td>session.validationinterval</td><td>Set to 0, if you want authentication checks to occur on each request. Otherwise set to the number of minutes between request to validate if the user is logged in or out of the Crowd SSO server. Setting this value to 1 or higher will increase the performance of Crowd’s integration.</td></tr><tr><td></td><td><strong>以上信息几乎在文件里边都有，只需修改对应的取值即可</strong></td></tr></tbody></table><h1 id="四、配置bamboo"><a href="#四、配置bamboo" class="headerlink" title="四、配置bamboo"></a>四、配置bamboo</h1><h3 id="1-编辑-webapp-WEB-INF-classes-seraph-config-xml"><a href="#1-编辑-webapp-WEB-INF-classes-seraph-config-xml" class="headerlink" title="1.编辑\webapp\WEB-INF\classes\seraph-config.xml"></a>1.编辑\webapp\WEB-INF\classes\seraph-config.xml</h3><pre><code>&lt;!--注释以下节点--&gt;&lt;!--&lt;authenticator class=&quot;com.atlassian.bamboo.user.authentication.BambooAuthenticator&quot;/&gt;--&gt;&lt;!--取消注释以下节点--&gt;&lt;authenticator class=&quot;com.atlassian.crowd.integration.seraph.v25.BambooAuthenticator&quot;/&gt;</code></pre><h1 id="五、配置fisheye"><a href="#五、配置fisheye" class="headerlink" title="五、配置fisheye"></a>五、配置fisheye</h1><p>修改FISHEYE_INST/config.xml</p><pre><code>&lt;config&gt;...    &lt;security allow-anon=&quot;false&quot; allow-cru-anon=&quot;false&quot;&gt;        &lt;built-in&gt;                &lt;signup enabled=&quot;true&quot;/&gt;        &lt;/built-in&gt;        &lt;crowd sso-enabled=&quot;true&quot;/&gt;        &lt;admins&gt;                &lt;system-admins&gt;                        &lt;group&gt;confluence-users&lt;/group&gt;                &lt;/system-admins&gt;        &lt;/admins&gt;        &lt;avatar&gt;&lt;disabled/&gt;&lt;/avatar&gt;        &lt;emailVisibility/&gt;    &lt;/security&gt;...&lt;/config&gt;//以上内容只需添加&lt;crowd sso-enabled=&quot;true&quot;/&gt;</code></pre><h1 id="六、配置jiraServiceDesk"><a href="#六、配置jiraServiceDesk" class="headerlink" title="六、配置jiraServiceDesk"></a>六、配置jiraServiceDesk</h1><pre><code>请参考 一、配置JIRA</code></pre>]]></content>
    
    <summary type="html">
    
      Atlassian产品使用单点登陆-SSO
    
    </summary>
    
    
      <category term="ATLASSIAN" scheme="https://us-forever.com/tags/ATLASSIAN/"/>
    
  </entry>
  
  <entry>
    <title>Atlassian产品安装环境准备-数据库(1):MySQL</title>
    <link href="https://us-forever.com/2017/12/11/Atlassian%E4%BA%A7%E5%93%81%E5%AE%89%E8%A3%85%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87-%E6%95%B0%E6%8D%AE%E5%BA%93-1-MySQL/"/>
    <id>https://us-forever.com/2017/12/11/Atlassian产品安装环境准备-数据库-1-MySQL/</id>
    <published>2017-12-11T07:40:18.000Z</published>
    <updated>2018-01-30T08:21:02.808Z</updated>
    
    <content type="html"><![CDATA[<h1 id="一、JIRA使用MySQL数据库"><a href="#一、JIRA使用MySQL数据库" class="headerlink" title="一、JIRA使用MySQL数据库"></a>一、JIRA使用MySQL数据库</h1><h3 id="1、-编辑my-cnf"><a href="#1、-编辑my-cnf" class="headerlink" title="1、 编辑my.cnf"></a>1、 编辑my.cnf</h3><ul><li>设置default storage engine为InnoDB:<br>[mysqld]<br>…<br>default-storage-engine=INNODB<br>…</li><li>确认max_allowed_packet最少为256M:<br>[mysqld]<br>…<br>max_allowed_packet=256M<br>…</li><li>确认innodb_log_file_size至少为256M当MySQL的版本是5.5或5.5以下时:<br>[mysqld]<br>…<br>innodb_log_file_size=256M<br>…</li><li><p>确保sql_mode的值不是NO_AUTO_VALUE_ON_ZERO<br>// remove this if it exists<br>sql_mode = NO_AUTO_VALUE_ON_ZERO</p><h3 id="2、-创建数据库"><a href="#2、-创建数据库" class="headerlink" title="2、 创建数据库"></a>2、 创建数据库</h3><p>  CREATE DATABASE jiradb CHARACTER SET utf8 COLLATE utf8_bin;</p></li></ul><h3 id="3、-为数据库创建相应的用户"><a href="#3、-为数据库创建相应的用户" class="headerlink" title="3、 为数据库创建相应的用户"></a>3、 为数据库创建相应的用户</h3><p>MySQL5.5,MySQL 5.6和MySQL 5.7.0到MySQL 5.7.5的语法:</p><pre><code>CREATE USER &apos;confluenceUser&apos;@&apos;%&apos; IDENTIFIED BY &apos;Confluence@123&apos;;GRANT SELECT,INSERT,UPDATE,DELETE,CREATE,DROP,ALTER,INDEX on &lt;JIRADB&gt;.* TO &apos;&lt;USERNAME&gt;&apos;@&apos;&lt;JIRA_SERVER_HOSTNAME&gt;&apos; IDENTIFIED BY &apos;&lt;PASSWORD&gt;&apos;;flush privileges;</code></pre><p>MySQL5.7.6及以上必须包括REFERENCES的权限:</p><pre><code>GRANT SELECT,INSERT,UPDATE,DELETE,CREATE,DROP,REFERENCES,ALTER,INDEX on &lt;JIRADB&gt;.* TO &apos;&lt;USERNAME&gt;&apos;@&apos;&lt;JIRA_SERVER_HOSTNAME&gt;&apos; IDENTIFIED BY &apos;&lt;PASSWORD&gt;&apos;;flush privileges;//确认数据库用户权限SHOW GRANTS FOR &lt;USERNAME&gt;@&lt;JIRA_SERVER_HOSTNAME&gt;;</code></pre><h3 id="4、-重启数据库"><a href="#4、-重启数据库" class="headerlink" title="4、 重启数据库"></a>4、 重启数据库</h3><ul><li>Windows:使用系统服务管理器重启。</li><li>Linux: /etc/init.d/mysqld stop’ 或者 ‘/etc/init.d/mysql stop’ 或者 ‘service mysqld stop’.<br>-启动时将stop换成start.</li></ul>]]></content>
    
    <summary type="html">
    
      Atlassian产品安装环境准备-数据库(1):MySQL
    
    </summary>
    
    
      <category term="ATLASSIAN" scheme="https://us-forever.com/tags/ATLASSIAN/"/>
    
  </entry>
  
  <entry>
    <title>《Thinking in java》读书笔记(23)</title>
    <link href="https://us-forever.com/2017/11/24/%E3%80%8AThinking-in-java%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-23/"/>
    <id>https://us-forever.com/2017/11/24/《Thinking-in-java》读书笔记-23/</id>
    <published>2017-11-24T05:58:45.000Z</published>
    <updated>2018-01-15T06:39:26.554Z</updated>
    
    <content type="html"><![CDATA[<h2 id="4-8-switch"><a href="#4-8-switch" class="headerlink" title="4.8 switch"></a>4.8 switch</h2><p><strong>switch</strong>有时也被划归为一种选择语句。根据证书表达式的值，switch语句可以从一系列代码中选出一段去执行。它的格式如下：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span>(integer-selector)&#123;</span><br><span class="line"><span class="keyword">case</span> integral-value1: statement ;<span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> integral-value2: statement ;<span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> integral-value3: statement ;<span class="keyword">break</span>;</span><br><span class="line"> <span class="keyword">case</span> integral-value4: statement ;<span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> integral-value5: statement ;<span class="keyword">break</span>;</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line"><span class="keyword">default</span>:statement;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><a id="more"></a><p>其中integer-selector是选择因子，如果发现和integral-value有相同时，则执行对应的语句，否则执行default。<br>当然我们这里每一个后边都跟一个break，也就是执行完成之后不会执行后边的。如果没有break则会执行后边的代码。<br>例子：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">package</span> demo;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span> testSwitch</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> yaxuSong</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2017年11月24日 下午4:32:26 </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">testSwitch</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="keyword">for</span>(;;) &#123;</span><br><span class="line"><span class="keyword">switch</span> (<span class="number">2</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span>: System.out.println(<span class="string">"1"</span>); <span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">2</span>: System.out.println(<span class="string">"2"</span>); <span class="comment">//break;</span></span><br><span class="line"><span class="keyword">case</span> <span class="number">3</span>: System.out.println(<span class="string">"3"</span>); <span class="comment">//break;</span></span><br><span class="line"><span class="keyword">default</span>: System.out.println(<span class="string">"default"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="4-9-总结"><a href="#4-9-总结" class="headerlink" title="4.9 总结"></a>4.9 总结</h2><p>本章就是Java语言编程的一些基础，还有些很少用到的东西，现在也学会了。其他的大概复习了下。<br>好久没写了，希望自己给自己定下来的计划能完成….加油！</p>]]></content>
    
    <summary type="html">
    
      《Thinking in java》读书笔记(23)
    
    </summary>
    
    
      <category term="读书笔记" scheme="https://us-forever.com/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
      <category term="Java" scheme="https://us-forever.com/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>《Thinking in java》读书笔记(22)</title>
    <link href="https://us-forever.com/2017/11/24/%E3%80%8AThinking-in-java%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-22/"/>
    <id>https://us-forever.com/2017/11/24/《Thinking-in-java》读书笔记-22/</id>
    <published>2017-11-24T05:58:42.000Z</published>
    <updated>2018-01-15T06:39:36.730Z</updated>
    
    <content type="html"><![CDATA[<h2 id="4-4-Foreach语法"><a href="#4-4-Foreach语法" class="headerlink" title="4.4 Foreach语法"></a>4.4 Foreach语法</h2><p>Java SE5引入了一种新的更加简洁的for语法用于数组和容器，也就是foreach语法，表示不必创建int变量去对由访问项构成的序列进行计数，foreach将自动产生每一项。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> demo;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span> testForeach</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> yaxuSong</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2017年11月24日 下午3:01:31 </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">testForeach</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">char</span> c : <span class="string">"Hello Java!"</span>.toCharArray())</span><br><span class="line">&#123;</span><br><span class="line">System.out.println(c);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><a id="more"></a><p>输出：</p><blockquote><p>H<br>e<br>l<br>l<br>o</p><p>J<br>a<br>v<br>a<br>!</p></blockquote><p>当然foreach还可以用于任何Iterable对象。</p><h2 id="4-5-return"><a href="#4-5-return" class="headerlink" title="4.5 return"></a>4.5 return</h2><p>在Java中有多个关键词表示无条件分支，它们只是表示这个分支无需任何测试即可发生。这些关键词包括<strong>return、break、continue</strong>和一种与其他语言中的<strong>goto</strong>类似的跳转到标号语句的方式。<br><strong>return</strong>关键词有两个方面的用途：一方面制定一个方法的返回值（假设它没有void返回值），另一方面它会导致当前方法的退出，并返回那个值。</p><h2 id="4-6-break和continue"><a href="#4-6-break和continue" class="headerlink" title="4.6 break和continue"></a>4.6 break和continue</h2><p>在任何迭代语句的主体部分，都可以<strong>break</strong>和<strong>continue</strong>控制循环的流程。其中break用于强行退出循环体，不执行循环剩下的语句。而continue则停止当前的迭代，然后退回循环起始的地方，开始进行下次循环。</p><p>其中break可以跳出无穷循环体，无穷循环有两种写法：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span>(<span class="keyword">true</span>)</span><br><span class="line"><span class="keyword">for</span>(;;)</span><br></pre></td></tr></table></figure></p><h2 id="4-7-臭名昭著的goto"><a href="#4-7-臭名昭著的goto" class="headerlink" title="4.7 臭名昭著的goto"></a>4.7 臭名昭著的goto</h2><p>编程语言一开始就有<strong>goto</strong>关键字。事实上，goto起源于汇编语言的程序控制：“若条件A成立，则跳到这里；否则跳到那里”。<br>在Java中，标签起作用的唯一地方刚好是在迭代语句之前。在标签和迭代之间置入任何语句都不好。而在迭代之前设置标签的唯一理由是：我们希望在其中嵌套另一个迭代或者开关。这是由于<strong>break</strong>和<strong>continue</strong>关键词通常只中断当前循环，但若随同标签一起使用，它们会中断循环，知道标签所在的地方：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">label1:</span><br><span class="line">outer-iteration&#123;</span><br><span class="line"> inner-iteration&#123;</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line"><span class="keyword">break</span>;<span class="comment">//(1)</span></span><br><span class="line"><span class="comment">//...</span></span><br><span class="line"><span class="keyword">continue</span>;<span class="comment">//(2)</span></span><br><span class="line"><span class="comment">//...</span></span><br><span class="line"><span class="keyword">continue</span> label1;<span class="comment">//(3)</span></span><br><span class="line"><span class="comment">//...</span></span><br><span class="line"><span class="keyword">break</span> label1;<span class="comment">//(4)</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>在（1）中，break中断内部迭代，回到外部迭代。在（2）中，continue使执行点移回内部迭代的起始处。在（3）中，continue label1同时中断内部迭代以及外部迭代，直接转到label处；随后，它实际上是继续迭代过程，但却从不迭代开始。在（4）中，break label1也会中断所以迭代，并回到label1处，但并不重新进入迭代。也就是说，它实际是完全中止了两个迭代。<br>例子<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">package</span> demo;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span> testBreakContinue</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> yaxuSong</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2017年11月24日 下午3:28:06</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">testBreakContinue</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">outer:</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">10</span>; i += <span class="number">2</span>) &#123;</span><br><span class="line">inner:</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= <span class="number">10</span>; j += <span class="number">2</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">"i="</span>+i+<span class="string">" j="</span>+j);</span><br><span class="line"><span class="keyword">if</span>(i==<span class="number">5</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">continue</span> outer;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//if(j==10)</span></span><br><span class="line"><span class="comment">//&#123;</span></span><br><span class="line"><span class="comment">//break outer;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      《Thinking in java》读书笔记(22)
    
    </summary>
    
    
      <category term="读书笔记" scheme="https://us-forever.com/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
      <category term="Java" scheme="https://us-forever.com/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>Java工程师成神之路</title>
    <link href="https://us-forever.com/2017/11/24/Java%E5%B7%A5%E7%A8%8B%E5%B8%88%E6%88%90%E7%A5%9E%E4%B9%8B%E8%B7%AF/"/>
    <id>https://us-forever.com/2017/11/24/Java工程师成神之路/</id>
    <published>2017-11-24T03:58:56.000Z</published>
    <updated>2018-01-15T06:41:14.165Z</updated>
    
    <content type="html"><![CDATA[<p>这是我在微信公众号上看到的一篇文章，关于Java学习的一个文章，我觉得写的特别好，所以留下来，作为自己学习的指导.</p><p>一、基础篇</p><p>1.1 JVM</p><p>1.1.1. Java内存模型，Java内存管理，Java堆和栈，垃圾回收<br><a href="http://www.jcp.org/en/jsr/detail?id=133" target="_blank" rel="noopener">http://www.jcp.org/en/jsr/detail?id=133</a><br><a href="http://ifeve.com/jmm-faq/" target="_blank" rel="noopener">http://ifeve.com/jmm-faq/</a><br>1.1.2. 了解JVM各种参数及调优</p><p>1.1.3. 学习使用Java工具<br>jps, jstack, jmap, jconsole, jinfo, jhat, javap, …<br><a href="http://kenai.com/projects/btrace" target="_blank" rel="noopener">http://kenai.com/projects/btrace</a><br><a href="http://www.crashub.org/" target="_blank" rel="noopener">http://www.crashub.org/</a><br><a href="https://github.com/taobao/TProfiler" target="_blank" rel="noopener">https://github.com/taobao/TProfiler</a><br><a href="https://github.com/CSUG/HouseMD" target="_blank" rel="noopener">https://github.com/CSUG/HouseMD</a><br><a href="http://wiki.cyclopsgroup.org/jmxterm" target="_blank" rel="noopener">http://wiki.cyclopsgroup.org/jmxterm</a><br><a href="https://github.com/jlusdy/TBJMap" target="_blank" rel="noopener">https://github.com/jlusdy/TBJMap</a><br>1.1.4. 学习Java诊断工具<br><a href="http://www.eclipse.org/mat/" target="_blank" rel="noopener">http://www.eclipse.org/mat/</a><br><a href="http://visualvm.java.net/oqlhelp.html" target="_blank" rel="noopener">http://visualvm.java.net/oqlhelp.html</a><br>1.1.5. 自己编写各种outofmemory，stackoverflow程序<br>HeapOutOfMemory<br>Young OutOfMemory<br>MethodArea OutOfMemory<br>ConstantPool OutOfMemory<br>DirectMemory OutOfMemory<br>Stack OutOfMemory<br>Stack OverFlow<br>1.1.6. 使用工具尝试解决以下问题，并写下总结<br>当一个Java程序响应很慢时如何查找问题<br>当一个Java程序频繁FullGC时如何解决问题，如何查看垃圾回收日志<br>当一个Java应用发生OutOfMemory时该如何解决，年轻代、年老代、永久代解决办法不同，导致原因也不同<br>1.1.7. 参考资料<br><a href="http://docs.oracle.com/javase/specs/jvms/se7/html/" target="_blank" rel="noopener">http://docs.oracle.com/javase/specs/jvms/se7/html/</a><br><a href="http://www.cs.umd.edu/~pugh/java/memoryModel/" target="_blank" rel="noopener">http://www.cs.umd.edu/~pugh/java/memoryModel/</a><br><a href="http://gee.cs.oswego.edu/dl/jmm/cookbook.html" target="_blank" rel="noopener">http://gee.cs.oswego.edu/dl/jmm/cookbook.html</a><br>1.2. Java基础知识</p><p>1.2.1. 阅读源代码<br>java.lang.String<br>java.lang.Integer<br>java.lang.Long<br>java.lang.Enum<br>java.math.BigDecimal<br>java.lang.ThreadLocal<br>java.lang.ClassLoader &amp; java.net.URLClassLoader<br>java.util.ArrayList &amp; java.util.LinkedList<br>java.util.HashMap &amp; java.util.LinkedHashMap &amp; java.util.TreeMap<br>java.util.HashSet &amp; java.util.LinkedHashSet &amp; java.util.TreeSet<br>1.2.2. 熟悉Java中各种变量类型<br>1.2.3. 熟悉Java String的使用，熟悉String的各种函数<br>1.2.4. 熟悉Java中各种关键字<br>1.2.5. 学会使用List，Map，Stack，Queue，Set<br>上述数据结构的遍历<br>上述数据结构的使用场景<br>Java实现对Array/List排序<br>java.uti.Arrays.sort()<br>java.util.Collections.sort()<br>Java实现对List去重<br>Java实现对List去重，并且需要保留数据原始的出现顺序<br>Java实现最近最少使用cache，用LinkedHashMap<br>1.2.6. Java IO&amp;Java NIO，并学会使用<br>java.io.<br>java.nio.<br>nio和reactor设计模式<br>文件编码，字符集<br>1.2.7. Java反射与javassist<br>反射与工厂模式<br>java.lang.reflect.<br>1.2.8. Java序列化<br>java.io. Serializable<br>什么是序列化，为什么序列化<br>序列化与单例模式<br>google序列化protobuf<br>1.2.9. 虚引用，弱引用，软引用<br>java.lang.ref.<br>实验这些引用的回收<br>1.2.10. 熟悉Java系统属性<br>java.util.Properties<br>1.2.11. 熟悉Annotation用法<br>java.lang.annotation.<br>1.2.12. JMS<br>javax.jms.<br>1.2.13. JMX<br>java.lang.management.<br>javax.management.<br>1.2.14. 泛型和继承，泛型和擦除<br>1.2.15. 自动拆箱装箱与字节码<br>1.2.16. 实现Callback<br>1.2.17. java.lang.Void类使用<br>1.2.18. Java Agent，premain函数<br>java.lang.instrument<br>1.2.19. 单元测试<br>Junit，<a href="http://junit.org/" target="_blank" rel="noopener">http://junit.org/</a><br>Jmockit，<a href="https://code.google.com/p/jmockit/" target="_blank" rel="noopener">https://code.google.com/p/jmockit/</a><br>djUnit，<a href="http://works.dgic.co.jp/djunit/" target="_blank" rel="noopener">http://works.dgic.co.jp/djunit/</a><br>1.2.20. Java实现通过正则表达式提取一段文本中的电子邮件，并将@替换为#输出<br>java.lang.util.regex.<br>1.2.21. 学习使用常用的Java工具库<br>commons.lang, commons.…<br>guava-libraries<br>netty<br>1.2.22. 什么是API&amp;SPI<br><a href="http://en.wikipedia.org/wiki/Application_programming_interface" target="_blank" rel="noopener">http://en.wikipedia.org/wiki/Application_programming_interface</a><br><a href="http://en.wikipedia.org/wiki/Service_provider_interface" target="_blank" rel="noopener">http://en.wikipedia.org/wiki/Service_provider_interface</a><br>1.2.23. 参考资料<br>JDK src.zip 源代码<br><a href="http://openjdk.java.net/" target="_blank" rel="noopener">http://openjdk.java.net/</a><br><a href="http://commons.apache.org/" target="_blank" rel="noopener">http://commons.apache.org/</a><br><a href="https://code.google.com/p/guava-libraries/" target="_blank" rel="noopener">https://code.google.com/p/guava-libraries/</a><br><a href="http://netty.io/" target="_blank" rel="noopener">http://netty.io/</a><br><a href="http://stackoverflow.com/questions/2954372/difference-between-spi-and-api" target="_blank" rel="noopener">http://stackoverflow.com/questions/2954372/difference-between-spi-and-api</a><br><a href="http://stackoverflow.com/questions/11404230/how-to-implement-the-api-spi-pattern-in-java" target="_blank" rel="noopener">http://stackoverflow.com/questions/11404230/how-to-implement-the-api-spi-pattern-in-java</a><br>1.3. Java并发编程</p><p>1.3.1. 阅读源代码，并学会使用</p><p>java.lang.Thread<br>java.lang.Runnable<br>java.util.concurrent.Callable<br>java.util.concurrent.locks.ReentrantLock<br>java.util.concurrent.locks.ReentrantReadWriteLock<br>java.util.concurrent.atomic.Atomic*<br>java.util.concurrent.Semaphore<br>java.util.concurrent.CountDownLatch<br>java.util.concurrent.CyclicBarrier<br>java.util.concurrent.ConcurrentHashMap<br>java.util.concurrent.Executors<br>1.3.2. 学习使用线程池，自己设计线程池需要注意什么<br>1.3.3. 锁<br>什么是锁，锁的种类有哪些，每种锁有什么特点，适用场景是什么<br>在并发编程中锁的意义是什么<br>1.3.4. synchronized的作用是什么，synchronized和lock<br>1.3.5. sleep和wait<br>1.3.6. wait和notify<br>1.3.7. 写一个死锁的程序<br>1.3.8. 什么是守护线程，守护线程和非守护线程的区别以及用法<br>1.3.9. volatile关键字的理解<br>C++ volatile关键字和Java volatile关键字<br>happens-before语义<br>编译器指令重排和CPU指令重排<br><a href="http://en.wikipedia.org/wiki/Memory_ordering" target="_blank" rel="noopener">http://en.wikipedia.org/wiki/Memory_ordering</a><br><a href="http://en.wikipedia.org/wiki/Volatile_variable" target="_blank" rel="noopener">http://en.wikipedia.org/wiki/Volatile_variable</a><br><a href="http://preshing.com/20130702/the-happens-before-relation/" target="_blank" rel="noopener">http://preshing.com/20130702/the-happens-before-relation/</a><br>1.3.10. 以下代码是不是线程安全？为什么？如果为count加上volatile修饰是否能够做到线程安全？你觉得该怎么做是线程安全的？<br>public class Sample {<br>private static int count = 0;<br>public static void increment() {<br>count++;<br>}<br>}<br>1.3.11. 解释一下下面两段代码的差别<br>// 代码1<br>public class Sample {<br>private static int count = 0;<br>synchronized public static void increment() {<br>count++;<br>}<br>}</p><p>// 代码2<br>public class Sample {<br>private static AtomicInteger count = new AtomicInteger(0);<br>public static void increment() {<br>count.getAndIncrement();<br>}<br>}<br>1.3.12. 参考资料<br><a href="http://book.douban.com/subject/10484692/" target="_blank" rel="noopener">http://book.douban.com/subject/10484692/</a><br><a href="http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html" target="_blank" rel="noopener">http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html</a><br>二、 进阶篇</p><p>2.1. Java底层知识</p><p>2.1.1. 学习了解字节码、class文件格式<br><a href="http://en.wikipedia.org/wiki/Java_class_file" target="_blank" rel="noopener">http://en.wikipedia.org/wiki/Java_class_file</a><br><a href="http://en.wikipedia.org/wiki/Java_bytecode" target="_blank" rel="noopener">http://en.wikipedia.org/wiki/Java_bytecode</a><br><a href="http://en.wikipedia.org/wiki/Java_bytecode_instruction_listings" target="_blank" rel="noopener">http://en.wikipedia.org/wiki/Java_bytecode_instruction_listings</a><br><a href="http://www.csg.ci.i.u-tokyo.ac.jp/~chiba/javassist/" target="_blank" rel="noopener">http://www.csg.ci.i.u-tokyo.ac.jp/~chiba/javassist/</a><br><a href="http://asm.ow2.org/" target="_blank" rel="noopener">http://asm.ow2.org/</a><br>2.1.2. 写一个程序要求实现javap的功能（手工完成，不借助ASM等工具）<br>如Java源代码：<br>public static void main(String[] args) {<br>int i = 0;<br>i += 1;<br>i *= 1;<br>System.out.println(i);<br>}<br>编译后读取class文件输出以下代码：<br>public static void main(java.lang.String[]);<br>Code:<br>Stack=2, Locals=2, Args_size=1<br>0: iconst_0<br>1: istore_1<br>2: iinc 1, 1<br>5: iload_1<br>6: iconst_1<br>7: imul<br>8: istore_1<br>9: getstatic #2; //Field java/lang/System.out:Ljava/io/PrintStream;<br>12: iload_1<br>13: invokevirtual #3; //Method java/io/PrintStream.println:(I)V<br>16: return<br>LineNumberTable:<br>line 4: 0<br>line 5: 2<br>line 6: 5<br>line 7: 9<br>line 8: 16<br>2.1.3. CPU缓存，L1，L2，L3和伪共享<br><a href="http://duartes.org/gustavo/blog/post/intel-cpu-caches/" target="_blank" rel="noopener">http://duartes.org/gustavo/blog/post/intel-cpu-caches/</a><br><a href="http://mechanical-sympathy.blogspot.com/2011/07/false-sharing.html" target="_blank" rel="noopener">http://mechanical-sympathy.blogspot.com/2011/07/false-sharing.html</a><br>2.1.4. 什么是尾递归<br>2.1.5. 熟悉位运算<br>用位运算实现加、减、乘、除、取余<br>2.1.6. 参考资料<br><a href="http://book.douban.com/subject/1138768/" target="_blank" rel="noopener">http://book.douban.com/subject/1138768/</a><br><a href="http://book.douban.com/subject/6522893/" target="_blank" rel="noopener">http://book.douban.com/subject/6522893/</a><br><a href="http://en.wikipedia.org/wiki/Java_class_file" target="_blank" rel="noopener">http://en.wikipedia.org/wiki/Java_class_file</a><br><a href="http://en.wikipedia.org/wiki/Java_bytecode" target="_blank" rel="noopener">http://en.wikipedia.org/wiki/Java_bytecode</a><br><a href="http://en.wikipedia.org/wiki/Java_bytecode_instruction_listings" target="_blank" rel="noopener">http://en.wikipedia.org/wiki/Java_bytecode_instruction_listings</a><br>2.2. 设计模式</p><p>2.2.1. 实现AOP<br>CGLIB和InvocationHandler的区别<br><a href="http://cglib.sourceforge.net/" target="_blank" rel="noopener">http://cglib.sourceforge.net/</a><br>动态代理模式<br>Javassist实现AOP<br><a href="http://www.csg.ci.i.u-tokyo.ac.jp/~chiba/javassist/" target="_blank" rel="noopener">http://www.csg.ci.i.u-tokyo.ac.jp/~chiba/javassist/</a><br>ASM实现AOP<br><a href="http://asm.ow2.org/" target="_blank" rel="noopener">http://asm.ow2.org/</a><br>2.2.2. 使用模板方法设计模式和策略设计模式实现IOC<br>2.2.3. 不用synchronized和lock，实现线程安全的单例模式<br>2.2.4. nio和reactor设计模式<br>2.2.5. 参考资料<br><a href="http://asm.ow2.org/" target="_blank" rel="noopener">http://asm.ow2.org/</a><br><a href="http://cglib.sourceforge.net/" target="_blank" rel="noopener">http://cglib.sourceforge.net/</a><br><a href="http://www.javassist.org/" target="_blank" rel="noopener">http://www.javassist.org/</a><br>2.3. 网络编程知识<br>2.3.1. Java RMI，Socket，HttpClient<br>2.3.2. 用Java写一个简单的静态文件的HTTP服务器<br>实现客户端缓存功能，支持返回304<br>实现可并发下载一个文件<br>使用线程池处理客户端请求<br>使用nio处理客户端请求<br>支持简单的rewrite规则<br>上述功能在实现的时候需要满足“开闭原则”<br>2.3.3. 了解nginx和apache服务器的特性并搭建一个对应的服务器<br><a href="http://nginx.org/" target="_blank" rel="noopener">http://nginx.org/</a><br><a href="http://httpd.apache.org/" target="_blank" rel="noopener">http://httpd.apache.org/</a><br>2.3.4. 用Java实现FTP、SMTP协议<br>2.3.5. 什么是CDN？如果实现？DNS起到什么作用？<br>搭建一个DNS服务器<br>搭建一个 Squid 或 Apache Traffic Server 服务器<br><a href="http://www.squid-cache.org/" target="_blank" rel="noopener">http://www.squid-cache.org/</a><br><a href="http://trafficserver.apache.org/" target="_blank" rel="noopener">http://trafficserver.apache.org/</a><br><a href="http://en.wikipedia.org/wiki/Domain_Name_System" target="_blank" rel="noopener">http://en.wikipedia.org/wiki/Domain_Name_System</a><br>2.3.6. 参考资料<br><a href="http://www.ietf.org/rfc/rfc2616.txt" target="_blank" rel="noopener">http://www.ietf.org/rfc/rfc2616.txt</a><br><a href="http://tools.ietf.org/rfc/rfc5321.txt" target="_blank" rel="noopener">http://tools.ietf.org/rfc/rfc5321.txt</a><br><a href="http://en.wikipedia.org/wiki/Open/closed_principle" target="_blank" rel="noopener">http://en.wikipedia.org/wiki/Open/closed_principle</a><br>2.4. 框架知识<br>spring，spring mvc，阅读主要源码<br>ibatis，阅读主要源码<br>用spring和ibatis搭建java server<br>2.5. 应用服务器知识<br>熟悉使用jboss，<a href="https://www.jboss.org/overview/" target="_blank" rel="noopener">https://www.jboss.org/overview/</a><br>熟悉使用tomcat，<a href="http://tomcat.apache.org/" target="_blank" rel="noopener">http://tomcat.apache.org/</a><br>熟悉使用jetty，<a href="http://www.eclipse.org/jetty/" target="_blank" rel="noopener">http://www.eclipse.org/jetty/</a><br>三、 高级篇</p><p>3.1. 编译原理知识</p><p>3.1.1. 用Java实现以下表达式解析并返回结果（语法和Oracle中的select sysdate-1 from dual类似）<br>sysdate<br>sysdate - 1<br>sysdate - 1/24<br>sysdate - 1/(12*2)<br>3.1.2. 实现对一个List通过DSL筛选<br>QList&gt; mapList = new QList&gt;;<br>mapList.add({“name”: “hatter test”});<br>mapList.add({“id”: -1,”name”: “hatter test”});<br>mapList.add({“id”: 0, “name”: “hatter test”});<br>mapList.add({“id”: 1, “name”: “test test”});<br>mapList.add({“id”: 2, “name”: “hatter test”});<br>mapList.add({“id”: 3, “name”: “test hatter”});<br>mapList.query(“id is not null and id &gt; 0 and name like ‘%hatter%’”);<br>要求返回列表中匹配的对象，即最后两个对象；</p><p>3.1.3. 用Java实现以下程序（语法和变量作用域处理都和JavaScript类似）：<br>代码：<br>var a = 1;<br>var b = 2;<br>var c = function() {<br>var a = 3;<br>println(a);<br>println(b);<br>};<br>c();<br>println(a);<br>println(b);<br>输出：<br>3<br>2<br>1<br>2<br>3.1.4. 参考资料<br><a href="http://en.wikipedia.org/wiki/Abstract_syntax_tree" target="_blank" rel="noopener">http://en.wikipedia.org/wiki/Abstract_syntax_tree</a><br><a href="https://javacc.java.net/" target="_blank" rel="noopener">https://javacc.java.net/</a><br><a href="http://www.antlr.org/" target="_blank" rel="noopener">http://www.antlr.org/</a><br>3.2. 操作系统知识<br>Ubuntu<br>Centos<br>使用linux，熟悉shell脚本<br>3.3. 数据存储知识</p><p>3.3.1. 关系型数据库<br>MySQL<br>如何看执行计划<br>如何搭建MySQL主备<br>binlog是什么<br>Derby，H2，PostgreSQL<br>SQLite<br>3.3.2. NoSQL<br>Cache<br>Redis<br>Memcached<br>Leveldb<br>Bigtable<br>HBase<br>Cassandra<br>Mongodb<br>图数据库<br>neo4j<br>3.3.3. 参考资料<br><a href="http://db-engines.com/en/ranking" target="_blank" rel="noopener">http://db-engines.com/en/ranking</a><br><a href="http://redis.io/" target="_blank" rel="noopener">http://redis.io/</a><br><a href="https://code.google.com/p/leveldb/" target="_blank" rel="noopener">https://code.google.com/p/leveldb/</a><br><a href="http://hbase.apache.org/" target="_blank" rel="noopener">http://hbase.apache.org/</a><br><a href="http://cassandra.apache.org/" target="_blank" rel="noopener">http://cassandra.apache.org/</a><br><a href="http://www.mongodb.org/" target="_blank" rel="noopener">http://www.mongodb.org/</a><br><a href="http://www.neo4j.org/" target="_blank" rel="noopener">http://www.neo4j.org/</a><br>3.4. 大数据知识</p><p>3.4.1. Zookeeper，在linux上部署zk<br>3.4.2. Solr，Lucene，ElasticSearch<br>在linux上部署solr，solrcloud，，新增、删除、查询索引<br>3.4.3. Storm，流式计算，了解Spark，S4<br>在linux上部署storm，用zookeeper做协调，运行storm hello world，local和remote模式运行调试storm topology。<br>3.4.4. Hadoop，离线计算<br>Hdfs：部署NameNode，SecondaryNameNode，DataNode，上传文件、打开文件、更改文件、删除文件<br>MapReduce：部署JobTracker，TaskTracker，编写mr job<br>Hive：部署hive，书写hive sql，得到结果<br>Presto：类hive，不过比hive快，非常值得学习<br>3.4.5. 分布式日志收集flume，kafka，logstash<br>3.4.6. 数据挖掘，mahout<br>3.4.7. 参考资料<br><a href="http://zookeeper.apache.org/" target="_blank" rel="noopener">http://zookeeper.apache.org/</a><br><a href="https://lucene.apache.org/solr/" target="_blank" rel="noopener">https://lucene.apache.org/solr/</a><br><a href="https://github.com/nathanmarz/storm/wiki" target="_blank" rel="noopener">https://github.com/nathanmarz/storm/wiki</a><br><a href="http://hadoop.apache.org/" target="_blank" rel="noopener">http://hadoop.apache.org/</a><br><a href="http://prestodb.io/" target="_blank" rel="noopener">http://prestodb.io/</a><br><a href="http://flume.apache.org/，http://logstash.net/，http://kafka.apache.org/" target="_blank" rel="noopener">http://flume.apache.org/，http://logstash.net/，http://kafka.apache.org/</a><br><a href="http://mahout.apache.org/" target="_blank" rel="noopener">http://mahout.apache.org/</a><br>3.5. 网络安全知识</p><p>3.5.1. 什么是DES、AES<br>3.5.2. 什么是RSA、DSA<br>3.5.3. 什么是MD5，SHA1<br>3.5.4. 什么是SSL、TLS，为什么HTTPS相对比较安全<br>3.5.5. 什么是中间人攻击、如果避免中间人攻击<br>3.5.6. 什么是DOS、DDOS、CC攻击<br>3.5.7. 什么是CSRF攻击<br>3.5.8. 什么是CSS攻击<br>3.5.9. 什么是SQL注入攻击<br>3.5.10. 什么是Hash碰撞拒绝服务攻击<br>3.5.11. 了解并学习下面几种增强安全的技术</p><p><a href="http://www.openauthentication.org/" target="_blank" rel="noopener">http://www.openauthentication.org/</a><br>HOTP <a href="http://www.ietf.org/rfc/rfc4226.txt" target="_blank" rel="noopener">http://www.ietf.org/rfc/rfc4226.txt</a><br>TOTP <a href="http://tools.ietf.org/rfc/rfc6238.txt" target="_blank" rel="noopener">http://tools.ietf.org/rfc/rfc6238.txt</a><br>OCRA <a href="http://tools.ietf.org/rfc/rfc6287.txt" target="_blank" rel="noopener">http://tools.ietf.org/rfc/rfc6287.txt</a><br><a href="http://en.wikipedia.org/wiki/Salt_(cryptography)" target="_blank" rel="noopener">http://en.wikipedia.org/wiki/Salt_(cryptography)</a><br>3.5.12. 用openssl签一个证书部署到apache或nginx<br>3.5.13. 参考资料<br><a href="http://en.wikipedia.org/wiki/Cryptographic_hash_function" target="_blank" rel="noopener">http://en.wikipedia.org/wiki/Cryptographic_hash_function</a><br><a href="http://en.wikipedia.org/wiki/Block_cipher" target="_blank" rel="noopener">http://en.wikipedia.org/wiki/Block_cipher</a><br><a href="http://en.wikipedia.org/wiki/Public-key_cryptography" target="_blank" rel="noopener">http://en.wikipedia.org/wiki/Public-key_cryptography</a><br><a href="http://en.wikipedia.org/wiki/Transport_Layer_Security" target="_blank" rel="noopener">http://en.wikipedia.org/wiki/Transport_Layer_Security</a><br><a href="http://www.openssl.org/" target="_blank" rel="noopener">http://www.openssl.org/</a><br><a href="https://code.google.com/p/google-authenticator/" target="_blank" rel="noopener">https://code.google.com/p/google-authenticator/</a><br>四、 扩展篇</p><p>4.1. 相关知识</p><p>4.1.1. 云计算，分布式，高可用，可扩展<br>4.1.2. 虚拟化<br><a href="https://linuxcontainers.org/" target="_blank" rel="noopener">https://linuxcontainers.org/</a><br><a href="http://www.linux-kvm.org/page/Main_Page" target="_blank" rel="noopener">http://www.linux-kvm.org/page/Main_Page</a><br><a href="http://www.xenproject.org/" target="_blank" rel="noopener">http://www.xenproject.org/</a><br><a href="https://www.docker.io/" target="_blank" rel="noopener">https://www.docker.io/</a><br>4.1.3. 监控<br><a href="http://www.nagios.org/" target="_blank" rel="noopener">http://www.nagios.org/</a><br><a href="http://ganglia.info/" target="_blank" rel="noopener">http://ganglia.info/</a><br>4.1.4. 负载均衡<br><a href="http://www.linuxvirtualserver.org/" target="_blank" rel="noopener">http://www.linuxvirtualserver.org/</a><br>4.1.5. 学习使用git<br><a href="https://github.com/" target="_blank" rel="noopener">https://github.com/</a><br><a href="https://git.oschina.net/" target="_blank" rel="noopener">https://git.oschina.net/</a><br>4.1.6. 学习使用maven<br><a href="http://maven.apache.org/" target="_blank" rel="noopener">http://maven.apache.org/</a><br>4.1.7. 学习使用gradle<br><a href="http://www.gradle.org/" target="_blank" rel="noopener">http://www.gradle.org/</a><br>4.1.8. 学习一个小语种语言<br>Groovy<br>Scala<br>LISP, Common LISP, Schema, Clojure<br>R<br>Julia<br>Lua<br>Ruby<br>4.1.9. 尝试了解编码的本质</p><p>了解以下概念<br>ASCII, ISO-8859-1<br>GB2312, GBK, GB18030<br>Unicode, UTF-8<br>不使用 String.getBytes() 等其他工具类/函数完成下面功能</p><p>public static void main(String[] args) throws IOException {<br>String str = “Hello, 我们是中国人。”;<br>byte[] utf8Bytes = toUTF8Bytes(str);<br>FileOutputStream fos = new FileOutputStream(“f.txt”);<br>fos.write(utf8Bytes);<br>fos.close();<br>}<br>public static byte[] toUTF8Bytes(String str) {<br>return null; // TODO<br>}</p><p>想一下上面的程序能不能写一个转GBK的？<br>写个程序自动判断一个文件是哪种编码<br>4.1.10. 尝试了解时间的本质<br>时区 &amp; 冬令时、夏令时<br><a href="http://en.wikipedia.org/wiki/Time_zone" target="_blank" rel="noopener">http://en.wikipedia.org/wiki/Time_zone</a><br><a href="ftp://ftp.iana.org/tz/data/asia" target="_blank" rel="noopener">ftp://ftp.iana.org/tz/data/asia</a><br><a href="http://zh.wikipedia.org/wiki/%E4%B8%AD%E5%9C%8B%E6%99%82%E5%8D%80" target="_blank" rel="noopener">http://zh.wikipedia.org/wiki/%E4%B8%AD%E5%9C%8B%E6%99%82%E5%8D%80</a><br>闰年<br><a href="http://en.wikipedia.org/wiki/Leap_year" target="_blank" rel="noopener">http://en.wikipedia.org/wiki/Leap_year</a><br>闰秒<br><a href="ftp://ftp.iana.org/tz/data/leapseconds" target="_blank" rel="noopener">ftp://ftp.iana.org/tz/data/leapseconds</a><br>System.currentTimeMillis() 返回的时间是什么<br>4.1.11. 参考资料<br><a href="http://git-scm.com/" target="_blank" rel="noopener">http://git-scm.com/</a><br><a href="http://en.wikipedia.org/wiki/UTF-8" target="_blank" rel="noopener">http://en.wikipedia.org/wiki/UTF-8</a><br><a href="http://www.iana.org/time-zones" target="_blank" rel="noopener">http://www.iana.org/time-zones</a><br>4.2. 扩展学习</p><p>4.2.1. JavaScript知识<br>4.2.1.1. 什么是prototype<br>修改代码，使程序输出“1 3 5”：<br><a href="http://jsfiddle.net/Ts7Fk/" target="_blank" rel="noopener">http://jsfiddle.net/Ts7Fk/</a><br>4.2.1.2. 什么是闭包<br>看一下这段代码，并解释一下为什么按Button1时没有alert出“This is button: 1”，如何修改：<br><a href="http://jsfiddle.net/FDPj3/1/" target="_blank" rel="noopener">http://jsfiddle.net/FDPj3/1/</a><br>4.2.1.3. 了解并学习一个JS框架<br>jQuery<br>ExtJS<br>ArgularJS<br>4.2.1.4. 写一个Greasemonkey插件</p><p><a href="http://en.wikipedia.org/wiki/Greasemonkey" target="_blank" rel="noopener">http://en.wikipedia.org/wiki/Greasemonkey</a><br>4.2.1.5. 学习node.js<br><a href="http://nodejs.org/" target="_blank" rel="noopener">http://nodejs.org/</a><br>4.2.2. 学习html5<br>ArgularJS，<a href="https://docs.angularjs.org/api" target="_blank" rel="noopener">https://docs.angularjs.org/api</a><br>4.2.3. 参考资料<br><a href="http://www.ecmascript.org/" target="_blank" rel="noopener">http://www.ecmascript.org/</a><br><a href="http://jsfiddle.net/" target="_blank" rel="noopener">http://jsfiddle.net/</a><br><a href="http://jsbin.com/" target="_blank" rel="noopener">http://jsbin.com/</a><br><a href="http://runjs.cn/" target="_blank" rel="noopener">http://runjs.cn/</a><br><a href="http://userscripts.org/" target="_blank" rel="noopener">http://userscripts.org/</a><br>五、 推荐书籍<br>《深入Java虚拟机》<br>《深入理解Java虚拟机》<br>《Effective Java》<br>《七周七语言》<br>《七周七数据》<br>《Hadoop技术内幕》<br>《Hbase In Action》<br>《Mahout In Action》<br>《这就是搜索引擎》<br>《Solr In Action》<br>《深入分析Java Web技术内幕》<br>《大型网站技术架构》<br>《高性能MySQL》<br>《算法导论》<br>《计算机程序设计艺术》<br>《代码大全》<br>《JavaScript权威指南》</p>]]></content>
    
    <summary type="html">
    
      Java工程师成神之路
    
    </summary>
    
    
      <category term="Java" scheme="https://us-forever.com/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>say something to myself</title>
    <link href="https://us-forever.com/2017/11/23/say-something-to-myself/"/>
    <id>https://us-forever.com/2017/11/23/say-something-to-myself/</id>
    <published>2017-11-23T09:54:08.000Z</published>
    <updated>2018-01-09T09:58:05.815Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>好久没有写博客了，大概是没有时间，大概是懒吧。<br>在自己看来，时间还是很多的，要看你去做什么事情。</p></blockquote><blockquote><p>这段时间，自己经历了很多，出去玩了一趟，请了几天的假，然后换了一家公司，在上家公司辞职后，这家公司上班前，发生了很多有趣的事情。<br><a id="more"></a></p></blockquote><table><thead><tr><th>NO</th><th>Thing</th></tr></thead><tbody><tr><td>1</td><td>打了几天游戏，发现自己变成了网民</td></tr><tr><td>2</td><td>捡了一个iPad,给了网吧老板，老板表扬我给我加了200网费</td></tr><tr><td>3</td><td>上家公司的一个老板听说我离职，想挖我过去，给我很多，但是工作太累被我拒绝，拒绝的原因其实也有这家公司的原因，现在有时候会后悔，有时候也不会在意这个。</td></tr><tr><td>4</td><td>去二姐家看孩子，也看见了大姑，她消瘦了很多</td></tr><tr><td>5</td><td>上班第一天就去了上海出差，每次来上海都下雨，走的时候也下着小雨</td></tr></tbody></table><p>这几天突然想起那个女孩，有时候会很想，也许还是没有忘记她，依然喜欢她，但是出于我们的这种关系，我很想联系她，但是不敢联系。想到即使联系了一阵嘘寒问暖之后，也不知该说些什么。</p><p>也许人生就是这样，有些东西就是无法触及的。但是我还对此抱有希望吧。</p>]]></content>
    
    <summary type="html">
    
      say something to myself
    
    </summary>
    
    
      <category term="随笔" scheme="https://us-forever.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>怀念那些我喜欢的经典</title>
    <link href="https://us-forever.com/2017/10/25/%E6%80%80%E5%BF%B5%E9%82%A3%E4%BA%9B%E6%88%91%E5%96%9C%E6%AC%A2%E7%9A%84%E7%BB%8F%E5%85%B8/"/>
    <id>https://us-forever.com/2017/10/25/怀念那些我喜欢的经典/</id>
    <published>2017-10-25T09:53:09.000Z</published>
    <updated>2018-01-09T09:53:32.001Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>昨晚一时兴起，特别想看之前看过的一部电影，然后就下载了下来，当时已经是1点多了，然后还是禁不住看了起来，还是被故事中的人物和情节所感动。<br>希望自己也能够拥有那样的爱情吧。</p></blockquote>]]></content>
    
    <summary type="html">
    
      怀念那些我喜欢的经典
    
    </summary>
    
    
      <category term="随笔" scheme="https://us-forever.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>《Thinking in java》读书笔记(21)</title>
    <link href="https://us-forever.com/2017/10/24/%E3%80%8AThinking-in-java%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-21/"/>
    <id>https://us-forever.com/2017/10/24/《Thinking-in-java》读书笔记-21/</id>
    <published>2017-10-24T05:58:39.000Z</published>
    <updated>2018-01-15T06:27:30.169Z</updated>
    
    <content type="html"><![CDATA[<h1 id="第四章-控制执行流程"><a href="#第四章-控制执行流程" class="headerlink" title="第四章 控制执行流程"></a>第四章 控制执行流程</h1><p><strong>就像有知觉的生物一样，程序必须在执行过程中控制它的世界，并做出选择。在Java中，你要使用执行控制语句来做出选择。</strong><br>Java使用了C的所有流程控制语句，所以如果读者以前用过C或者C++编程，那么应该非常熟悉了，大多数过程编程语言都具有某些形式的控制语句，它们通常在各种语言间是交迭的。在Java中,涉及的关键字包括<strong>if-else、while、do-while、for、return、break</strong>以及选择语句<strong>switch</strong>。然而Java并不支持<strong>goto</strong>.</p><h2 id="4-1true和false"><a href="#4-1true和false" class="headerlink" title="4.1true和false"></a>4.1true和false</h2><p>所有的语句都利用表达式的真假来决定是否执行。<br>在Java中不支持使用数字作为布尔值来使用。虽然在C和C++中是允许的。</p><h2 id="4-2if-else"><a href="#4-2if-else" class="headerlink" title="4.2if-else"></a>4.2if-else</h2><p>if-else语句是控制程序流程中最基本的形式。其中else是可选的，所以可按下述两种形式来使用if:<br>if(Bollean-expression)<br>statement<br>或<br>if(Bollean-expression)<br>statement<br>else<br>statement</p><p>其中布尔表达式必须产生布尔值。如下判断数大数小的例子：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> alljavaexample;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span> IfElse</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> yaxuSong</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2017年10月24日 下午3:40:08 </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IfElse</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">test</span><span class="params">(<span class="keyword">int</span> num1,<span class="keyword">int</span> num2)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(num1&gt;=num2)</span><br><span class="line"><span class="keyword">return</span> num1;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="keyword">return</span> num2;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">System.out.println(test(<span class="number">10</span>,<span class="number">5</span>));</span><br><span class="line">System.out.println(test(<span class="number">6</span>,<span class="number">11</span>));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>output:</p><blockquote><p>10<br>11</p></blockquote><h2 id="4-3迭代"><a href="#4-3迭代" class="headerlink" title="4.3迭代"></a>4.3迭代</h2><p>while、do-while和for用来控制循环，有时将他们划分为迭代语句（iteration statement）。语句会重复执行，直到起控制作用的布尔表达式（Booleanexperssion）得到“假”的结果为止。<br>while循环到的格式如下：<br>while(Boolean-experssion)<br>statement</p><h3 id="4-3-1-do-while"><a href="#4-3-1-do-while" class="headerlink" title="4.3.1 do-while"></a>4.3.1 do-while</h3><p>do-while的格式如下：<br>do<br>statement<br>while(Boolean-experssion);<br>while和do-while语句的区别就是do-while中的语句至少会执行一次。即便第一次表达式的值false，也会先执行一次。</p><h3 id="4-3-2-for"><a href="#4-3-2-for" class="headerlink" title="4.3.2 for"></a>4.3.2 for</h3><p>for循环可能是最经常使用的迭代形式，这种在第一次迭代之前要进行初始化。随后，它会进行条件测试，而且在每一次迭代结束时，进行某种形式的“步进”，for循环格式如下:<br>for(initialization;Boolean-experssion;step)<br>statement<br>初始化（initialization）表达式、布尔表达式（Boolean-experssion）,或者步进（step）运算，都可以为空。每次迭代前会测试布尔表达式。若为true才会执行。</p><h3 id="4-3-3-逗号操作符"><a href="#4-3-3-逗号操作符" class="headerlink" title="4.3.3 逗号操作符"></a>4.3.3 逗号操作符</h3><p>逗号操作符的作用是用来分隔函数的不同参数。<br>Java中唯一用到逗号操作符的地方就是for循环的控制表达式。在控制表达式的初始化和步进控制部分，可以使用一系列由逗号分隔的语句；而且那些语句会独立执行。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> alljavaexample;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span> CommaOperator</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> yaxuSong</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2017年10月24日 下午4:15:57</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CommaOperator</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>, j = i + <span class="number">10</span>; i &lt; <span class="number">5</span>; i++, j = i * <span class="number">2</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">"i = "</span> + i + <span class="string">" j = "</span> + j);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>输出：</p><blockquote><p>i = 1 j = 11<br>i = 2 j = 4<br>i = 3 j = 6<br>i = 4 j = 8</p></blockquote>]]></content>
    
    <summary type="html">
    
      《Thinking in java》读书笔记(21)
    
    </summary>
    
    
      <category term="读书笔记" scheme="https://us-forever.com/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
      <category term="Java" scheme="https://us-forever.com/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>国庆快乐</title>
    <link href="https://us-forever.com/2017/10/01/%E5%9B%BD%E5%BA%86%E5%BF%AB%E4%B9%90/"/>
    <id>https://us-forever.com/2017/10/01/国庆快乐/</id>
    <published>2017-10-01T09:52:09.000Z</published>
    <updated>2018-01-09T09:52:49.912Z</updated>
    
    <content type="html"><![CDATA[<p>国庆快乐，马上就要回家的心情还是很激动的！</p><p>当然也少不了中秋快乐。</p>]]></content>
    
    <summary type="html">
    
      国庆快乐
    
    </summary>
    
    
      <category term="随笔" scheme="https://us-forever.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>《Thinking in java》读书笔记(20)</title>
    <link href="https://us-forever.com/2017/09/30/%E3%80%8AThinking-in-java%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-20/"/>
    <id>https://us-forever.com/2017/09/30/《Thinking-in-java》读书笔记-20/</id>
    <published>2017-09-30T05:58:36.000Z</published>
    <updated>2018-01-15T06:24:05.762Z</updated>
    
    <content type="html"><![CDATA[<h2 id="3-14使用操作符时常犯的错误"><a href="#3-14使用操作符时常犯的错误" class="headerlink" title="3.14使用操作符时常犯的错误"></a>3.14使用操作符时常犯的错误</h2><p>使用操作符时一个常犯的错误就是，即使对表达式如何计算结果不确定，也不愿意使用括号。<br>这个问题在Java中仍然存在。<br>在C和C++中，一个特别常见的错误<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span>(x = y)&#123;</span><br><span class="line"><span class="comment">//do something</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>很明显是“==”而不是“=”，但是因为C和C++的机制，如果y是一个非0值m,这会造成一个死循环。而在java中它期望的是一个boolean结果，而int不会转成boolean，自然会报错的。</p><h2 id="3-15-类型转换器操作符"><a href="#3-15-类型转换器操作符" class="headerlink" title="3.15 类型转换器操作符"></a>3.15 类型转换器操作符</h2><p><strong>类型转换</strong>（cast）的原意就是“模型铸造”。在适当得时候，Java会将一种数据类型自动转换成另一种。例如，假设我们为浮点变量赋以一个整数值，编译器会自动将int转为float。类型转换允许我们显式地进行这种类型转换，或者在不能自动进行转换的时候进行强制转换。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> i = <span class="number">200</span>;</span><br><span class="line"><span class="keyword">long</span> lon= (<span class="keyword">long</span>)i;</span><br></pre></td></tr></table></figure></p><p>在C和C++中，类型转换有时会让人头痛。但在Java中，类型转换则是一种比较安全的操作。然而，如果执行一种名为<strong>窄化转换</strong>（narrowing conversion）的操作（也就是说，将能容纳更多信息的数据类型转换成无法 容纳那么多信息的类型），就会可能面临信息丢失的危险。此时编译器会强制我们去进行类型转换。而对于<strong>扩展转换</strong>（widening conversion）,则不必进行显示转换。<br>Java允许我们把任何基本数据类型转换成别的基本数据类型，布尔类型除外。</p><h3 id="3-15-1-截尾和舍入"><a href="#3-15-1-截尾和舍入" class="headerlink" title="3.15.1 截尾和舍入"></a>3.15.1 截尾和舍入</h3><p>在执行窄化转换时，必须注意截尾与舍入的问题。例如浮点型转整型。<br>29.7转化成int,结果不是30而是29。<br>因为float或者double转为整型时进行的是截尾，如果想要进行舍入需要使用<strong>java.lang.Math</strong>中的<strong>round()</strong>方法。</p><h3 id="3-15-2-提升"><a href="#3-15-2-提升" class="headerlink" title="3.15.2 提升"></a>3.15.2 提升</h3><p>如果对基本数据类型执行算术运算或按位运算，大家会发现，只要类型比int小（char、byte、short），那么在运算前，这些值会自动转换成int。最终的结果也是int。如果想把结果赋值给小的类型，就必须使用类型转换。</p><h2 id="3-16-Java没有sizeof"><a href="#3-16-Java没有sizeof" class="headerlink" title="3.16 Java没有sizeof"></a>3.16 Java没有sizeof</h2><p>在C和C++中，<strong>sizeof()</strong>操作符可以告诉我们数据项分配的字节数。在C和C++中，需要使用<strong>sizeof()</strong>的最大原因是为了“<strong>移植</strong>”。不同的数据类型在不同的机器上可能会有不同的大小。<br>Java不需要<strong>sizeof()</strong>是因为所有数据类型在所有机器的大小都是相同的。我们不必考虑移植问题——————因为它已经被设计在语言中了。</p><h2 id="3-17-操作符小结"><a href="#3-17-操作符小结" class="headerlink" title="3.17 操作符小结"></a>3.17 操作符小结</h2><p>能够对布尔型值进行的运算非常有限。我们只能赋予它true和false值，并测试它为真还是为假，而不能将布尔值相加，或对布尔值进行其它运算。<br>我们要在类型的提升上多多关注。</p><h2 id="3-18-总结"><a href="#3-18-总结" class="headerlink" title="3.18 总结"></a>3.18 总结</h2><p>这一张花了很多时间，主要是自己的时间不是很多，希望自己能在2018年之前看完一半吧。</p>]]></content>
    
    <summary type="html">
    
      《Thinking in java》读书笔记(20)
    
    </summary>
    
    
      <category term="读书笔记" scheme="https://us-forever.com/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
      <category term="Java" scheme="https://us-forever.com/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>《Thinking in java》读书笔记(19)</title>
    <link href="https://us-forever.com/2017/09/27/%E3%80%8AThinking-in-java%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-19/"/>
    <id>https://us-forever.com/2017/09/27/《Thinking-in-java》读书笔记-19/</id>
    <published>2017-09-27T05:58:21.000Z</published>
    <updated>2018-01-15T06:11:40.302Z</updated>
    
    <content type="html"><![CDATA[<h2 id="3-11移位操作符"><a href="#3-11移位操作符" class="headerlink" title="3.11移位操作符"></a>3.11移位操作符</h2><p>移位操作符只可用来处理整数类型（基本类型的一种）。左移位操作符（&lt;&lt;）能按照操作符右侧指定的位数将操作符左边的操作数向左移动（在低位补0）。“有符号”右移操作符（&gt;&gt;）则按照操作符右侧指定的位数将操作符左边的操作数向右移。“有符号”右移位操作符使用“符号扩展”：若符号为正，则在高位插入0；若符号为负，则在高位插入1。Java中增加一种“无符号”右移位操作符（&gt;&gt;&gt;）,它使用“零扩展”：无论正负，都在高位插入0。这一操作符是C和C++中所没有的。<br><a id="more"></a><br>如果对<strong>char</strong>、<strong>byte</strong>和<strong>short</strong>进行移位操作,那么会将它们转换成int类型在进行操作，而且它的结果也是一个int值。只有右端低5位的值有用，因为int最大是32位。<br>若对long操作，其结果也是long值。只会用到右端6位，为了防止超过long的位数。<br>“移位”可与“等号”（&lt;&lt;=或&gt;&gt;=或&gt;&gt;&gt;=）组合使用。<br>有符号的数最高位是符号位：0为正，为负。</p><h2 id="3-12三元操作符if-else"><a href="#3-12三元操作符if-else" class="headerlink" title="3.12三元操作符if-else"></a>3.12三元操作符if-else</h2><p>三元操作符也成为条件操作符，它显得比较特别，因为它有三个操作数，但它确实属于操作符的一种，因为它最终也会生成一个值，这与if-else语句是不同的。其表达式采取下述形式：<br><strong>boolean-exp ? value0:value1</strong><br>如果boolean-exp(布尔表达式)的结果为true，就计算value0,而且这个计算结果也就是操作符最终产生的结果。如果boolean-exp的结果为true,就计算value1,同样，它的结果也就变成了最终的操作符的结果。<br>当然也可以用普通的if-else，但是三元操作符是代码变得更加简洁。尽管C(C中发明了该操作符)引以为傲的就是它是一种简练的语言。它的引入多半是为了高效编程，但是你如果频繁使用，可能会产生极差的可读性代码。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">TernaryIfElse</span><span class="params">(<span class="keyword">int</span> i)</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> i&lt;<span class="number">10</span> ? i : <span class="number">100</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">standardIfElse</span><span class="params">(<span class="keyword">int</span> i)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(i&lt;<span class="number">10</span>)</span><br><span class="line"><span class="keyword">return</span> i;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">100</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>可以看出两个方法的运算结果是一样的，但是TernaryIfElse显得更加紧凑，而standardIfElse更易于理解。而我们在使用过程中三元表达式也是多用于赋值。</p><h2 id="3-13-字符串操作符-和"><a href="#3-13-字符串操作符-和" class="headerlink" title="3.13 字符串操作符+和+="></a>3.13 字符串操作符+和+=</h2><p>这两个操作符在Java中可以是用来连接字符串。<br>这项功能在C++中是一个不错的主意，所以引入了<strong>操作符重载</strong>（operate overloading）,以便C++程序员可以为几乎所有的操作符增加功能。但是由于C++的一些限制，是的操作符重载变得非常复杂，而且实现起来需要考虑周全。虽然用Java实现起来比较容易，但是我们还是不会想C++和C#程序员那样实现自己的重载操作符。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">String s=<span class="string">"sss"</span>;</span><br><span class="line"><span class="keyword">int</span> a = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">int</span> b = <span class="number">200</span>;</span><br><span class="line">System.out.println(a + s + b);</span><br><span class="line"><span class="comment">// Output:100sss200</span></span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      《Thinking in java》读书笔记(19)
    
    </summary>
    
    
      <category term="读书笔记" scheme="https://us-forever.com/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
      <category term="Java" scheme="https://us-forever.com/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>《Thinking in java》读书笔记(18)</title>
    <link href="https://us-forever.com/2017/09/18/%E3%80%8AThinking-in-java%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-18/"/>
    <id>https://us-forever.com/2017/09/18/《Thinking-in-java》读书笔记-18/</id>
    <published>2017-09-18T05:58:17.000Z</published>
    <updated>2018-01-15T06:39:48.522Z</updated>
    
    <content type="html"><![CDATA[<h2 id="3-9直接常量"><a href="#3-9直接常量" class="headerlink" title="3.9直接常量"></a>3.9直接常量</h2><p>直接常量是的编译器准确的知道要生成什么样的类型，但是有的时候确实模棱两可。发生这种情况，一般情况下我们需要对编译器加以适当的“指导”。</p><p>我们可以在常量后边加一些后缀字符标志它的类型。<br>若为大写（或小写）的L，代表Long(但是，是用小写字幕l容易造成混淆，因为它看起来很像数字1)。大写（或小写）字母F，代表float，大写（或小写）字母D，代表double。<br>十六进制则是用前缀0x或（0X），后边跟随0-9或小写（或大写）的a-f来代表。<br>八进制则是以0位前缀，后边跟随0-7的数字。</p><table><thead><tr><th>名称</th><th>前缀</th><th>后缀</th><th>字符</th></tr></thead><tbody><tr><td>Long</td><td></td><td>L/l</td><td>0-9</td></tr><tr><td>Double</td><td></td><td>D/d</td><td>0-9</td></tr><tr><td>Float</td><td></td><td>F/f</td><td>0-9</td></tr><tr><td>十六进制</td><td>0x/0X</td><td></td><td>0-9,a-f/A-F</td></tr><tr><td>八进制</td><td>0</td><td></td><td>0-7</td></tr></tbody></table><a id="more"></a><h3 id="3-9-1-指数记数法"><a href="#3-9-1-指数记数法" class="headerlink" title="3.9.1 指数记数法"></a>3.9.1 指数记数法</h3><p>Java采用了一种很不直观的记数法来表示指数。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">float</span> expFloat = <span class="number">1.39e-43f</span>;</span><br><span class="line">expFloat = <span class="number">1.39E-43f</span>;</span><br><span class="line"><span class="keyword">double</span> expDouble = <span class="number">47e47</span>d;</span><br><span class="line"><span class="keyword">double</span> expDouble2 = <span class="number">47e47</span>;</span><br></pre></td></tr></table></figure></p><p>我们知道在科学与工程领域，“e”代表自然对数的技基数，约等于2.718（Java中的Math.E给出了更精确的double值）。<br><img src="/img/example1.png" alt="example"><br>这种用法正是C、C++以及Java中都存在的。<br>在Java中看到1.39e-43，表示的是1.39*10（-43）.</p><h2 id="3-10-按位操作符"><a href="#3-10-按位操作符" class="headerlink" title="3.10 按位操作符"></a>3.10 按位操作符</h2><p>按位操作符会对两个参数中对应的位执行布尔代数运算，并最终生成一个结果。<br>对应的规则是：</p><table><thead><tr><th>名称</th><th>操作</th></tr></thead><tbody><tr><td>与(&amp;)</td><td>如果两个输入位都是1，则输出1否则输出0</td></tr><tr><td>或(丨)</td><td>如果两个输入位有一个是1，则输出1否则输出0</td></tr><tr><td>异或(^)</td><td>如果两个输入位某一个是1，但不全是1，则输出1</td></tr><tr><td>非(~)</td><td>也成取反操作，属于一元操作符</td></tr></tbody></table><p>例子：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span> AutoInc</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> yaxuSong</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2017年9月11日 下午5:50:18 </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AutoInc</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> front=<span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> back=<span class="number">14</span>;</span><br><span class="line"><span class="keyword">int</span> res1=front&amp;back;</span><br><span class="line"><span class="keyword">int</span> res2=front|back;</span><br><span class="line"><span class="keyword">int</span> res3=front^back;</span><br><span class="line"><span class="keyword">int</span> res4=~front;</span><br><span class="line">System.out.println(Integer.toBinaryString(front)+<span class="string">"&amp;"</span>+Integer.toBinaryString(back)+<span class="string">"="</span>+Integer.toBinaryString(res1));</span><br><span class="line">System.out.println(Integer.toBinaryString(front)+<span class="string">"|"</span>+Integer.toBinaryString(back)+<span class="string">"="</span>+Integer.toBinaryString(res2));</span><br><span class="line">System.out.println(Integer.toBinaryString(front)+<span class="string">"^"</span>+Integer.toBinaryString(back)+<span class="string">"="</span>+Integer.toBinaryString(res3));</span><br><span class="line">System.out.println(<span class="string">"~"</span>+Integer.toBinaryString(front)+<span class="string">"="</span>+Integer.toBinaryString(res4));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>Output:</p><blockquote><p>1010&amp;1110=1010<br>1010|1110=1110<br>1010^1110=100<br>~1010=11111111111111111111111111110101</p></blockquote><p>按位操作符也可与等号(=)联合使用，&amp;=、|=、^=都是合法的，而~是一元操作符，不呢个和=连用。<br>我们将布尔类型作为一种单比特值对待，所以我们可以使用按位“与”、按位“或”、按位“异或”。但不能使用按位“非”。<br>对于布尔值，它们与逻辑操作符的结果相同，但是他们不会中途“短路”。<br>虽然存在按位“异或”，但是我们并不能用它来进行“逻辑”操作。<br>例子:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span> compare</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> yaxuSong</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2017年9月18日 上午12:18:16 </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">compare</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">t1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">System.out.println(<span class="string">"t1运行了"</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">t2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">System.out.println(<span class="string">"t2运行了"</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">t3</span><span class="params">()</span> </span>&#123;</span><br><span class="line">System.out.println(<span class="string">"t3运行了"</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">t4</span><span class="params">()</span> </span>&#123;</span><br><span class="line">System.out.println(<span class="string">"t4运行了"</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">System.out.println(<span class="string">"结果:"</span>+ (t1()&amp;t2()));</span><br><span class="line">System.out.println(<span class="string">"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@"</span>);</span><br><span class="line">System.out.println(<span class="string">"结果:"</span>+ (t2()|t4()));</span><br><span class="line">System.out.println(<span class="string">"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@"</span>);</span><br><span class="line">System.out.println(<span class="string">"结果:"</span>+ (t2()&amp;t4()));</span><br><span class="line">System.out.println(<span class="string">"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@"</span>);</span><br><span class="line">System.out.println(<span class="string">"结果:"</span>+ (t3()|t4()));</span><br><span class="line">System.out.println(<span class="string">"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>Output</p><blockquote><p>t1运行了<br>t2运行了<br>结果:false<br>@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br>t2运行了<br>t4运行了<br>结果:true<br>@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br>t2运行了<br>t4运行了<br>结果:true<br>@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br>t3运行了<br>t4运行了<br>结果:true<br>@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</p></blockquote>]]></content>
    
    <summary type="html">
    
      《Thinking in java》读书笔记(18)
    
    </summary>
    
    
      <category term="读书笔记" scheme="https://us-forever.com/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
      <category term="Java" scheme="https://us-forever.com/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>《Thinking in java》读书笔记(17)</title>
    <link href="https://us-forever.com/2017/09/18/%E3%80%8AThinking-in-java%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-17/"/>
    <id>https://us-forever.com/2017/09/18/《Thinking-in-java》读书笔记-17/</id>
    <published>2017-09-18T05:54:24.000Z</published>
    <updated>2018-01-15T05:56:30.753Z</updated>
    
    <content type="html"><![CDATA[<h2 id="3-8逻辑操作符"><a href="#3-8逻辑操作符" class="headerlink" title="3.8逻辑操作符"></a>3.8逻辑操作符</h2><p>逻辑操作符“与”（&amp;&amp;）、或（||）、非（！）能根据参数的逻辑关系，生成一个布尔值（true或fasle）。<br>“与”、“或”、“非”操作只能作用于布尔值。与C++不同的的是：<strong>不可将一个非布尔值当做布尔值在逻辑表达式中使用。</strong><br>如果在应该使用String值的地方使用布尔值，布尔值会自动转换成适当的文本形式（false或true）。</p><h3 id="3-8-1-短路"><a href="#3-8-1-短路" class="headerlink" title="3.8.1 短路"></a>3.8.1 短路</h3><p><strong>当使用逻辑操作符时，我们会遇到一种“短路”的现象。即一旦能够明确无误的确定整个表达式的值，就不再执行表达式剩下的部分。</strong><br>||只要运算第一个值，得到true，就不再计算后边的值。<br>&amp;&amp;只要运算第一个值，得到false,就不再计算后边的值。<br>例子：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span> compare</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> yaxuSong</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2017年9月18日 上午12:18:16 </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">compare</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">t1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">System.out.println(<span class="string">"t1运行了"</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">t2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">System.out.println(<span class="string">"t2运行了"</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">t3</span><span class="params">()</span> </span>&#123;</span><br><span class="line">System.out.println(<span class="string">"t3运行了"</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">t4</span><span class="params">()</span> </span>&#123;</span><br><span class="line">System.out.println(<span class="string">"t4运行了"</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(t1()&amp;&amp;t2());</span><br><span class="line">System.out.println(<span class="string">"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@"</span>);</span><br><span class="line"><span class="keyword">if</span>(t2()||t4());</span><br><span class="line">System.out.println(<span class="string">"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@"</span>);</span><br><span class="line"><span class="keyword">if</span>(t2()&amp;&amp;t4());</span><br><span class="line">System.out.println(<span class="string">"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@"</span>);</span><br><span class="line"><span class="keyword">if</span>(t3()||t4());</span><br><span class="line">System.out.println(<span class="string">"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>Output:</p><blockquote><p>t1运行了<br>@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br>t2运行了<br>@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br>t2运行了<br>t4运行了<br>@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<br>t3运行了<br>t4运行了<br>@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</p></blockquote>]]></content>
    
    <summary type="html">
    
      《Thinking in java》读书笔记(17)
    
    </summary>
    
    
      <category term="读书笔记" scheme="https://us-forever.com/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
      <category term="Java" scheme="https://us-forever.com/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>《Thinking in java》读书笔记(16)</title>
    <link href="https://us-forever.com/2017/09/11/%E3%80%8AThinking-in-java%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-16/"/>
    <id>https://us-forever.com/2017/09/11/《Thinking-in-java》读书笔记-16/</id>
    <published>2017-09-11T05:48:53.000Z</published>
    <updated>2018-01-15T05:57:30.501Z</updated>
    
    <content type="html"><![CDATA[<h2 id="3-6自动递减和递增"><a href="#3-6自动递减和递增" class="headerlink" title="3.6自动递减和递增"></a>3.6自动递减和递增</h2><p>和C类似，Java提供了大量的快捷运算，这些快捷运算使编程方便，同时也使得代码更容易阅读，但是有时可能使代码阅读起来更困难。<br>递增和递减算是两种不错的快捷运算（常称为“自动递增”和“自动递减”）。<br>表达式 ++a就等价于a+=1(a为int值);<br>而递增和递减又分为“<strong>前缀式</strong>”和“<strong>后缀式</strong>”。<br>对于前缀式递增和递减（++a和–a）是会先执行加加和减减再运算。而后缀式（a++和a–）是先运算再加加和减减。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span> AutoInc</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> yaxuSong</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2017年9月11日 下午5:50:18 </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AutoInc</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> i =<span class="number">1</span>;</span><br><span class="line">System.out.println(<span class="string">"i :"</span> +i );</span><br><span class="line">System.out.println(<span class="string">"++i :"</span> + ++i );</span><br><span class="line">System.out.println(<span class="string">"i++ :"</span> + i++ );</span><br><span class="line">System.out.println(<span class="string">"i :"</span> +i );</span><br><span class="line">System.out.println(<span class="string">"--i :"</span> + --i );</span><br><span class="line">System.out.println(<span class="string">"i-- :"</span> + i-- );</span><br><span class="line">System.out.println(<span class="string">"i :"</span> +i );</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>Output:</p><blockquote><p>i :1<br>++i :2<br>i++ :2<br>i :3<br>–i :2<br>i– :2<br>i :1</p></blockquote><p>从中可以看出，对于前缀形式，我们在执行完运算后才得到值。但是对于后缀形式，则是在运算运算执行之前就得到值。<br><em>递增操作符真是C++这个名字的一种解释，暗示着“超越C一步”。在早期的一次有关Java的演讲中，Bill Joy（Java创创始人之一）声称“Java=C++–”意味着Java已除去C++中一些困难而又没有必要的东西，成为了一种更精简的语言。</em></p><h2 id="3-7关系操作符"><a href="#3-7关系操作符" class="headerlink" title="3.7关系操作符"></a>3.7关系操作符</h2><p>关系操作符声称的是一个<strong>boolean</strong>（布尔）结果，它们计算的是操作数的值之间的关系。如果关系是真实的，关系表达式会生成<strong>true</strong>(真)，相反，会生成<strong>false</strong>(假)。关系操作符有：小于(&lt;)、大于(&gt;)、小于或等于、(&lt;=)大于或等于（&gt;=）、等于（==）。<br><strong>等于或者不等于适用于所有的基本数据类型</strong>。而其他的不适用于boolean类型。因为boolean值只能为true和false。“大于”和“小于”没有实际意义。</p><h3 id="3-7-1测试对象的等价性"><a href="#3-7-1测试对象的等价性" class="headerlink" title="3.7.1测试对象的等价性"></a>3.7.1测试对象的等价性</h3><p>关系操作符==和!=也适用于所有对象。但这两个操作符通常会使第一次接触Java的程序员赶到迷惑，下面给出一个例子：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span> Eqivalence</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> yaxuSong</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2017年9月17日 下午11:39:44 </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Eqivalence</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">Integer n1 = <span class="keyword">new</span> Integer(<span class="number">47</span>);</span><br><span class="line">Integer n2 = <span class="keyword">new</span> Integer(<span class="number">47</span>);</span><br><span class="line">System.out.println(n1==n2);</span><br><span class="line">System.out.println(n1!=n2);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>Output:</p><blockquote><p>false<br>true</p></blockquote><p>实际上尽管他们的值相同，但是对象的引用却不相同，所以打印false和true。这和C++有所不同。而==和!=比较的就是对象引用。<br>这时如果我们相比较大小，可以使用所有对象都适用的equals()方法。<br>但这个却不适用于基本类型，基本类型可以直接使用==和!=即可。<br>如下两个例子：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span> Eqivalence</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> yaxuSong</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2017年9月17日 下午11:39:44 </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Eqivalence</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">Integer n1 = <span class="keyword">new</span> Integer(<span class="number">47</span>);</span><br><span class="line">Integer n2 = <span class="keyword">new</span> Integer(<span class="number">47</span>);</span><br><span class="line">System.out.println(n1.equals(n2));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>输出是true。我们验证了我们的说法。<br>第二个例子：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span> Eqivalence</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> yaxuSong</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2017年9月17日 下午11:39:44 </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Value</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Eqivalence</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">Value v1 = <span class="keyword">new</span> Value();</span><br><span class="line">Value v2 = <span class="keyword">new</span> Value();</span><br><span class="line">v1.i=v2.i=<span class="number">100</span>;</span><br><span class="line">System.out.println(v1.equals(v2));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>结果是false。这次的结果是不是很费解？这是由于equals()方法默认行为是引用比较。所以自己除非在新的类中覆盖equals()方法，否则不可能表现出我们所希望的行为结果。<br>下面给出一个重写equals()方法的例子：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span> Eqivalence</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> yaxuSong</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2017年9月17日 下午11:39:44 </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Value</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> i;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(obj <span class="keyword">instanceof</span> Value &amp;&amp; ((Value) obj).i==<span class="keyword">this</span>.i)</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Eqivalence</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">Value v1 = <span class="keyword">new</span> Value();</span><br><span class="line">Value v2 = <span class="keyword">new</span> Value();</span><br><span class="line">v1.i=v2.i=<span class="number">1</span>;</span><br><span class="line">System.out.println(v1.equals(v2));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      《Thinking in java》读书笔记(16)
    
    </summary>
    
    
      <category term="读书笔记" scheme="https://us-forever.com/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
      <category term="Java" scheme="https://us-forever.com/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>回忆总是会使我泪流满面</title>
    <link href="https://us-forever.com/2017/09/05/%E5%9B%9E%E5%BF%86%E6%80%BB%E6%98%AF%E4%BC%9A%E4%BD%BF%E6%88%91%E6%B3%AA%E6%B5%81%E6%BB%A1%E9%9D%A2/"/>
    <id>https://us-forever.com/2017/09/05/回忆总是会使我泪流满面/</id>
    <published>2017-09-05T09:46:42.000Z</published>
    <updated>2018-01-09T09:48:59.825Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>今天想起一些东西，让我很难受。</p></blockquote>]]></content>
    
    <summary type="html">
    
      回忆总是会使我泪流满面
    
    </summary>
    
    
      <category term="随笔" scheme="https://us-forever.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>迷茫</title>
    <link href="https://us-forever.com/2017/09/01/%E8%BF%B7%E8%8C%AB/"/>
    <id>https://us-forever.com/2017/09/01/迷茫/</id>
    <published>2017-09-01T09:45:56.000Z</published>
    <updated>2018-01-09T09:46:25.465Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>刚刚加入了新的部门，对自己的前途有点堪忧。有点迷茫。</p></blockquote><p>不过我相信自己,所有的还是要靠自己。所以不管怎样都要加油！</p>]]></content>
    
    <summary type="html">
    
      迷茫
    
    </summary>
    
    
      <category term="随笔" scheme="https://us-forever.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>一个人的情人节</title>
    <link href="https://us-forever.com/2017/08/28/%E4%B8%80%E4%B8%AA%E4%BA%BA%E7%9A%84%E6%83%85%E4%BA%BA%E8%8A%82/"/>
    <id>https://us-forever.com/2017/08/28/一个人的情人节/</id>
    <published>2017-08-28T09:42:15.000Z</published>
    <updated>2018-01-09T09:45:37.878Z</updated>
    
    <content type="html"><![CDATA[<p> <pre></pre></p><hr><p> \ \    / /    | |             | |  (_)            ( )         | |                / _|<br>  \ \  / /<strong> _ | |  _</strong>  _ <strong>  | |_  _  _ </strong>    <strong>_|/ _</strong>    <strong>| |  </strong> _  _   _  | |_  <strong>_   _ </strong>    <strong>_   _ </strong>    <strong>_   _ </strong>    <strong>_  _ </strong>  <strong>_   _</strong>   _ <strong><br>   \ \/ // _` || | / _ | ‘_ \ | </strong>|| || ‘_ \  / _ \ / <strong>|  / _<code>| / _</code> || | | | |  _|/ _ \ | ‘</strong>|  / _ \ | ‘_ \  / _ \ | ‘_ \  / _ | ‘<strong>|/ </strong>| / _ \ | ‘_ \<br>    \  /| (<em>| || ||  __/| | | || |</em> | || | | ||  <strong>/ \</strong> \ | (<em>| || (</em>| || |<em>| | | | | (</em>) || |    | (<em>) || | | ||  __/ | |</em>) ||  <strong>/| |   \</strong> | (<em>) || | | |<br>     \/  __,</em>||_| _<strong>||<em>| |</em>| \</strong>||_||<em>| |</em>| _<strong>| |_</strong>/  __,<em>| __,</em>| _<em>, | |</em>|  _<strong>/ |<em>|     \</em></strong>/ |<em>| |</em>| _<strong>| | .</strong>/  _<strong>||<em>|   |</em></strong>/ _<strong>/ |<em>| |</em>|                                                                            </strong>/ |                                        | |<br>                                                                          |___/                                         |_|<br><br><a id="more"></a><br>一年七夕到，没想到是一个人过。不知道下一次的2.14，下一次的七夕，会不会有一个人来到我的身旁。</p><p><br><br><br><br><br><br><br><br><br><br><br><br><br></p><br><pre><br><br><p>.-./<code>)         .–.      .–.   <strong>__    .-./</strong></code>) ,———.            <strong></strong>        ,—–.      <strong><em>    </em>         ,—.    ,—.   <strong></strong>     <strong>  </strong></strong>..–’<br>\ .-.’)        |  |<em>     |  | .’  <strong> <code>. \ .-.&#39;)\          \           \   \   /  /.&#39;  .-,  &#39;.  .&#39;   |  | |        |    \  /    |   \   \   /  /|        |<br>/</code>-‘ \        | </strong></em>( )<em>   |  |/   ‘  \  \/ <code>-&#39; \</code>–.  ,—‘            \  </em>. /  ‘/ ,-.|  \ <em> \ |   .’  | |        |  ,  \/  ,  |    \  </em>. /  ‘ |   .-‘  ‘<br> <code>-&#39;</code>“<code>|(_ o <em>)  |  ||</em>|  /  |</code>-‘<code>&quot;</code>    |   \                <em>( )</em> .’;  \  ‘<em> /  | :.’  ‘</em>  | |        |  |_   /|  |     <em>( )</em> .’  |.-‘.’   /<br> .—.         | (<em>,</em>) \ |  |   <em>.-<code>| .—.     :&lt;/em&gt; &lt;em&gt;:            __&lt;/em&gt;(&lt;em&gt; o &lt;/em&gt;)’ |  &lt;em&gt;</code>,/ \ </em>/  |’   ( .-.|        |  <em>( )</em>/ |  | <strong><em>(</em> o <em>)’      /   </em>/<br> |   |         |  |/    |  |.’   _    | |   |     (<em>I</em>)           |   |(<em>,</em>)’  : (  ‘_/ \   ;’ (<code>. _</code> /|        | (<em> o </em>) |  ||   |(<em>,</em>)’     .’.<em>( )</em><br> |   |         |  ‘  /\  <code>||  <em>( )</em>  | |   |    (<em>(=)</em>)          |</code>-‘  /    \ <code>&quot;/  \  ) / | (_ (_) <em>)        |  (</em>,_)  |  ||</code>-‘  /    .’  (<em>‘o.</em>)<br> |   |         |    /  \    |\ (<em> o </em>) / |   |     (<em>I</em>)            \      /      ‘. <em>/<code>&quot;.&#39;   \ /  . \ /        |  |      |  | \      /     |    (</code></em>,<em>)|<br> &#39;—&#39;         <code>---&amp;#39;</code>—` &#39;.(</em>,_).&#39;  &#39;—&#39;     &#39;—&#39;             `-..-&#39;         &#39;—–&#39;-‘<code>-&#39;&#39;         &#39;–&#39;      &#39;–&#39;</code>-..-‘      |<strong>___</strong></strong>| </p><br><p></p></pre><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><p></p>]]></content>
    
    <summary type="html">
    
      一个人的情人节
    
    </summary>
    
    
      <category term="随笔" scheme="https://us-forever.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>没有什么事情是办不到的，只怕你没法战胜自己</title>
    <link href="https://us-forever.com/2017/08/23/%E6%B2%A1%E6%9C%89%E4%BB%80%E4%B9%88%E4%BA%8B%E6%83%85%E6%98%AF%E5%8A%9E%E4%B8%8D%E5%88%B0%E7%9A%84%EF%BC%8C%E5%8F%AA%E6%80%95%E4%BD%A0%E6%B2%A1%E6%B3%95%E6%88%98%E8%83%9C%E8%87%AA%E5%B7%B1/"/>
    <id>https://us-forever.com/2017/08/23/没有什么事情是办不到的，只怕你没法战胜自己/</id>
    <published>2017-08-23T09:41:17.000Z</published>
    <updated>2018-01-09T09:42:02.021Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>没有什么是办不到的，就怕就走是自己退缩了。</p></blockquote><p>这几天自己做了很多东西，在业务上和企业开发上有了新的进展。第一次写开源的东西，查看文档，然后自己搞出来，虽然以前都弄过，不过这是第一次在很快的时间内搞出来。第一次和别人一起对接一个业务，分析相关问题可能出现的情况。最后完成任务。解决BUG。<br><a id="more"></a><br>有时候自己还是退缩的，但是发现你自己的强大远比自己想想的好的多。还是出现什么问题要敢于说出去，要主动去做。这样才行。</p><p>过几天就是七夕了，第一次一个人过七夕，然后给自己买了2个皮肤….就算是过了吧。</p><p>说起来皮肤的效果还是很不错的。</p><p>还有就是自己一定要在过年之前看完这个本书的一半，一定要完成这个任务，加油。</p>]]></content>
    
    <summary type="html">
    
      没有什么事情是办不到的，只怕你没法战胜自己
    
    </summary>
    
    
      <category term="随笔" scheme="https://us-forever.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>感觉最近有点霉运</title>
    <link href="https://us-forever.com/2017/08/07/%E6%84%9F%E8%A7%89%E6%9C%80%E8%BF%91%E6%9C%89%E7%82%B9%E9%9C%89%E8%BF%90/"/>
    <id>https://us-forever.com/2017/08/07/感觉最近有点霉运/</id>
    <published>2017-08-07T09:40:15.000Z</published>
    <updated>2018-01-09T09:40:54.520Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>感觉最近有点霉运啊……</p></blockquote><p>很难受啊，最近有点不顺，总是发生不该发生的事情，真的不知道怎么了，看来自己要多多注意了。<br><a id="more"></a><br>不要再继续了啊。</p>]]></content>
    
    <summary type="html">
    
      感觉最近有点霉运
    
    </summary>
    
    
      <category term="随笔" scheme="https://us-forever.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>确实感觉还是有点小累的</title>
    <link href="https://us-forever.com/2017/08/04/%E7%A1%AE%E5%AE%9E%E6%84%9F%E8%A7%89%E8%BF%98%E6%98%AF%E6%9C%89%E7%82%B9%E5%B0%8F%E7%B4%AF%E7%9A%84/"/>
    <id>https://us-forever.com/2017/08/04/确实感觉还是有点小累的/</id>
    <published>2017-08-04T09:39:29.000Z</published>
    <updated>2018-01-09T09:40:01.721Z</updated>
    
    <content type="html"><![CDATA[<p>之前记得不知道是谁和我说过，我们这个职业很好，他们每天很累，然后我们整天坐在办公室里边，风吹不到，雨淋不到，日晒不到。薪水还高。<br>但是想想，这种工作也不一定是那种不累的工作。难道你对累不累的评论标准就是这几样嘛？<br><a id="more"></a><br>每天坐在办公室里，不怕太阳☀晒，不怕大雨淋，不怕风吹，好像很好的样子，起始也有很多弊端，每天也是早期晚归，不一定比你们上班晚，下班早，而且大多数的情况还是加班多吧。每天8点起，12点睡？也许要比这个辛苦的多。坐在椅子上一直不动。累的脖子难受，背也酸疼，腰也难受……眼睛也承受不了。最多的感觉是比较饿……<br>想的事情和多，事情的逻辑也比较复杂。</p>]]></content>
    
    <summary type="html">
    
      确实感觉还是有点小累的
    
    </summary>
    
    
      <category term="随笔" scheme="https://us-forever.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>难受</title>
    <link href="https://us-forever.com/2017/08/01/%E9%9A%BE%E5%8F%97/"/>
    <id>https://us-forever.com/2017/08/01/难受/</id>
    <published>2017-08-01T09:38:38.000Z</published>
    <updated>2018-01-09T09:39:14.129Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>难受啊，我的阿寞永远离我而去了。想到故事的结局，没想到故事的情节。<br><a id="more"></a><br>昨晚要睡觉的时候突然发现这个电视剧怎么更新了？不是每周二凌晨么？哎，不得不为了看到新的剧情而熬夜了，突然发现说好的60集，缩水到54集了，很气啊。本打算能看很久，没想到这样就快要结束了。为什么电视剧总是那种不完美的结局？虽然故事的结尾是有点不开心，但是杜宇故事里边的人物来说算是圆满了。<br>对于我来说，故事里边男女主人公在一起的时间真的是太少了。我还是想她们在一起的时间多一点。</p></blockquote>]]></content>
    
    <summary type="html">
    
      难受
    
    </summary>
    
    
      <category term="随笔" scheme="https://us-forever.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>《Thinking in java》读书笔记(15)</title>
    <link href="https://us-forever.com/2017/08/01/%E3%80%8AThinking-in-java%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-15/"/>
    <id>https://us-forever.com/2017/08/01/《Thinking-in-java》读书笔记-15/</id>
    <published>2017-08-01T05:43:04.000Z</published>
    <updated>2018-01-15T05:46:09.225Z</updated>
    
    <content type="html"><![CDATA[<h1 id="第三章-操作符"><a href="#第三章-操作符" class="headerlink" title="第三章 操作符"></a>第三章 操作符</h1><h2 id="3-5算术操作符"><a href="#3-5算术操作符" class="headerlink" title="3.5算术操作符"></a>3.5算术操作符</h2><p>Java的基本算数操作符与其他大多数的程序设计语言时相同的。其中有：+、-、/、*、%。整数除法会直接去掉结果的小数位，而不是四舍五入的结果。<br>Java也使用一种来自C和C++的简化符号同时进行运算与赋值的操作。这要操作符后边紧跟一个等号来表示。<br>如：X+=4。</p><p>下面这个例子展示了各种算术操作符的用法:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span> MathOps</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> yaxuSong</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MathOps</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> </span>&#123;</span><br><span class="line"><span class="comment">// Create a seeded random number generator:</span></span><br><span class="line">Random rand = <span class="keyword">new</span> Random(<span class="number">47</span>);</span><br><span class="line"><span class="keyword">int</span> i, j, k;</span><br><span class="line"><span class="comment">// Choose a value from 1 to 100:</span></span><br><span class="line">j = rand.nextInt(<span class="number">100</span>) + <span class="number">1</span>;</span><br><span class="line">System.out.println(<span class="string">"j : "</span> + j);</span><br><span class="line">k = rand.nextInt(<span class="number">100</span>) + <span class="number">1</span>;</span><br><span class="line">System.out.println(<span class="string">"k : "</span> + k);</span><br><span class="line">i = j + k;</span><br><span class="line">System.out.println(<span class="string">"j + k : "</span> + i);</span><br><span class="line">i = j - k;</span><br><span class="line">System.out.println(<span class="string">"j - k : "</span> + i);</span><br><span class="line">i = k / j;</span><br><span class="line">System.out.println(<span class="string">"j / k : "</span> + i);</span><br><span class="line">i = k * j;</span><br><span class="line">System.out.println(<span class="string">"j * k : "</span> + i);</span><br><span class="line">i = k % j;</span><br><span class="line">System.out.println(<span class="string">"j % k : "</span> + i);</span><br><span class="line">j %= k;</span><br><span class="line">System.out.println(<span class="string">"j %= k : "</span> + j);</span><br><span class="line"><span class="comment">// Floating-point number tests:</span></span><br><span class="line"><span class="keyword">float</span> u, v, w; <span class="comment">// Applies to doubles, too</span></span><br><span class="line">v = rand.nextFloat();</span><br><span class="line">System.out.println(<span class="string">"v : "</span> + v);</span><br><span class="line">w = rand.nextFloat();</span><br><span class="line">System.out.println(<span class="string">"w : "</span> + w);</span><br><span class="line">u = v + w;</span><br><span class="line">System.out.println(<span class="string">"v + w : "</span> + u);</span><br><span class="line">u = v - w;</span><br><span class="line">System.out.println(<span class="string">"v - w : "</span> + u);</span><br><span class="line">u = v * w;</span><br><span class="line">System.out.println(<span class="string">"v * w : "</span> + u);</span><br><span class="line">u = v / w;</span><br><span class="line">System.out.println(<span class="string">"v / w : "</span> + u);</span><br><span class="line">u += v;</span><br><span class="line">System.out.println(<span class="string">"u += v : "</span> + u);</span><br><span class="line">u -= v;</span><br><span class="line">System.out.println(<span class="string">"u -= v : "</span> + u);</span><br><span class="line">u *= v;</span><br><span class="line">System.out.println(<span class="string">"u *= v : "</span> + u);</span><br><span class="line">u /= v;</span><br><span class="line">System.out.println(<span class="string">"u /= v : "</span> + u);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>程序输出Output：</p><blockquote><p>j : 59<br>k : 56<br>j + k : 115<br>j - k : 3<br>j / k : 0<br>j <em> k : 3304<br>j % k : 56<br>j %= k : 3<br>v : 0.5309454<br>w : 0.0534122<br>v + w : 0.5843576<br>v - w : 0.47753322<br>v </em> w : 0.028358962<br>v / w : 9.940527<br>u += v : 10.471473<br>u -= v : 9.940527<br>u *= v : 5.2778773<br>u /= v : 9.940527</p></blockquote><p>要生成数字，程序首先会创建一个Random类的对象。如果在创建过程中没有传递任何参数，那么Java就会将当前时间作为随机数生产器的种子，并由此程序每一次执行都产生不同的结果。<em>（用于随机数生成器的初始化值，随机数生产器对于特定的种子值总是产生相同的随机数序列。）</em></p><h3 id="3-5-1一元加、减操作符"><a href="#3-5-1一元加、减操作符" class="headerlink" title="3.5.1一元加、减操作符"></a>3.5.1一元加、减操作符</h3><p>一元加号(+)和减号(-)与二元减号加号用相同的符号。如<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x = -a;</span><br></pre></td></tr></table></figure></p><p>一元减号用于转变数据的符号，而一元加号只是为了与一元减号想对应，但是它唯一的作用仅仅是将较小的类型的操作数提升为int.</p>]]></content>
    
    <summary type="html">
    
      《Thinking in java》读书笔记(15)
    
    </summary>
    
    
      <category term="读书笔记" scheme="https://us-forever.com/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
      <category term="Java" scheme="https://us-forever.com/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>感觉慢慢的步入正轨了</title>
    <link href="https://us-forever.com/2017/07/31/%E6%84%9F%E8%A7%89%E6%85%A2%E6%85%A2%E7%9A%84%E6%AD%A5%E5%85%A5%E6%AD%A3%E8%BD%A8%E4%BA%86/"/>
    <id>https://us-forever.com/2017/07/31/感觉慢慢的步入正轨了/</id>
    <published>2017-07-31T09:34:55.000Z</published>
    <updated>2018-01-09T09:36:57.039Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>感觉慢慢的一切都步入正轨了，什么事情都急不得，慢慢来，但是也不能怠慢。</p></blockquote><a id="more"></a><p>有时候觉得自己也并不是那么聪明，有时候觉得自己在这方面还是有一定的天赋的。也许是错觉吧。我是说并不那么聪明是错觉~<br>公司的业务逻辑很复杂，很多东西都需要学习，无论是业务逻辑还是那漫无边际的技术海洋。<br>不过还是静下心来听一首歌比较重要吧。<br>不是么?</p><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="//music.163.com/outchain/player?type=2&id=487375547&auto=1&height=66"></iframe>]]></content>
    
    <summary type="html">
    
      感觉慢慢的步入正轨了
    
    </summary>
    
    
      <category term="随笔" scheme="https://us-forever.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>每次写标题都很困难啊</title>
    <link href="https://us-forever.com/2017/07/24/%E6%AF%8F%E6%AC%A1%E5%86%99%E6%A0%87%E9%A2%98%E9%83%BD%E5%BE%88%E5%9B%B0%E9%9A%BE%E5%95%8A/"/>
    <id>https://us-forever.com/2017/07/24/每次写标题都很困难啊/</id>
    <published>2017-07-24T09:34:15.000Z</published>
    <updated>2018-01-09T09:38:05.804Z</updated>
    
    <content type="html"><![CDATA[<p>最近比忙啊，终于把最近最重要的事情做完了，很开心，接下来应该就没有什么事情分心了。<br>还有些事情，很难受，慢慢来吧，在新公司一切都好。<br><a id="more"></a><br>最好能尽快的加入到项目的开发中来才好。今天晚点下班哦。<br>新电脑回来了，用的很好，颜值很高。但是很不开心的就是win10的MD编辑器很难用啊。<br>原来的用不了了。</p>]]></content>
    
    <summary type="html">
    
      每次写标题都很困难啊
    
    </summary>
    
    
      <category term="随笔" scheme="https://us-forever.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>2017.07.18记</title>
    <link href="https://us-forever.com/2017/07/18/2017-07-18%E8%AE%B0/"/>
    <id>https://us-forever.com/2017/07/18/2017-07-18记/</id>
    <published>2017-07-18T09:33:32.000Z</published>
    <updated>2018-01-09T09:33:59.594Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>今天算是经过一次练习，算是对这个项目有了一定了解了。</p></blockquote>]]></content>
    
    <summary type="html">
    
      2017.07.18记
    
    </summary>
    
    
      <category term="随笔" scheme="https://us-forever.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>《Thinking in java》读书笔记(14)</title>
    <link href="https://us-forever.com/2017/07/14/%E3%80%8AThinking-in-java%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-14/"/>
    <id>https://us-forever.com/2017/07/14/《Thinking-in-java》读书笔记-14/</id>
    <published>2017-07-14T05:36:04.000Z</published>
    <updated>2018-01-15T05:41:18.682Z</updated>
    
    <content type="html"><![CDATA[<h1 id="第三章-操作符"><a href="#第三章-操作符" class="headerlink" title="第三章 操作符"></a>第三章 操作符</h1><h2 id="3-4赋值"><a href="#3-4赋值" class="headerlink" title="3.4赋值"></a>3.4赋值</h2><p>赋值使用操作符“=”，它的意思是将右边的值，赋值给左边。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">4</span>;</span><br></pre></td></tr></table></figure></p><p>对基本对象的赋值是简单的，基本类型存储了实际的值，而并非指向一个对象的引用。如a=b，那么b的值就给了a，但是修改a之后，b不受影响。<br><a id="more"></a><br>对一个对象进行操作时，我们真正操作的是对对象的引用。所以倘若“将一个对象赋值给另一个对象”，实际是将“引用”从一个地方复制到另一个地方。这意味着假若对对象使用c=d,那么c和d都指向原本只有d指向的那个对象。下边是一个例子：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tank</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> level;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Assignment</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;</span><br><span class="line">Tank t1 = <span class="keyword">new</span> Tank();</span><br><span class="line">Tank t2 = <span class="keyword">new</span> Tank();</span><br><span class="line">t1.level=<span class="number">9</span>;</span><br><span class="line">t2.level=<span class="number">47</span>;</span><br><span class="line">System.out.println(<span class="string">"1: t1.level: "</span> + t1.level+</span><br><span class="line"><span class="string">", t2.level: "</span> + t2.level);</span><br><span class="line">t1=t2;</span><br><span class="line">System.out.println(<span class="string">"2: t1.level: "</span> + t1.level+</span><br><span class="line"><span class="string">", t2.level: "</span> + t2.level);</span><br><span class="line">t1.level=<span class="number">27</span>;</span><br><span class="line">System.out.println(<span class="string">"3: t1.level: "</span> + t1.level+</span><br><span class="line"><span class="string">", t2.level: "</span> + t2.level);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>程序输出Output:</p><blockquote><p>1: t1.level: 9, t2.level: 47<br>2: t1.level: 47, t2.level: 47<br>3: t1.level: 27, t2.level: 27</p></blockquote><p>原本t1包含的对对象的引用，是指向一个值为9的对象。在对t1赋值的时候，这个引用被覆盖，也就是丢失了，而那个不再被引用的对象由“垃圾回收器”自动清理。<br>这种特殊的现象通常称作“别名现象”，是Java操作对象的基本方式。在这个例子中，如果想避免别名问题应该怎么办呢？可以这样写：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">t1.level = t2.level;</span><br></pre></td></tr></table></figure></p><h3 id="3-4-1方法调用中的别名问题"><a href="#3-4-1方法调用中的别名问题" class="headerlink" title="3.4.1方法调用中的别名问题"></a>3.4.1方法调用中的别名问题</h3><p>将一个对象传递给方法时，也会产生别名问题：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Letter</span></span>&#123;</span><br><span class="line"><span class="keyword">char</span> c;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PassObject</span></span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">f</span><span class="params">(Letter y)</span></span>&#123;</span><br><span class="line">y.c=<span class="string">'z'</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">Letter x = <span class="keyword">new</span> Letter();</span><br><span class="line">x.c = <span class="string">'a'</span>;</span><br><span class="line">System.out.println(<span class="string">"1: x.c:"</span> + x.c);</span><br><span class="line">f(x);</span><br><span class="line">System.out.println(<span class="string">"2: x.c:"</span> + x.c);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>程序输出Output:</p><blockquote><p>1: x.c:a<br>  2: x.c:z</p></blockquote>]]></content>
    
    <summary type="html">
    
      《Thinking in java》读书笔记(14)
    
    </summary>
    
    
      <category term="读书笔记" scheme="https://us-forever.com/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
      <category term="Java" scheme="https://us-forever.com/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>停更ThinKing in Java的读书笔记</title>
    <link href="https://us-forever.com/2017/07/11/%E5%81%9C%E6%9B%B4ThinKing-in-Java%E7%9A%84%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    <id>https://us-forever.com/2017/07/11/停更ThinKing-in-Java的读书笔记/</id>
    <published>2017-07-11T02:06:07.000Z</published>
    <updated>2018-01-11T02:10:56.564Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>停止更新ThinKing in Java的读书笔记了，因为刚刚入职新公司，有很多东西都需要学习，所以停止了Thinking in Java的阅读。但是等这一阵子过去，这本书是我第一本需要读完的书。</p></blockquote><p>刚刚加入了新公司，一开始害怕会有些不适应，但是第二天就觉得自己慢慢的融入进来了。公司很不错。但是也有对CSDN的怀念，哪里的人都很好。如果之前有机会留在那里的话，自己也肯定选择留在那。<br>新公司的项目还没有入手，但是希望自己能够尽快的投入到工作中去。<br>比较开心的就是，自己买了一个新电脑花了很多钱。也算是对工作的投入吧。不过电脑还没有收到呢，好期待啊。</p><pre style="backgroundcolor:wheat;"><p style="color:deeppink;">   越努力，越幸运。</p>                                ----------送给自己</pre>]]></content>
    
    <summary type="html">
    
      停更ThinKing in Java的读书笔记
    
    </summary>
    
    
      <category term="读书笔记" scheme="https://us-forever.com/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>做决定看似简单其实很难</title>
    <link href="https://us-forever.com/2017/07/05/%E5%81%9A%E5%86%B3%E5%AE%9A%E7%9C%8B%E4%BC%BC%E7%AE%80%E5%8D%95%E5%85%B6%E5%AE%9E%E5%BE%88%E9%9A%BE/"/>
    <id>https://us-forever.com/2017/07/05/做决定看似简单其实很难/</id>
    <published>2017-07-05T09:31:36.000Z</published>
    <updated>2018-01-09T09:32:55.054Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>无论做出怎样的选择,路都需要自己走。</p></blockquote><a id="more"></a><p>出差了一周，好久没看书了，所以读书笔记也搁置了。所以今晚打算写一篇读书笔记。<br>现在也算是到了关键的时候了，下周可能就要去新公司上班，面临新的同事，新的环境，希望自己能够习惯，能够相处的比较好。</p><p>可能我最终还是没能留下来。主要是因为自己不是那种栋梁之才吧。我相信如果公司真的想留下我。可能不在乎一个月的工资吧。<br>所以说，我还没有达到那种地步。然而谁也不敢给我保证月底会有机会。这是唯一可悲的吧。<br>我相信你们很想留我，但是这个时间真是不巧，然后你们也不想让我没有了offer。我自己也担心再也没有这样的机会。</p><p>不过我还是相信，有缘总会再见的。</p>]]></content>
    
    <summary type="html">
    
      做决定看似简单其实很难
    
    </summary>
    
    
      <category term="随笔" scheme="https://us-forever.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>《Thinking-in-java》读书笔记(13)</title>
    <link href="https://us-forever.com/2017/06/23/%E3%80%8AThinking-in-java%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-13/"/>
    <id>https://us-forever.com/2017/06/23/《Thinking-in-java》读书笔记-13/</id>
    <published>2017-06-23T02:01:36.000Z</published>
    <updated>2018-01-15T02:03:47.653Z</updated>
    
    <content type="html"><![CDATA[<h1 id="第三章-操作符"><a href="#第三章-操作符" class="headerlink" title="第三章 操作符"></a>第三章 操作符</h1><p>在最底层，Java中的数据是通过使用操作符来操做的。<br>Java是建立在C++基础之上的，所哟C和C++程序员应该非常熟悉Java的大多数操作符。当然，Java也做了一些改进与简化。</p><h2 id="3-1更简单的打印语句"><a href="#3-1更简单的打印语句" class="headerlink" title="3.1更简单的打印语句"></a>3.1更简单的打印语句</h2><p>前一章中，我们介绍了Java的打印句：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(<span class="string">"Rather a lot of type"</span>);</span><br></pre></td></tr></table></figure></p><a id="more"></a><p>可以看到，这天语句设计很多类型，而且读起来也非常费劲。<br>在第六章中将介绍<strong>静态导入</strong>（static import）这个在Java SE5中新增加的概念。我自己创建了一个新的类，然后实现简单的打印语句。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> util;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyUtil</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(Object o)</span></span>&#123;</span><br><span class="line">System.out.println(o.toString());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>实现部分：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> test;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> util.MyUtil.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="comment">//: object/Documentation1.java</span></span><br><span class="line"><span class="comment">/** A class comment */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line"><span class="comment">/** A filed comment */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">int</span> i;</span><br><span class="line"><span class="comment">/** A method comment </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> args </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> songyx</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">print(<span class="keyword">new</span> Date());</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;<span class="comment">///:~</span></span><br></pre></td></tr></table></figure></p><h2 id="3-2使用Java操作符"><a href="#3-2使用Java操作符" class="headerlink" title="3.2使用Java操作符"></a>3.2使用Java操作符</h2><p>操作符接受一个或者多个参数，并生成一个新值。<br>操作符作用域操作数，生成一个新值。<br>几乎所有操作符都只能操作“基本类型”。例外的操作符是“=”、“==”和“！=”。除此之外，String类支持“+”和“+=”。</p><h2 id="3-3优先级"><a href="#3-3优先级" class="headerlink" title="3.3优先级"></a>3.3优先级</h2><p>当一个表达式中存在多个操作符时，操作符的优先级就决定了各部分的计算顺序。Java对计算顺序租了特别的规定。其中最简单的就是先乘除后加减，程序员经常会忘记它们优先级规则，所以应该用括号明确规定计算顺序。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Precedence</span></span>&#123;</span><br><span class="line"><span class="function">publi <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> x = <span class="number">1</span>,y = <span class="number">2</span>,z = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">int</span> a = x+ y-<span class="number">2</span>/<span class="number">2</span> + z;</span><br><span class="line"><span class="keyword">int</span> b = x+ (y-<span class="number">2</span>)/(y+z);</span><br><span class="line">System.out.println(<span class="string">"a="</span>+ a +<span class="string">"b="</span>+b);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* a=5 b=1</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>这两个语句看起来大体相同，但是输出结果却不同，这正是括号的作用。</p>]]></content>
    
    <summary type="html">
    
      《Thinking-in-java》读书笔记(13)
    
    </summary>
    
    
      <category term="读书笔记" scheme="https://us-forever.com/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
      <category term="Java" scheme="https://us-forever.com/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>《Thinking in java》读书笔记(12)</title>
    <link href="https://us-forever.com/2017/06/22/%E3%80%8AThinking-in-java%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-12/"/>
    <id>https://us-forever.com/2017/06/22/《Thinking-in-java》读书笔记-12/</id>
    <published>2017-06-22T03:48:41.000Z</published>
    <updated>2018-01-15T05:37:12.308Z</updated>
    
    <content type="html"><![CDATA[<h2 id="2-10总结"><a href="#2-10总结" class="headerlink" title="2.10总结"></a>2.10总结</h2><p>花了不算多的时间吧第二章看完了，毕竟自己有一定的基础，所以这些东西看的比较快，有些东西自己之前确实没有注意过，不过通过学习这一章，自己了解了很多更加基础的东西，希望自己再接再厉吧。加油把这本书看完了，然后去看别的书，这本书是我第一本看的这么详细的书。<br>最近工作的事情总算有了眉目，觉得还是小有收获吧。挺开心的，然后昨天是自己的生日，自己竟然不记得了。。。。还在高兴地看自己昨天刚到的新书。算是过了一个生日吧。<br><a id="more"></a><br>不过多亏你的提醒，让我想起昨天是我的生日。谢谢你。<br><img src="/img/birthday.jpg" alt="生日快乐"></p>]]></content>
    
    <summary type="html">
    
      《Thinking in java》读书笔记(12)
    
    </summary>
    
    
      <category term="读书笔记" scheme="https://us-forever.com/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
      <category term="Java" scheme="https://us-forever.com/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>《Thinking in java》读书笔记(11)</title>
    <link href="https://us-forever.com/2017/06/22/%E3%80%8AThinking-in-java%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-11/"/>
    <id>https://us-forever.com/2017/06/22/《Thinking-in-java》读书笔记-11/</id>
    <published>2017-06-22T03:27:28.000Z</published>
    <updated>2018-01-15T05:37:01.697Z</updated>
    
    <content type="html"><![CDATA[<h1 id="第二章-一切都是对象"><a href="#第二章-一切都是对象" class="headerlink" title="第二章 一切都是对象"></a>第二章 一切都是对象</h1><h2 id="2-7你的第一个Java程序"><a href="#2-7你的第一个Java程序" class="headerlink" title="2.7你的第一个Java程序"></a>2.7你的第一个Java程序</h2><p>最后，让我们编写第一个完整的程序。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// HelloDate.java</span></span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloDate</span></span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">System.out.println(<span class="string">"Hello, it's: "</span>);</span><br><span class="line">System.out.println(<span class="keyword">new</span> Date());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><a id="more"></a><p>在每个程序文件的开头，必须声明import语句，以便引入在文件代码中需要用到的额外类。<br>我们可以看到<strong>System</strong>类有很多属性，我们选择<strong>out</strong>,就会发现它是一个静态<strong>PrintStream</strong>对象。因为是静态的，所以不需要创建任何对象，就可以直接使用。<br>还有一个我们需要注意，就是类名和文件名要相同。<br>main()方法的参数是一个String对象的数组，在这个程序中并未用到args，但是Java编译器要求必须这样做，因为args要用来存储命令行参数。<br>System有很多其他的方法。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//: object/ShowProperties.java</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ShowProperties</span></span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">System.getProperties.list(System.out);</span><br><span class="line">System.out.println(System.getProperty(<span class="string">"user.name"</span>));</span><br><span class="line">System.out.println(System.getProperty(<span class="string">"java.library.path"</span>));</span><br><span class="line">&#125;</span><br><span class="line">&#125;  <span class="comment">///:~</span></span><br></pre></td></tr></table></figure></p><p>main()的第一行将显示从运行程序的系统中获取的所有“属性”，因此它可以向你提供环境信息。list()方法将结果发送给它的参数：System.out。</p><h3 id="2-7-1-编译和运行"><a href="#2-7-1-编译和运行" class="headerlink" title="2.7.1 编译和运行"></a>2.7.1 编译和运行</h3><p>要编译和运行程序，首先得需要一个Java的开发环境。我们可以登录到Oracle的官网下载与自己机器平台相兼容的JDK。<br>可以通过<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">javac HelloDate.java</span><br></pre></td></tr></table></figure></p><p>进行编译，正常情况下么不会产生任何响应，如果有任何错误消息返回给你，就说明你可能没有正确安装JDK，或者你的代码有问题。<br>编译成功后，可以通过<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java HelloDate</span><br></pre></td></tr></table></figure></p><p>来运行编译成功的程序。可以看到当天的日期被输出。</p><h2 id="2-8-注释和嵌入式文档"><a href="#2-8-注释和嵌入式文档" class="headerlink" title="2.8 注释和嵌入式文档"></a>2.8 注释和嵌入式文档</h2><p>Java有两种注释风格。<br>第一种：传统的C语言风格的注释，C++也继承了这种风格，以“/”开始，随后是注释内容，可以跨越多行，最后以“/”结束。许多程序员在连续的注释内容的第一行都以“*”开头，所以经常看到以下写法。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* This is a comment</span></span><br><span class="line"><span class="comment"> * that continues</span></span><br><span class="line"><span class="comment"> * across lines</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure></p><p>但是和以下这种方式没有区别。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">This is a comment that </span></span><br><span class="line"><span class="comment">continues across lines</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></p><p>第二种风格也是源于C++。这种注释是“单行注释”，以“//”起头。直到句末。<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// This is a one-line commnet</span></span><br></pre></td></tr></table></figure></p><h3 id="2-8-1注释文档"><a href="#2-8-1注释文档" class="headerlink" title="2.8.1注释文档"></a>2.8.1注释文档</h3><p>代码文档撰写的最大问题，大概就是对文档的维护了。如果代码和文档是分离的，那么在每次修改代码时，都需要修改相应的文档。那么java帮助你把代码和文档放在一个文件内，方便修改。<br>javadoc便是用于提取代码文件中的注释的工具，它是JDK安装的一部分。javadoc输出的是一个HTML文件，可以使用WEB浏览器查看。</p><h3 id="2-8-2语法"><a href="#2-8-2语法" class="headerlink" title="2.8.2语法"></a>2.8.2语法</h3><p>所有javadoc命令都只能在“/*”注释中出现，和通常一样，注释结束于“/”。使用javadoc的方式主要有两种：嵌入HTML，或使用“文档标签”。<strong>独立文档标签</strong>是一些以“@”字符开头的命令，且要置于注释行的最前面。而“行内文档标签”则可以出现在javadoc的任何地方。它们也是以“@”开头<br>，但要在花括号内。<br>共有三种类型的注释文档，分别对应注释位置后面的三种元素：类、域和方法。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//: object/Documentation1.java</span></span><br><span class="line"><span class="comment">/** A class comment */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Documentation1</span> </span>&#123;</span><br><span class="line"><span class="comment">/** A filed comment */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">int</span> i;</span><br><span class="line"><span class="comment">/** A method comment */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">System.getProperties().list(System.out);</span><br><span class="line">System.out.println(System.getProperty(<span class="string">"user.name"</span>));</span><br><span class="line">System.out.println(System.getProperty(<span class="string">"java.library.path"</span>));</span><br><span class="line">&#125;</span><br><span class="line">&#125;<span class="comment">///:~</span></span><br></pre></td></tr></table></figure></p><p>注意，javadoc只能为<strong>public</strong>（公共）和<strong>protected</strong>（受保护）成员进行文档注释。<strong>private</strong>(私有)和包内可访问成员的注释会被忽落掉。<br>不过可以通过用-private进行标记，一边输出private成员的注释。</p><h3 id="2-8-3嵌入式HTML"><a href="#2-8-3嵌入式HTML" class="headerlink" title="2.8.3嵌入式HTML"></a>2.8.3嵌入式HTML</h3><p>javadoc通过生产的HTML文档传送HTML命令，这使你能够充分利用HTML。当然，主要目的还是为了对代码进行格式化。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//: obejct/Documentation2.java</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;pre&gt;</span></span><br><span class="line"><span class="comment"> * System.out.println(new Date());</span></span><br><span class="line"><span class="comment"> * &lt;/pre&gt;</span></span><br><span class="line"><span class="comment"> * /</span></span><br><span class="line"><span class="comment">///:~</span></span><br></pre></td></tr></table></figure></p><p>也可以像WEB那样运用HTML，对普通文本按照你自己所描述的进行格式化：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//: object/Documentation3.java</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * You can &lt;em&gt;even&lt;/em&gt; insert a list:</span></span><br><span class="line"><span class="comment"> * &lt;ol&gt;</span></span><br><span class="line"><span class="comment"> * &lt;li&gt; Item one</span></span><br><span class="line"><span class="comment"> * &lt;li&gt; Item two</span></span><br><span class="line"><span class="comment"> * &lt;li&gt; Item three</span></span><br><span class="line"><span class="comment"> * &lt;/ol&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">///:~</span></span><br></pre></td></tr></table></figure></p><p>不要在嵌入式HTML中使用标题标签，如h1和hr，因为会和javadoc的产生冲突。<br>所有类型的注释文档—–类、域和方法—-都支持嵌入式HTML。</p><h3 id="2-8-4一些标签示例"><a href="#2-8-4一些标签示例" class="headerlink" title="2.8.4一些标签示例"></a>2.8.4一些标签示例</h3><p>这里介绍一些可用于代码文档的javadoc标签。</p><h5 id="1-see-引用其他类"><a href="#1-see-引用其他类" class="headerlink" title="1.@see:引用其他类"></a>1.@see:引用其他类</h5><p>@see标签允许用户引用其他类的文档。javadoc会在其生产的HTML文件中，通过@see标签链接到其他文档。格式如下：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@see</span> classname</span><br><span class="line"><span class="meta">@see</span> fully-qualified-classname</span><br><span class="line">@see fully-qualified-classname#method-name</span><br></pre></td></tr></table></figure></p><p>上述每种格式都会在生产的文档中加入一个具有超链接的“See Also”(参见)条目，但是javadoc不会检查你所提供的超链接是否有效。</p><h5 id="2-link-package-class-member-label"><a href="#2-link-package-class-member-label" class="headerlink" title="2.{@link package.class#member label}"></a>2.{@link package.class#member label}</h5><p>该标签与@see极其相似，只是它用于行内，并且是用“label”作为超链接文本而不用“See Also”。</p><h5 id="3-docRoot"><a href="#3-docRoot" class="headerlink" title="3.{@docRoot}"></a>3.{@docRoot}</h5><p>该标签产生到文档根目录的相对路径，用于文档树页面的显式超链接。</p><h5 id="4-inheritDoc"><a href="#4-inheritDoc" class="headerlink" title="4.{@inheritDoc}"></a>4.{@inheritDoc}</h5><p>该标签从当前这个类的最直接的基类中继承相关文档到当前文档注释中。</p><h5 id="5-version"><a href="#5-version" class="headerlink" title="5.@version"></a>5.@version</h5><p>该标签的格式如下<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@version</span> version-information</span><br></pre></td></tr></table></figure></p><p>其中“version-information”可以是任何你认为适合包含在版本说明中的重要信息。如果javadoc命令使用了“-version”标记，那么就从生成的HTML文档中特别提取版本信息。</p><h5 id="6-author"><a href="#6-author" class="headerlink" title="6.@author"></a>6.@author</h5><p>该标签格式如下：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@author</span> author-information</span><br></pre></td></tr></table></figure></p><p>其中“author-information”可以是任何你认为适合包含在作者说明中的任何信息，如电子邮件等。如果javadoc命令使用了“-author”标记，那么就从生成的HTML文档中特别提取作者信息。<br>可以使用多个标签，以便列出所有作者。但是它们必须连续。</p><h5 id="7-since"><a href="#7-since" class="headerlink" title="7.@since"></a>7.@since</h5><p>该标签允许你指定程序代码最早使用的版本，可以再HTML java文档中看到它们被用来指定所用的JDK版本情况。</p><h5 id="8-param"><a href="#8-param" class="headerlink" title="8.@param"></a>8.@param</h5><p>该标签用于方法文档中，形式如下：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@param</span> parameter-name description</span><br></pre></td></tr></table></figure></p><p>其中，parameter-name是方法的参数列表中的标识符，description是可以延迟数行的文本，终止于新的文档标签出现之前。可以使用任意多种标签，大约每个参数都有一个这样的标签。</p><h5 id="9-return"><a href="#9-return" class="headerlink" title="9.@return"></a>9.@return</h5><p>该标签用于方法文档中，格式如下：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@return</span> description</span><br></pre></td></tr></table></figure></p><p>其中，“description”用来描述返回值的含义，可以延续数行。</p><h5 id="10-throws"><a href="#10-throws" class="headerlink" title="10.@throws"></a>10.@throws</h5><p>“异常”，它们是由于某个方法调用失败而“抛出”的对象。格式如下：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@throws</span> fully-qualified-<span class="class"><span class="keyword">class</span>-<span class="title">name</span> <span class="title">description</span></span></span><br></pre></td></tr></table></figure></p><p>其中fully-qualified-class-name给出一个异常类的无歧义的名字。而该异常类在别处定义。description告诉你为什么此特殊的异常会在方法调用中出现。</p><h5 id="11-deprecated"><a href="#11-deprecated" class="headerlink" title="11.@deprecated"></a>11.@deprecated</h5><p>该标签用于支出一些旧特性已由改进的新特性取代。如果使用@deprecated标记的方法，则编译器会发布警告。<br>在java SE5中，javadoc标签@deprecated已经被@Deprecated注解所替代。</p><h3 id="2-8-5文档示例"><a href="#2-8-5文档示例" class="headerlink" title="2.8.5文档示例"></a>2.8.5文档示例</h3><p>下面再回到第一个Java程序，但这次加上了文档注解。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//: object/HelloDate.java</span></span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="comment">/** The first Thinking in Java example program.</span></span><br><span class="line"><span class="comment"> * Display a string and today's date.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Bruce Eckel</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> www.MindView.net</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 4.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloDate</span></span>&#123;</span><br><span class="line"><span class="comment">/** Entry point to class &amp; application.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> args array of string arguments</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> exception No exceptions throw</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">System.out.println(<span class="string">"Hello, it's: "</span>);</span><br><span class="line">System.out.println(<span class="keyword">new</span> Date());</span><br><span class="line">&#125; </span><br><span class="line">&#125; <span class="comment">/* Output: (55% match)</span></span><br><span class="line"><span class="comment">Hello, it's:</span></span><br><span class="line"><span class="comment">Wed Oct 05 14:39:36 MDT 2005</span></span><br><span class="line"><span class="comment">*/</span><span class="comment">//:~</span></span><br></pre></td></tr></table></figure></p><p>在这里用“：”作为特殊记号说明这是包含源文件名的注释行。<br>而“///:~”代表源代码清单的结束。</p><h2 id="2-9编码风格"><a href="#2-9编码风格" class="headerlink" title="2.9编码风格"></a>2.9编码风格</h2><p>在“Java编程语言编码约定”中，代码风格是这样规定的：类名的首字母要大写，如果类名由多个单词构成，那么把它们并在一起，其中每个内部单词的首字母都采用大写形式。如：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AllTheColorsOfTheRainbow</span></span>&#123; <span class="comment">//...</span></span><br></pre></td></tr></table></figure></p><p>这种风格成为“驼峰风格”。其它所有内容—–方法、字段（成员变量）以及对象引用名称等，公认的风格与类的风格一样，只是标识符第一个字母采用小写。如：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AllTheColorsOfTheRainbow</span></span>&#123; </span><br><span class="line"><span class="keyword">int</span> anIntegerRepresentingColors;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">changeTheHueOfTheColor</span><span class="params">(<span class="keyword">int</span> newHue)</span></span>&#123;</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      《Thinking in java》读书笔记(11)
    
    </summary>
    
    
      <category term="读书笔记" scheme="https://us-forever.com/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
      <category term="Java" scheme="https://us-forever.com/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>《Thinking in java》读书笔记(10)</title>
    <link href="https://us-forever.com/2017/06/21/%E3%80%8AThinking-in-java%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-10/"/>
    <id>https://us-forever.com/2017/06/21/《Thinking-in-java》读书笔记-10/</id>
    <published>2017-06-21T03:12:55.000Z</published>
    <updated>2018-01-15T05:37:21.951Z</updated>
    
    <content type="html"><![CDATA[<h1 id="第二章-一切都是对象"><a href="#第二章-一切都是对象" class="headerlink" title="第二章 一切都是对象"></a>第二章 一切都是对象</h1><h2 id="2-5方法、参数和返回值"><a href="#2-5方法、参数和返回值" class="headerlink" title="2.5方法、参数和返回值"></a>2.5方法、参数和返回值</h2><p>许多程序设计语言（像C和C++）用<strong>函数</strong>这个术语来描述命名子程序；而在Java里却常用<strong>方法</strong>这个术语来表示。</p><p>Java的方法决定了一个对象能够接收什么样的消息。方法的基本组成部分包括：名称、参数、返回值和方法体。下面是它最基本的形式：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">ReturnType <span class="title">methodName</span><span class="params">(<span class="comment">/* Argument list*/</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">/* Method body*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><a id="more"></a><p>返回类型描述的是在调用方法之后从方法返回的值。<br>Java中的方法只能作为类的一部分来创建。方法只有通过对象才能被调用，且这个对象必须执行这个方法调用。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">objectName.methodName(arg1, arg2, arg3);</span><br><span class="line"><span class="comment">// how to call method</span></span><br><span class="line"><span class="keyword">int</span> x = a.f();</span><br><span class="line"><span class="comment">// example for call method</span></span><br></pre></td></tr></table></figure></p><p>以上返回类型必须和x的类型兼容。<br>这种调用方法的行为通常别称为<strong>发送消息给对象</strong>。消息是f(),对象是a。</p><h3 id="2-5-1参数列表"><a href="#2-5-1参数列表" class="headerlink" title="2.5.1参数列表"></a>2.5.1参数列表</h3><p>方法的参数列表指定要传递给方法什么样的信息。这些信息都是对象形式。<br>假设某个方法接受String为其参数，下面是具体定义，它必须置于某个类的定义内才能被正确的编译。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">storage</span><span class="params">(String s)</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> s.length()*<span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>通过这个例子，还可以了解到<strong>return</strong>关键字的用法，它包括两方面：首先，它代表“已经做完，离开此方法”。其次，如果此方法产生了一个值，这个值要放在return语句后边。在这个例子中，返回值是通过计算s.length()*2这个表达式得到的。<br>如果不想返回任何值，可以使用void（空）。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">flag</span><span class="params">()</span></span>&#123; <span class="keyword">return</span> <span class="keyword">true</span>;&#125;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">naturalLogBase</span><span class="params">()</span></span>&#123; <span class="keyword">return</span> <span class="number">2.718</span>;&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">nothing</span><span class="params">()</span></span>&#123; <span class="keyword">return</span>;&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">nothing2</span><span class="params">()</span></span>&#123;&#125;</span><br></pre></td></tr></table></figure></p><p>若返回值是void，return关键字的作用只是用来退出方法。因此，没必要到方法结束时才离开，可以使任何地方。如果返回值不是void，那么需要返回一个正确类型的返回值。<br>到此为止，读者或许觉得：程序似乎只是依稀裂带有方法的对象组合，这些方法以其他对象为参数，并发送消息给其他对象。其实大体上就是这样。</p><h2 id="2-6构建一个Java程序"><a href="#2-6构建一个Java程序" class="headerlink" title="2.6构建一个Java程序"></a>2.6构建一个Java程序</h2><p>在构建第一个Java程序之前，还必须了解其它一些问题。</p><h3 id="2-6-1名字可见性"><a href="#2-6-1名字可见性" class="headerlink" title="2.6.1名字可见性"></a>2.6.1名字可见性</h3><p>名字管理对任何程序设计语言来说，都是一个重要的问题。如果某个程序的某个模块使用了一个名字，而其他人在这个程序的不同模块里也使用了相同的名字，那么怎样才能区分这两个名字并防止二者互相冲突呢？为了解决这个问题，C++通过几个关键字引入了<strong>命名空间</strong>的概念。<br>而Java采用了一种全新的方法来避免上述问题。为了给类库生成一个不会与其他名字混淆的名字，Java的设计者希望程序员反过来使用自己Internet域名，因为这样保证它们肯定是独一无二的。<br>例如：net.mindview.utility.foibles。反转域名后，句点就用来代表子目录的划分。<br>在Java 1.0和1.1中，扩展名com、edu、org、net等约定为大写形式。在Java 2开发到一半时，设计者发现这样会引起一些问题，因此，现在整个包名都是小写了。</p><h3 id="2-6-2运用其他构件"><a href="#2-6-2运用其他构件" class="headerlink" title="2.6.2运用其他构件"></a>2.6.2运用其他构件</h3><p>如果想在自己的程序中使用预先定义好的类，那么编译器就必须知道怎么定位它们。<br>为了解决一系列的问题，可以使用关键字import来准确的告诉编译器你想要的是什么。import指示编译器导入一个包，也就是一个类库。<br>大多时候，我们使用预编译器附在一起的Java标准类库里边的构件。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br></pre></td></tr></table></figure></p><h3 id="2-6-3static关键字"><a href="#2-6-3static关键字" class="headerlink" title="2.6.3static关键字"></a>2.6.3static关键字</h3><p>通常来说，当创建类时，就是在描述那个类的对象的外观和行为。除非用new创建那个类的对象，否则，实际上并未获得任何对象。执行new来创建对象时，数据存储空间才被分配，其方法采供外界调用。<br>有两种情形上述方法是无法解决的。一种情形是，只想为某特定域分配单一存储空间，而不去考虑究竟要创建多少对象，甚至根本就不创建任何对象。另外一种情形是，希望某个方法不与包含它的类的任何对象关联在一起。也就是说，即使没有创建对象，也能够调用这个方法。<br>由static关键字定义的，即使从未创建某个类的任何对象，也可以调用其static方法或static域。<br>有些面向对象语言采用<strong>类数据</strong>和<strong>类方法</strong>两个术语，代表那些数据和方法只是作为整个类，而不是类的某个特定对象而存在的。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StaticTest</span></span>&#123;</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">int</span> i = <span class="number">47</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>即使你创建两个StaticTest的对象，StaticTest.i也只有一份存储空间，这两个对象共享同一个i。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">StaticTest st1 = <span class="keyword">new</span> StaticTest();</span><br><span class="line">StaticTest st2 = <span class="keyword">new</span> StaticTest();</span><br></pre></td></tr></table></figure></p><p>在这里st1.i和st2.i指向同一存储空间，因此它们的值相同，都是47。<br>引用static的变量有两种方法：st1.i或者StaticTest.i。<br>类似的逻辑也应用与静态方法。<br>可以使用<strong>ClassName.method()</strong>加以引用。<br>一个static字段对每个类来说都只有一份存储空间，而非static字段则是对每个对象有一个存储空间。static方法的一个重要用法就是在不创建任何对象的前提下就可以调用它。正如我们将会看到的那样，这一点对定义<strong>main()</strong>方法很重要，这个方法是运行一个应用的入口。</p>]]></content>
    
    <summary type="html">
    
      《Thinking in java》读书笔记(10)
    
    </summary>
    
    
      <category term="读书笔记" scheme="https://us-forever.com/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
      <category term="Java" scheme="https://us-forever.com/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>《Thinking in java》读书笔记(9)</title>
    <link href="https://us-forever.com/2017/06/17/%E3%80%8AThinking-in-java%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-9/"/>
    <id>https://us-forever.com/2017/06/17/《Thinking-in-java》读书笔记-9/</id>
    <published>2017-06-17T02:56:10.000Z</published>
    <updated>2018-01-10T03:21:05.023Z</updated>
    
    <content type="html"><![CDATA[<h1 id="第二章-一切都是对象"><a href="#第二章-一切都是对象" class="headerlink" title="第二章 一切都是对象"></a>第二章 一切都是对象</h1><h2 id="2-3永远不需要销毁的对象"><a href="#2-3永远不需要销毁的对象" class="headerlink" title="2.3永远不需要销毁的对象"></a>2.3永远不需要销毁的对象</h2><p>在大多数程序设计语言中，变量生命周期的概念，占据了程序设计工作中非常重要的部分。变量需要存活多长时间？如果想要销毁对象，那什么时候进行呢？<br><a id="more"></a></p><h3 id="2-3-1作用域"><a href="#2-3-1作用域" class="headerlink" title="2.3.1作用域"></a>2.3.1作用域</h3><p>大多数过程型语言都有<strong>作用域</strong>(scope)的概念。作用域决定了在其内定义的变量名的可见性和生命周期。在C、C++和Java中，作用域有花括号的位置决定。例如：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="keyword">int</span> x = <span class="number">12</span>;</span><br><span class="line"><span class="comment">// Only x available</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">int</span> q = <span class="number">96</span>;</span><br><span class="line"><span class="comment">//Both x &amp; q available</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Only x available</span></span><br><span class="line"><span class="comment">//q is out of scope</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>在作用域里定义的变量可用于作用域结束之前。<br>任何位于“//”之后到行末的文字都是注释。<br>缩排格式使Java代码更易于阅读。由于Java是一种自由格式（free-form）的语言，所以空格、制表符、换行都不会影响程序的执行结果。<br>尽管一下代码在C和C++中是合法的，但是在Java中却不能这样书写：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123; </span><br><span class="line"><span class="keyword">int</span> x = <span class="number">12</span>;</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">int</span> x = <span class="number">96</span>;<span class="comment">//illegal in java</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>Java编译器将会报告变量x已经被定义过。</p><h3 id="2-3-2对象的作用域"><a href="#2-3-2对象的作用域" class="headerlink" title="2.3.2对象的作用域"></a>2.3.2对象的作用域</h3><p>Java对象不具备和基本类型一样的生命周期。当new创建一个Java对象时，它可以存活于作用域之外。所以假如你采用代码<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123; </span><br><span class="line">String s = <span class="keyword">new</span> String(<span class="string">"a string"</span>);</span><br><span class="line">&#125;<span class="comment">//end of scope</span></span><br></pre></td></tr></table></figure></p><p>引用s在作用域终点就消失了。然而，s指向的String对象仍然占据内存空间。不过在Java中可以通过Java的<strong>垃圾回收器</strong>(GC)，用来监视用new来创建的所有对象，当我们不在需要它的时候，释放这些对象的内存空间。这样就消除了这类编程问题(<strong>内存泄漏</strong>)。</p><h2 id="2-4创建新的数据类型：类"><a href="#2-4创建新的数据类型：类" class="headerlink" title="2.4创建新的数据类型：类"></a>2.4创建新的数据类型：类</h2><p>如果一切都是对象，那么是什么决定了某一类对象的外观和行为呢？就是说，是什么确定了对象的类型？这里并不是使用关键字“type”,大多数面向对象语言习惯使用关键字class。class这个关键字之后紧跟着的是新类型的名称。例如：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ATyoeName</span></span>&#123;<span class="comment">/* Class body goes here*/</span>&#125;</span><br></pre></td></tr></table></figure></p><p>这样就引入了新的类型。<br>可以使用new来创建这种类型的对象。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ATypeName a =<span class="keyword">new</span>  ATypeName();</span><br></pre></td></tr></table></figure></p><p>但是没有定义它的方法之前，他还不能去做更多的事情。（也就是说它还不能发送任何有意义的消息，设置可以说不能发送消息。）</p><h3 id="2-4-1字段和方法"><a href="#2-4-1字段和方法" class="headerlink" title="2.4.1字段和方法"></a>2.4.1字段和方法</h3><p>一旦定义了一个类，就可以在类中设置两种类型的元素：<strong>字段</strong>（有时被称为<strong>数据成员</strong>）和<strong>方法</strong>（有时被称为<strong>成员函数</strong>）。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DataOnly</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> i;</span><br><span class="line"><span class="keyword">double</span> d;</span><br><span class="line"><span class="keyword">boolean</span> b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>尽管这个类除了存储数据之外什么也不做，但是仍旧可以像下面一样创建它的一个对象：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DataOnly data = <span class="keyword">new</span> DataOnly();</span><br></pre></td></tr></table></figure></p><p>引用对象成员的方法：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">objectReference.member;</span><br><span class="line"><span class="comment">// other eaxmples</span></span><br><span class="line">data.i = <span class="number">47</span>;</span><br><span class="line">data.d = <span class="number">1.1</span>;</span><br><span class="line">data.b = <span class="keyword">true</span>;</span><br></pre></td></tr></table></figure></p><p>DataOnly类除了保存数据没别的用处，因为他没有任何成员方法。如果想了解成员方法的运行机制，就得先了解参数和返回值的概念。</p><h5 id="基本成员默认值"><a href="#基本成员默认值" class="headerlink" title="基本成员默认值"></a>基本成员默认值</h5><p>若类的某个成员是基本数据类型，即使没有初始化，Java也会确保它们获得一个默认值，不过这些初始化也许对你的程序来说并不正确，设置不合法，所以最好明确地对变量进行初始化。</p><table><thead><tr><th>基本类型</th><th>默认值</th></tr></thead><tbody><tr><td>boolean</td><td>false</td></tr><tr><td>char</td><td>‘\u0000’(null)</td></tr><tr><td>byte</td><td>(byte)0</td></tr><tr><td>short</td><td>(short)0</td></tr><tr><td>int</td><td>0</td></tr><tr><td>long</td><td>oL</td></tr><tr><td>float</td><td>0.0f</td></tr><tr><td>double</td><td>0.0d</td></tr></tbody></table><p>然而上述初始化并不适合“局部”变量。</p>]]></content>
    
    <summary type="html">
    
      《Thinking in java》读书笔记(9)
    
    </summary>
    
    
      <category term="读书笔记" scheme="https://us-forever.com/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
      <category term="Java" scheme="https://us-forever.com/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>《Thinking in java》读书笔记(8)</title>
    <link href="https://us-forever.com/2017/06/15/%E3%80%8AThinking-in-java%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-8/"/>
    <id>https://us-forever.com/2017/06/15/《Thinking-in-java》读书笔记-8/</id>
    <published>2017-06-15T10:24:49.000Z</published>
    <updated>2018-01-15T02:04:17.291Z</updated>
    
    <content type="html"><![CDATA[<h1 id="第二章-一切都是对象"><a href="#第二章-一切都是对象" class="headerlink" title="第二章 一切都是对象"></a>第二章 一切都是对象</h1><p>尽管Java是基于C++的，但是相比之下，Java是一种更“纯粹”的面向对象程序设计语言。<br>因为C++是C的一个超集，所以势必包括许多C语言不具备的特性，这些特性使C++在某些方面显得过于复杂。<br><a id="more"></a></p><h2 id="2-1用引用操纵对象"><a href="#2-1用引用操纵对象" class="headerlink" title="2.1用引用操纵对象"></a>2.1用引用操纵对象</h2><p>每种编程语言都有自己的操纵内存中元素的方式。有时候，程序员必须注意将要处理的数据是什么类型的。你是直接操纵元素，还是用某种给予特殊语法的间接表示（C、C++是用指针）来操纵对象？<br>创建一个String引用<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String s;</span><br></pre></td></tr></table></figure></p><p>但这里创建的只是引用，并不是对象。如果此时向s发送一个信息，就会返回一个运行时错误。因为s并没有被初始化。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String s = <span class="string">"songyaxu"</span>;</span><br></pre></td></tr></table></figure></p><p>这里用到了一个Java语言的特性，字符串可以用带引号的文本初始化。通常，必须对对象采用一种更通用的初始化方法。</p><h2 id="2-2必须由你创建所有对象"><a href="#2-2必须由你创建所有对象" class="headerlink" title="2.2必须由你创建所有对象"></a>2.2必须由你创建所有对象</h2><p>一旦创建了一个引用，就希望它能与一个新的对象相关联。通常使用new来实现这个目的。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String s = <span class="keyword">new</span> String(<span class="string">"songyaxu"</span>);</span><br></pre></td></tr></table></figure></p><p>当然Java也提供了大量的过剩的现成类型。</p><h3 id="2-2-1存储到什么地方"><a href="#2-2-1存储到什么地方" class="headerlink" title="2.2.1存储到什么地方"></a>2.2.1存储到什么地方</h3><p>程序运行时，对象是怎样进行放置安排的呢？特别是内存是怎样分配的呢？对这些方面的了解会对你有很大的帮助。有5个不同的地方可以存储数据:</p><table><thead><tr><th>序号</th><th>名称</th><th>说明</th></tr></thead><tbody><tr><td>1</td><td>寄存器</td><td>这时最快的存储区，它位于处理器内部，但是寄存器的数量有限，所以寄存器根据需求进行分配。</td></tr><tr><td>2</td><td>堆栈</td><td>位于通用RAM（随机访问存储器）中，但通过堆栈指针可以从处理器那里获得直接支持。Java系统必须知道存储在堆栈内所以项的生命周期，这一约束限制了程序的灵活性，所以Java数据存储于对战中，特别是对象引用，但Java对象并不存储于其中。</td></tr><tr><td>3</td><td>堆</td><td>一种通用的内存池（位于RAM区）用于存放Java所以对象，对不同于堆栈的好处是：编译器不需要知道存储的数据的具体生命周期。</td></tr><tr><td>4</td><td>常量存储</td><td>常量值直接存储在程序代码内部，这样做是安全的，因为他们永远不会被改变</td></tr><tr><td>5</td><td>非RAM存储</td><td>如果数据完全存活于程序外，那么它可以不受程序的任何控制，在程序没有运行时也可以存在，例子是流对象和<strong>持久化对象</strong></td></tr></tbody></table><h3 id="2-2-2特例：基本类型"><a href="#2-2-2特例：基本类型" class="headerlink" title="2.2.2特例：基本类型"></a>2.2.2特例：基本类型</h3><p>在程序中常用到的基本类型，它们需要特殊处理。<br>Java要确定每种基本类型所占存储空间的大小。它们的大小并不像其他大多数语言那样随机器硬件架构的变化而变化。这种所占存储空间大小的不变性是Java程序比其他大多数语言编写的程序更具有可移植性的原因之一。</p><table><thead><tr><th>基本类型</th><th>大小</th><th>最小值</th><th>最大值</th><th>包装类型</th></tr></thead><tbody><tr><td>boolean</td><td>-</td><td>-</td><td>-</td><td>Boolean</td></tr><tr><td>char</td><td>16-bit</td><td>Unicode 0</td><td>Unicode 2^16-1</td><td>Character</td></tr><tr><td>byte</td><td>8 bits</td><td>-128</td><td>+127</td><td>Byte</td></tr><tr><td>short</td><td>16 bits</td><td>-2^15</td><td>+2^15-1</td><td>Short</td></tr><tr><td>int</td><td>32 bits</td><td>-2^31</td><td>+2^31-1</td><td>Integer</td></tr><tr><td>long</td><td>64 bits</td><td>-2^63</td><td>+2^63-1</td><td>Long</td></tr><tr><td>float</td><td>32 bits</td><td>IEEE754</td><td>IEEE754</td><td>Float</td></tr><tr><td>double</td><td>64 bits</td><td>IEEE754</td><td>IEEE754</td><td>Double</td></tr><tr><td>void</td><td>-</td><td>-</td><td>-</td><td>Void</td></tr></tbody></table><p>所有数值类型都有正负号，所以不要去寻找无符号的数值类型。<br>基本类型的包装器类，使得可以在堆中创建一个非基本对象，用来表示对的基本类型。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span> c = <span class="string">'x'</span>;</span><br><span class="line">Character ch = <span class="keyword">new</span> Charater(c);</span><br></pre></td></tr></table></figure></p><p>也可以是<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Charater ch = <span class="keyword">new</span> Charater(<span class="string">'x'</span>);</span><br></pre></td></tr></table></figure></p><p>而且Java SE5的自动包装功能将自动地将基本类型转换为包装类型，并可以反向转换<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Character ch = <span class="string">'x'</span>;</span><br><span class="line"><span class="keyword">char</span> c=ch;</span><br></pre></td></tr></table></figure></p><h5 id="高精度数字"><a href="#高精度数字" class="headerlink" title="高精度数字"></a>高精度数字</h5><p>Java提供了两个用于高精度计算的类：BigInteger、BigDecimal.他们属于包装类型范畴，但是没有基本类型。<br>BigInteger支持任意精度的整数。也就是说，在运算中，可以表示任意大小的整数，而不会丢失任何信息。<br>BigDecimal支持任何精度的定点数，可以进行货币运算。</p><h3 id="2-2-3Java中的数组"><a href="#2-2-3Java中的数组" class="headerlink" title="2.2.3Java中的数组"></a>2.2.3Java中的数组</h3><p>Java主要的目标之一是安全性。Java确保数组会被初始化，而不能在它的范围之外被访问。这种检查是以每个数组上少量的内存开销及运行时的下标检查为代价的。但由此换来的是安全性和效率的提高，因此付出的代价是值得的。</p>]]></content>
    
    <summary type="html">
    
      《Thinking in java》读书笔记(8)
    
    </summary>
    
    
      <category term="读书笔记" scheme="https://us-forever.com/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>《Thinking in java》读书笔记(7)</title>
    <link href="https://us-forever.com/2017/06/14/%E3%80%8AThinking-in-java%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-7/"/>
    <id>https://us-forever.com/2017/06/14/《Thinking-in-java》读书笔记-7/</id>
    <published>2017-06-14T10:36:54.000Z</published>
    <updated>2018-01-09T10:37:54.907Z</updated>
    
    <content type="html"><![CDATA[<h1 id="第一章-对象导论"><a href="#第一章-对象导论" class="headerlink" title="第一章 对象导论"></a>第一章 对象导论</h1><h2 id="1-14总结"><a href="#1-14总结" class="headerlink" title="1.14总结"></a>1.14总结</h2><p>面向过程型语言：数据定义和函数调用。<br>这样的程序容易把人搞迷糊，因为它们使用的表示术语更加面向计算机而不是你要解决的问题。<br>OOP语言中虽然添加了许多新的概念，但是编写良好的Java程序通常要比过程型程序要简单的多，而且易于理解的多。<br>面向对象程序设计带给人们的喜悦：</p><ul><li>1.对于设计良好的程序，通过阅读它，就可以很容易的理解其代码。</li><li>2.通常，其代码也会很少，因为许多问题都可以通过重用现有的类库代码而得到解决。</li></ul><p>这些天一直在看这本书，因为工作的原因，所以看得时间比较少，看得也比较慢，但是总算有一个好的开端。希望自己保持，把自己想看的书都看完。<br>第一章看完还是有点慢，大概花了9天的时间。后边的章节内容比较多，东西也比较难懂，也许会更慢，但是自己唯一要做到的就是不求速度有多快，只求一点一点的看完，把东西嚼透。</p>]]></content>
    
    <summary type="html">
    
      《Thinking in java》读书笔记(7)
    
    </summary>
    
    
      <category term="读书笔记" scheme="https://us-forever.com/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>一些想法</title>
    <link href="https://us-forever.com/2017/06/14/%E4%B8%80%E4%BA%9B%E6%83%B3%E6%B3%95/"/>
    <id>https://us-forever.com/2017/06/14/一些想法/</id>
    <published>2017-06-14T09:28:25.000Z</published>
    <updated>2018-01-09T09:31:15.928Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>又开始找工作了，觉得好难啊。</p></blockquote><a id="more"></a><p>之前来CSDN工作，觉得可以转正，真的挺不错的，那只是以前的想法，现在看来，人家说转正，也是如果到时候真的确认到不行的地步才会找你。无奈，本来这个项目就没有什么技术含量，所以你做的好人家也不会觉得你在这方面优秀。并不是说没有技术含量的项目不会体现一个人的优势，而是说这样一个项目根本无法体现你学习能力强等等的优势。<br>现在公司不缺人，所以，没有必要养你这种没有经验，又需要教的闲鱼。自己一时不知道自己何去何从。有时候想，谁谁谁不是拿到了多少薪资，有时候又结合现状想到自己能找一份4k-5k工作先干着，等有了经验。有时候觉得自己也应该能拿到8K-9K吧。</p><blockquote><p>现实就是这样。让你无法定位自己。因为你太渺小了，对于外面世界，别人有多强你不了解，别人有多弱，你也不了解。所以无法从整个行业来定位自己的水平。</p></blockquote><p>不过有时候还是比较对自己有信心的。因为自己在班级里也是数一数二的编程大神，现在在社会混，虽然人变多了，变得复杂了。但是我们那些该有的东西还在。一编程就停不下来的情绪、有了成果就开心的和花一样的喜悦、乐意钻研的劲、还有编起程来不眠不休忘记吃饭的状态。我想这些东西都不会变。而且它会使得我们在社会中逐渐变得有一定的优势。加油。</p><blockquote><p>想找一份工作，踏踏实实的干着。</p></blockquote><p>现在我渴求的就是一份工作，让自己踏踏实实的干着，能满足自己在北京，租房子、吃饭的基本开销就可以。让父母不为我找工作担心。让我也静下来，开始我的事业生涯。</p><blockquote><p>写这个博客的时候还是对自己有信心的。所以说一些自己的优点吧。</p></blockquote><p>真的是非常喜欢编程，为了走这条路，还曾经在高三复习一年。自己在大学一开始学习C++到Java到数据库等，一直都是在编程。所以自己的理论性不是很强，实践能力非常强。还在最后的一个学期拿到了奖学金。自己也为了这些参加过北京大学暑期学校的ACM培训。也拿到过自治区级奖项，还参加过哈工大举行的ACMICPC的竞赛。觉得自己的大学生活还是非常棒的。自己一直觉得自己在程序设计语言这方面有着一定的天赋。学习比较快，会类比，能举一反三。</p><p style="color:#d28642;">愿自己尽快的拿到一家企业的Offer，放下自己的心事。</p>]]></content>
    
    <summary type="html">
    
      一些想法
    
    </summary>
    
    
      <category term="随笔" scheme="https://us-forever.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>《Thinking in java》读书笔记(6)</title>
    <link href="https://us-forever.com/2017/06/12/%E3%80%8AThinking-in-java%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-6/"/>
    <id>https://us-forever.com/2017/06/12/《Thinking-in-java》读书笔记-6/</id>
    <published>2017-06-12T10:14:55.000Z</published>
    <updated>2018-01-15T02:04:58.822Z</updated>
    
    <content type="html"><![CDATA[<h1 id="第一章-对象导论"><a href="#第一章-对象导论" class="headerlink" title="第一章 对象导论"></a>第一章 对象导论</h1><h2 id="1-13Java与Internet"><a href="#1-13Java与Internet" class="headerlink" title="1.13Java与Internet"></a>1.13Java与Internet</h2><p>Java只是众多程序设计语言中的一种，你有可能会问：它为什么如此重要？为什么它促进计算机编程语言向前迈进了革命性的一步？其实它不仅解决了传统的单机程序，而且还解决了万维网（<strong>WWW</strong>）上的程序设计。</p><h3 id="1-13-1Web是什么"><a href="#1-13-1Web是什么" class="headerlink" title="1.13.1Web是什么"></a>1.13.1Web是什么</h3><p>Web看似很神秘，如果想要看清它的面貌，首先得理解<strong>客户端/服务系统</strong>，它是计算技术中另一个充满诸多疑惑的话题。<br><a id="more"></a></p><h5 id="1-客户端-服务器技术"><a href="#1-客户端-服务器技术" class="headerlink" title="1.客户端/服务器技术"></a>1.客户端/服务器技术</h5><p>客户端/服务器技术的核心思想是：系统具有一个中央信息存储池(central repository of information),用来存储某种数据，它通常存储在数据库中，你可以根据需要将它分发给某些人员或机器集群。它的关键概念在于信息存储池的位置集中于中央，这使得它可以被修改，然后这些信息可以传播给信息消费者。<br>信息存储池、用于分发信息的软件以及信息与软件所驻留的机器或机群的总称叫<strong>服务器</strong>。<br>驻留在用户机器上的软件与服务器进行通信，以获取信息、处理信息，然后将它们显示在被称为<strong>客户机</strong>的用户机器上。<br>客户端/服务器计算技术的基本概念并不复杂。问题在于你只有单一的服务器，却要同时为多个客户服务。<br>这意味着必须保证一个客户插入的新数据不会覆盖另外一个客户插入的新数据，也不会在插入过程中丢失（这被称为<strong>事务处理</strong>）。<br>最后一个最重要的性能问题是：可能在任意时刻都有成百上千的客户想服务器发送请求，所以任何小的延迟都会产生重大影响。为了将延迟最小化，程序员努力减轻处理任务的负载，通常是分散给客户端机器处理，但是有时也会使用所谓的<strong>中间件</strong>将负载分散给在服务器端的其他机器。（中间件也被用来提高可维护性。）</p><h5 id="2-Web就是一台巨型服务器"><a href="#2-Web就是一台巨型服务器" class="headerlink" title="2.Web就是一台巨型服务器"></a>2.Web就是一台巨型服务器</h5><p>最初，只有一种很简单的单向过程：你对某个服务器产生一个请求，然后它返回给你一个文件，你的机器（也就是客户机）上的浏览器软件根据本地机器的格式来解读这个文件。但是很快人们就希望可以做的更多，人们希望实现客户端/服务器能力，使得客户可以将信息反馈给服务器。<br>其实Web已经向前跨进了一大步：一段信息不经修改就可以在任意型号的机器上进行显示。<br>因为浏览器只是显示器，它甚至不能执行最简单的计算任务。为了解决这一问题。人们采取了不同的方法，使得可以播放质量更好的动画和视频。剩下的问题通过引入客户端浏览器中运行程序的能力就能解决。这被称为“<strong>客户端编程</strong>”。</p><h3 id="1-13-2客户端编程"><a href="#1-13-2客户端编程" class="headerlink" title="1.13.2客户端编程"></a>1.13.2客户端编程</h3><p>Web最初的“服务器-浏览器”设计是为了能够支持交互性内容，但是基于交互性完全有服务器提供。服务器产生静态页面，提供给只能解释并显示它们的客户端浏览器。基本的HTML（HyperText Markup Language,超文本标记语言）包含有简单的数据收集机制：文本输入框、复选框、单选框、列表和下拉式列表以及按钮—-它只能被编程来实现复位变淡上的数据或提交表单给服务器。这种提交动作通过所以的Web服务器都提供的<strong>通用网关接口</strong>（common gateway interface,CGI）传递。提交内容也会告诉CGI应该如何处理。<br>几乎所有的语言都可以编写CGI程序，而Perl已经成最常见的选择，而现在Python已对其产生了巨大的冲击，因为它更强大且简单。<br>CGI程序的响应时间依赖于所需发送的数据量的大小，以及服务器和Internet的负载。（此外，CGI程序启动也是非常慢的）。<br>所有问题的解决方式就是“客户端编程”。客户端编程意味着Web浏览器能用来执行任何它可以完成的工作，使得返回给用户的结果更加迅捷，而且使得你的网站更加具有交互性。<br>客户端编程的问题在于：它与通常意义上的编程十分不同，参数几乎相同，而平台却不同。<br>本节剩余的部分对客户端编程的问题和方法作一概述。</p><h5 id="1-插件"><a href="#1-插件" class="headerlink" title="1.插件"></a>1.插件</h5><p>客户端编程所迈出的最重要的一步就是插件（plug-in）的开发。通过这种方式，程序员可以下载一段代码，并将其插入到浏览器中适当的位置，以此来为浏览器增加新功能。</p><h5 id="2-脚本语言"><a href="#2-脚本语言" class="headerlink" title="2.脚本语言"></a>2.脚本语言</h5><p>插件引发了浏览器脚本语言（scripting language）的开发。通过使用某种脚本语言，你可以将客户端程序的源码直接嵌入到HTML页面中，解释这种语言的插件在HTML页面被显示时自动激活。<br>而JavaScript可以在浏览器不需要任何插件的情况下得到支持。</p><h5 id="3-Java"><a href="#3-Java" class="headerlink" title="3.Java"></a>3.Java</h5><p>Java不仅是一种功能强大的、安全的、跨平台的、国际化的编程语言，而且它还在不断的扩展，以提供更多的语言功能和类库，能够优雅地处理在传统编程语言中很难解决的问题，例如并发、数据库访问、网络编程和分布式计算。Java是通过applet以及使用Java Web Start来进行客户端编程的。<br>它提供一种分发软件的方法，一旦用户需要客户端软件时，就自动从服务器把客户端软件分发给用户。</p><h5 id="4-备选方案"><a href="#4-备选方案" class="headerlink" title="4.备选方案"></a>4.备选方案</h5><p>Macromedia的Flex，它允许你创建基于Flash的与applet相当的应用。</p><h5 id="5-NET与C"><a href="#5-NET与C" class="headerlink" title="5..NET与C"></a>5..NET与C</h5><p>曾几何时，Java applet的主要竞争对手是微软的ActiveX—–尽管它要求客户端必须运行在windows平台上。<br>它的优势是：他们可以看得到Java在什么方面做得好，在什么方面做得还不够好，然后基于此去构建，并具备Java不具备的优点。这时Java出现以来，Java所碰到的真正的竞争。</p><h5 id="6-Internet与Intranet"><a href="#6-Internet与Intranet" class="headerlink" title="6.Internet与Intranet"></a>6.Internet与Intranet</h5><p>当Web技术仅限于用于特定公司信息网络时，它就被称为Intranet（企业内部网）。Intranet比Internet提供了更高的安全性，因为可以物理的控制对公司内部的服务器的访问。</p><p>当人们对各种令人眼花缭乱的解决客户端编程问题的方案时，做好的方法就是进行性价比分析。</p><h3 id="1-13-3服务器端编程"><a href="#1-13-3服务器端编程" class="headerlink" title="1.13.3服务器端编程"></a>1.13.3服务器端编程</h3><p>前面的问题忽略了服务器端的编程，它是Java取得巨大成功的因素之一。<br>用户所有进行服务器端的请求，需要通过修改数据库的，都必须由服务器的某些代码来处理。这就是所谓的服务器端编程。</p>]]></content>
    
    <summary type="html">
    
      《Thinking in java》读书笔记(6)
    
    </summary>
    
    
      <category term="读书笔记" scheme="https://us-forever.com/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
      <category term="Java" scheme="https://us-forever.com/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>《Thinking in java》读书笔记(5)</title>
    <link href="https://us-forever.com/2017/06/10/%E3%80%8AThinking-in-java%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-5/"/>
    <id>https://us-forever.com/2017/06/10/《Thinking-in-java》读书笔记-5/</id>
    <published>2017-06-10T10:10:14.000Z</published>
    <updated>2018-01-15T02:05:15.555Z</updated>
    
    <content type="html"><![CDATA[<h1 id="第一章-对象导论"><a href="#第一章-对象导论" class="headerlink" title="第一章 对象导论"></a>第一章 对象导论</h1><h2 id="1-10对象的创建和生命周期"><a href="#1-10对象的创建和生命周期" class="headerlink" title="1.10对象的创建和生命周期"></a>1.10对象的创建和生命周期</h2><p>在使用对象的时，最关键的问题之一就是它们的生成和摧毁方式。每个对象的生存都需要资源，尤其是内存。当我们不需要这个对象的时候，我们就需要摧毁它，使得资源可以被释放。</p><p>而你创建对象，使用它，并且摧毁它，看似简单，但是可能遇到相对复杂的情况。<br>怎样才知道何时摧毁这些对象？对象数据位于何处？怎样控制对象的生命周期？<br><a id="more"></a><br>C++中认为效率控制是最重要的问题，所以给程序员提供了选择的权利。为了追求最大的执行速度，对象的存储空间和生命周期可以在编写程序是确定，这可以通过将对象置于堆栈或者静态存储区域内来实现。<br>这种方式将存储空间分配和释放置于优先考虑的地位。<br>还有一种方式是在被称为堆（heap）的内存池中动态的创建对象。这样可以直到运行时才知道需要多少对象，他们的生命周期如何,以及它们的具体类型是什么。<br>动态方式有这样一个一般性的逻辑假设：对象趋向于变得复杂，所以查找和释放存储空间的开销不会对对象的创建造成重大的冲击。动态方式所带来的灵活性真是解决一般化编程问题的要点所在。<br>Java完全采用了动态内存分配的方式。每当想创建新对象时，就要使用<strong>new</strong>关键字来构建此对象的动态实例。<br>还有一个议题，就是对象生命周期。对于允许在堆栈上创建的对象的语言，编译器可以确定对象存活的时间，并可以自动销毁它。然而要是在堆上创建的对象，编译器对它的生命周期就一无所知。<br>在像C++这样的语言中，必须通过编程来确定何时销毁对象，这可能因为不能正确的处理而导致内存泄漏。Java提供了<strong>垃圾回收器</strong>的机制，它可以自发现对象何时不再使用，继而销毁它。</p><h2 id="1-11异常处理：处理错误"><a href="#1-11异常处理：处理错误" class="headerlink" title="1.11异常处理：处理错误"></a>1.11异常处理：处理错误</h2><p>自从编程语言问世以来，错误处理就始终是最困难的问题之一。<br>一位涉及一个良好的错误处理机制非常困难，所以许多语言直接略去这个问题，将它交给程序库设计者处理，而这些设计者也只是提出一些不彻底的方案，使得这部分通常也只是被忽略。<br>异常是一种对象，它从出错点被“抛出”，并被专门设计用来处理特定类型错误的相应异常处理器“捕获”。<br><strong>异常</strong>就像是与程序正确执行的路径并行的，所以它不会干扰正常的执行代码。<br>异常提供了一种从错误状态进行可靠恢复的途径。现在不再是只能退出程序，你可以经常进行校验，并回复程序的执行，这些都有助于程序的健壮性。<br>Java一开始就内置了异常处理，而且强制你必须使用它。<br>值得注意的是，异常处理不是面向对象的特征—–尽管在面向对象语言中异常常被表示为一个对象。异常处理在面向对象语言出现之前就已经存在了。</p><h2 id="1-12并发编程"><a href="#1-12并发编程" class="headerlink" title="1.12并发编程"></a>1.12并发编程</h2><p>在计算机编程中有一个基本概念，就是在同一时刻处理多个任务的思想。<br>最初，程序员们用所掌握的有关机器底层的只是来编写中断服务程序，主进程的挂起是通过硬件的终端来实现的。这虽然能解决问题，但是难度太大，而且不能移植。<br>我们怎样才能办到把问题切分成多个可独立运行的部分（任务），从而提高程序的响应能力？<br>在程序中，这些彼此独立运行的部分称为<strong>线程</strong>。上述概念被称为<strong>并发</strong>。<br>通常线程只是一种为单一处理器分配执行时间的手段。但是如果系统支持多处理器，那么每个任务都可以指派给不同的处理器，并且它们是真正地并行执行。<br>但是其实存在一个隐患：共享资源。如果多个任务都要访问一个资源，那么就会出现问题。为了解决这个问题：<em>某个任务锁定某项资源，完成其任务，然后释放锁定资源，是其它任务可以使用这项资源</em>。<br>Java的并发是内置于语言中的，Java SE5已经添加了大量的额外的库支持。</p>]]></content>
    
    <summary type="html">
    
      《Thinking in java》读书笔记(5)
    
    </summary>
    
    
      <category term="读书笔记" scheme="https://us-forever.com/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
      <category term="Java" scheme="https://us-forever.com/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>《Thinking in java》读书笔记(4)</title>
    <link href="https://us-forever.com/2017/06/07/%E3%80%8AThinking-in-java%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-4/"/>
    <id>https://us-forever.com/2017/06/07/《Thinking-in-java》读书笔记-4/</id>
    <published>2017-06-07T09:59:18.000Z</published>
    <updated>2018-01-15T02:05:38.453Z</updated>
    
    <content type="html"><![CDATA[<h1 id="第一章-对象导论"><a href="#第一章-对象导论" class="headerlink" title="第一章 对象导论"></a>第一章 对象导论</h1><h2 id="1-9容器"><a href="#1-9容器" class="headerlink" title="1.9容器"></a>1.9容器</h2><p>当在解决某个特定问题需要创建多少个对象，或者它们将存活多少时间，那么久不可能知道如何存储这些对象。如何才能知道需要多少空间来创建这些对象呢？<br><a id="more"></a><br>对于这问题而言，它的解决方案似乎过于轻率：创建另一种对象类型。这种新的对象类型持有对其他对象的引用。这个在大多数语言中都有数组类型来实现相同的功能。通常称这个为<strong>容器</strong>。<br>容器：在任何时候都能扩充自己以容纳你置于其中的所有对象，因此不需要知道将来会把多少个对象置于容器中，只需创建一个容器对象，然后让他处理所有细节。<br>每种OOP语言都有自己的容器</p><table><thead><tr><th>语言</th><th>容器</th></tr></thead><tbody><tr><td>C++</td><td>标准模板类库(Standard Template Library,STL)</td></tr><tr><td>Object Pascal</td><td>可视化构件库(Visual Component Libray,VCL)</td></tr><tr><td>Smalltalk</td><td>非常完备的容器集</td></tr></tbody></table><p>一般语言只有一两钟通用容器。<br>而在Java中，具有满足不同需求的容器。</p><table><thead><tr><th>容器名称</th><th>容器名称</th></tr></thead><tbody><tr><td>List</td><td>用于存储序列</td></tr><tr><td>Map</td><td>用于简历对象之间的关联</td></tr><tr><td>Set</td><td>每种对象类型只持有一个</td></tr></tbody></table><p>还有更多构件，如：队列、树、堆栈等。<br>从设计的观点来看，真正需要的只是一个可以被操作的，从而解决问题的序列。<br>但是一般单一的容器不足以满足所有需求。<br>那么需要不同的容器的原因有两个：</p><ul><li>1.不同的容器提供了不同的类型的接口和外部行为。</li><li>2.不同的容器对于某些操作具有不同的效率。</li></ul><p>差异的对比</p><table><thead><tr><th></th><th>ArrayLsit</th><th>LinkedList</th></tr></thead><tbody><tr><td>随机访问</td><td>花费固定时间</td><td>访问越靠近表尾的元素，话费时间越长</td></tr><tr><td>插入元素</td><td>时间开销大</td><td>时间开销小</td></tr></tbody></table><h2 id="1-9-1参数化类型"><a href="#1-9-1参数化类型" class="headerlink" title="1.9.1参数化类型"></a>1.9.1参数化类型</h2><p>在Java SE5出现之前，容器存储的对象都只具有Java中的通用类型：Object.单根继承结构意味着所有的东西都是Object类型。所以可以存任何东西，很容易复用。<br>但是如果我们存储一个对象时，由于只能存储Object类型，所以我们需要<strong>向上转型</strong>为Object,使得我们在取出的时候不知道在置入容器之前的具有使用接口的对象是什么。<br>所以我们需要使用<strong>向下转型</strong>。向上转型是安全的，但是向下转型几乎是不安全的。<br>如Circle是Shape类型，但不知道某个Object是Circle类型还是Shape类型。<br>那么创建一个知道自己所保存的对象类型的容器，不是更有意义吗？<br>所以在Java SE5的时候增加了参数化类型，在Java中称它为范型。<br>例如创建一个存储Shape的ArrayList：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ArrayList&lt;Shape&gt; shapes = <span class="keyword">new</span> ArrayList&lt;Shape&gt;();</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      《Thinking in java》读书笔记(4)
    
    </summary>
    
    
      <category term="读书笔记" scheme="https://us-forever.com/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
      <category term="Java" scheme="https://us-forever.com/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>决定</title>
    <link href="https://us-forever.com/2017/06/07/%E5%86%B3%E5%AE%9A/"/>
    <id>https://us-forever.com/2017/06/07/决定/</id>
    <published>2017-06-07T09:26:29.000Z</published>
    <updated>2018-01-09T09:27:37.441Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>每个人的想法都是不同的，但是请不要把你的想法灌输给别人。</p></blockquote><p>有一句话叫既来之，则安之。为什么你来着工作却不认真，其实每一份工作都一样，无论正式还是实习。都要脚踏实地的去做。这是态度，和其它无关。<br><a id="more"></a></p><p>我搞笑你今天所说的话，但是我很感谢这种话你会对我说，而不是选择不和我说，默默地去做。但是我和你不是一类人。请不要用你的想法去约束我。谢谢。</p><p>还有就是写程序的时候，我做的只是我自己想要完成的东西。我做的软件不一定是给经常使用的客户做的。更有可能是仅仅只使用一次的人。所以很多字段的数据校验是非常有必要的。你不做可以，请不要要求我。</p><p>每个人都有自己的决定，你按照你自己的走就行了。我也有自己的想法。OK？</p>]]></content>
    
    <summary type="html">
    
      决定
    
    </summary>
    
    
      <category term="随笔" scheme="https://us-forever.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>《Thinking in java》读书笔记(3)</title>
    <link href="https://us-forever.com/2017/06/06/%E3%80%8AThinking%20in%20java%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-3/"/>
    <id>https://us-forever.com/2017/06/06/《Thinking in java》读书笔记-3/</id>
    <published>2017-06-06T15:32:35.000Z</published>
    <updated>2017-06-07T07:48:02.987Z</updated>
    
    <content type="html"><![CDATA[<h1 id="第一章-对象导论"><a href="#第一章-对象导论" class="headerlink" title="第一章 对象导论"></a>第一章 对象导论</h1><h2 id="1-7伴随多态的可互换对象"><a href="#1-7伴随多态的可互换对象" class="headerlink" title="1.7伴随多态的可互换对象"></a>1.7伴随多态的可互换对象</h2><p>在处理类型的层次结构时，经常想把一个对象不当做它所属的特定类型来对待，而是将其当做其基类来看待。<br>在“几何形”的例子中，方法操作都是泛化（generic）的形状,而不关心它们是哪种几何图形。<br><a id="more"></a><br>下图中，BirdController对象仅仅处理泛化的Bird对象，而不了解它们的确切类型。从BirdController的角度来看，<br>这么做非常方便，因为不需要写特别的代码来判定他们要处理的Bird对象的确切类型或行为。当move()方法别调用时，<br>即便忽略Bird的具体类型，也产生正确的行为（Goose（鹅）走、飞或者游泳，Penguin(企鹅)走或者游泳），那么，这时如何发生的呢？</p><p><img src="/img/BirdController.PNG" alt="BirdController"></p><p>它的答案就是面向对象编程的重要妙诀：编译器不可能产生传统意义上的函数调用。一个非面向对象编程的编译器产生的函数调用会引起所谓的<strong>前期绑定</strong>，为了解决这个问题，面向对象的程序设计语言使用了<strong>后期绑定</strong>。<br><strong>前期绑定</strong>：也叫<em>静态绑定</em>，在程序执行前方法已经被绑定（也就是说在编译过程中就已经知道这个方法到底是哪个类中的方法），此时由编译器或其它连接程序实现。例如：C。<br>针对java简单的可以理解为程序编译期的绑定；这里特别说明一点，java当中的方法只有final，static，private和构造方法是前期绑定。<br><strong>后期绑定</strong>：也叫<em>动态绑定</em>，在运行时根据具体对象的类型进行绑定。<br>若一种语言实现了<em>后期绑定</em>，同时必须提供一些机制，可在运行期间判断对象的类型，并分别调用适当的方法。也就是说，编译器此时依然不知道对象的类型，但方法调用机制能自己去调查，找到正确的方法主体。不同的语言对后期绑定的实现方法是有所区别的。但我们至少可以这样认为：它们都要在对象中安插某些特殊类型的信息。<br>动态绑定的过程：</p><ul><li>1.虚拟机提取对象的实际类型的方法表；</li><li>2.虚拟机搜索方法签名；</li><li>3.调用方法。</li></ul><p>具体说明：<a href="http://www.cnblogs.com/jstarseven/articles/4631586.html" target="_blank" rel="noopener">Java前期（静态）绑定和后期（动态）绑定</a><br>在某些语言中，必须明确地声明希望某个方法具备后期绑定属性所带来的灵活性，如C++是使用virtual关键字来实现的。<br>在java中方法默认是动态绑定的，不需要关键字来实现，其他语言则不是。<br>为了说明这里编写一段代码，他忽略类型的具体细节，仅仅和基类交互。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">doSomething</span><span class="params">(Shape shape)</span></span>&#123;</span><br><span class="line">shape.erase();</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">shape.draw();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这个方法可以与任何Shape进行对话。<br>如果程序中其他部分用到doSomething()这个方法：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Circle circle = <span class="keyword">new</span> Circle();</span><br><span class="line">Triangle triangle = <span class="keyword">new</span> Triangle();</span><br><span class="line">Line line = <span class="keyword">new</span> Line();</span><br><span class="line">doSomething(circle);</span><br><span class="line">doSomething(triangle);</span><br><span class="line">doSomething(line);</span><br></pre></td></tr></table></figure><p>对doSomething()多的调用会自动地正确处理，而不管对象的确切类型。<br>把导出类看做是它的基类成为<strong>向上转型</strong>(upcasting)。</p><p><img src="/img/upcasting.PNG" alt="upcasting"></p><p>这段代码并没有说 如果时Circle要怎么做，如果是Square要怎么做。如果编写了这种代码，肯定是杂乱不堪的。在后期加入新的类型还需要去改。很麻烦。而是当传给一个匿名的Shape时，也会根据这个Shape的实际类型产生正确的行为。</p><h2 id="1-8单根继承结构"><a href="#1-8单根继承结构" class="headerlink" title="1.8单根继承结构"></a>1.8单根继承结构</h2><p>在OOP中，C++、Java等所有OOP语言的所有的类最终都继承自单一的基类。这个累的名称就是Obejct。我们称之为<strong>单根继承</strong>。</p><p>单根继承保证所有对象都具备某些功能。<br>所有对象很容易地在堆上创建，而参数传递也得到了极大的简化。<br>单根继承是垃圾回收器实现变得简单的多。而来及回收器正是Java相对于C++的重要改进之一。</p>]]></content>
    
    <summary type="html">
    
      《Thinking in java》读书笔记(3)
    
    </summary>
    
    
      <category term="读书笔记" scheme="https://us-forever.com/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
      <category term="Java" scheme="https://us-forever.com/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>听完这首歌忘记所有的一切</title>
    <link href="https://us-forever.com/2017/06/05/%E5%90%AC%E5%AE%8C%E8%BF%99%E9%A6%96%E6%AD%8C%E5%BF%98%E8%AE%B0%E6%89%80%E6%9C%89%E7%9A%84%E4%B8%80%E5%88%87/"/>
    <id>https://us-forever.com/2017/06/05/听完这首歌忘记所有的一切/</id>
    <published>2017-06-05T09:22:37.000Z</published>
    <updated>2018-01-09T09:28:12.265Z</updated>
    
    <content type="html"><![CDATA[<h2 id="多幸运"><a href="#多幸运" class="headerlink" title="多幸运"></a>多幸运</h2><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="//music.163.com/outchain/player?type=2&id=35847037&auto=0&height=66"></iframe><a id="more"></a><p>听着突然听到了这首歌，回忆起很多事情。想到了很多。<br>想到当初的执着是不是不应该。<br>也许吧。<br>都说时间能冲淡一切。这个是真的没有错。<br>但是当初的选择自己绝不会后悔的。</p>]]></content>
    
    <summary type="html">
    
      听完这首歌忘记所有的一切
    
    </summary>
    
    
      <category term="随笔" scheme="https://us-forever.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>《Thinking in java》读书笔记(2)</title>
    <link href="https://us-forever.com/2017/06/04/%E3%80%8AThinking%20in%20java%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-2/"/>
    <id>https://us-forever.com/2017/06/04/《Thinking in java》读书笔记-2/</id>
    <published>2017-06-04T15:39:35.000Z</published>
    <updated>2017-06-06T09:26:25.273Z</updated>
    
    <content type="html"><![CDATA[<h1 id="第一章-对象导论"><a href="#第一章-对象导论" class="headerlink" title="第一章 对象导论"></a>第一章 对象导论</h1><h2 id="1-3每个对象都提供服务"><a href="#1-3每个对象都提供服务" class="headerlink" title="1.3每个对象都提供服务"></a>1.3每个对象都提供服务</h2><p>理解或者开发一个程序的时候，做好的方法之一就是将对象想象为“<strong>服务提供者</strong>”。<br><a id="more"></a><br>那么为了实现更多的服务就是去创建提供服务的一系列对象。<br>将对象看做服务提供者的好处就是：有助于提高对象的<strong>内聚性</strong>。<br><strong>高内聚</strong>是软件设计的基本质量之一。</p><p>但是不宜将所有的功能都交给一个对象，我们可以创建更多对象去完成不同的功能。</p><h2 id="1-4被隐藏的具体实现"><a href="#1-4被隐藏的具体实现" class="headerlink" title="1.4被隐藏的具体实现"></a>1.4被隐藏的具体实现</h2><p>主要引出类的<strong>访问控制</strong>。<br>访问控制的存在原因：</p><ul><li>1.让客户端程序员无法触及他们不应该触及的部分。</li><li>2.允许库设计者可以改变类内部的工作方式而不用担心会影响到客户端程序员。</li></ul><p>Java用是哪个关键字在类的内部设定边界(access specifier访问指定词):public private protected.还有一种就是默认访问权限通常称为 包访问权限</p><table><thead><tr><th>access specifier</th><th>说明</th></tr></thead><tbody><tr><td>public</td><td>紧随其后的元素任何人都可以使用。</td></tr><tr><td>private</td><td>除了类创建者和类型的内部方法之外的任何人都不能访问的元素。</td></tr><tr><td>protected</td><td>和private差不多，在于仅在于继承的类可以访问protected成员，但是不能访问private成员</td></tr><tr><td>default</td><td>类可以访问在同一个包中的其他类的成员，但是包之外，这些成员如同指定了private一样。</td></tr></tbody></table><h2 id="1-5复用具体实现"><a href="#1-5复用具体实现" class="headerlink" title="1.5复用具体实现"></a>1.5复用具体实现</h2><p>代码复用是面向对象程序设计语言所提供的最了不起的优点之一。<br>最简单地复用某个类的方式就是直接使用该类的一个对象。也可以以组合(composition)的方式合成新的类。如果是动态的<strong>组合</strong>，我们也叫它为<strong>聚合</strong>。<br>组合经常被视为“<em>has-a</em>”拥有的关系。就像汽车拥有引擎。<br><img src="/img/has_a.png" alt="has-a"><br>组合带来了极大的灵活性。新类的成员对象通常都声明为private.<br>实际上，在新建类时，应该首先考虑组合关系。因为它更简单，更灵活。<br>采用这种方式，设计会变得更加清晰。<br>虽然继承也创建了新类，但是继承并不具备这么好的灵活性。<br>随意再设计程序的时候要考虑哪里要用到继承，哪里要用到组合。</p><h2 id="1-6继承"><a href="#1-6继承" class="headerlink" title="1.6继承"></a>1.6继承</h2><p>对象本身就是一个很方便的工具，使得你可以通过概念将数据和功能封装到一起。<br>并使用class关键字表示，形成编程中的基本模块。<br>但是如果有一个功能相似的类的话，那么我们还得必须再创建一个。<br>通过集成的方法，我们解决了这个麻烦。<br><img src="/img/20170606.png" alt></p><p>当继承现有的类，也就创造了新的类型，这个新类型不仅包括现有的类型的所有成员，还有他复制基类的接口。</p><p>也就是说，基类和导出类具有相同的对象。</p><p>通过继承而产生的类型等价性是理解面向对象程序设计方法内涵的重要门槛。</p><p>如果基类和导出类永远相同的类型，还拥有相同的行为，这就没有什么特别的意义。<br>那么有2种方法可以使基类和导出类产生差异。</p><ul><li>1.直接在导出类添加新的方法。</li><li>2.覆盖（overriding）那个方法。</li></ul><p><img src="/img/20170606-2.png" alt></p><p><img src="/img/20170606-1.png" alt></p><p>虽然是相同方法，但是在新类型中做的事情却不同。</p><h2 id="1-6-1“是一个”与“像是一个”关系"><a href="#1-6-1“是一个”与“像是一个”关系" class="headerlink" title="1.6.1“是一个”与“像是一个”关系"></a>1.6.1“是一个”与“像是一个”关系</h2><p>如果继承只覆盖基类的方法，就意味着基类和导出类是完全相同的类型。因为他们具有相同的接口。<br>结果就是一个导出类可以完全替代基类，这种纯粹替代，通常被称为<em>替代原则</em>。我们称之为<em>is-a</em>(是一个)。<br>如：一个圆是一个几何形状。<br>有时候必须在新类型中添加新的接口，这样新类型完全可以替代基类，但是替代并不完美，以为基类无法访问新的接口。<br>我们叫着为<em>is-like-a</em>(像是一个)。<br><img src="/img/coolingsystem.png" alt="制冷系统"><br>这时两张不同的继承方式，我们在使用的时候应该注意场景。</p>]]></content>
    
    <summary type="html">
    
      《Thinking in java》读书笔记(2)
    
    </summary>
    
    
      <category term="读书笔记" scheme="https://us-forever.com/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
      <category term="Java" scheme="https://us-forever.com/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>《Thinking in java》读书笔记(1)</title>
    <link href="https://us-forever.com/2017/06/01/%E3%80%8AThinking%20in%20java%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-1/"/>
    <id>https://us-forever.com/2017/06/01/《Thinking in java》读书笔记-1/</id>
    <published>2017-06-01T15:58:46.000Z</published>
    <updated>2017-06-05T02:42:06.760Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>第一章 1.1-1.2</p></blockquote><h1 id="第一章-对象导论"><a href="#第一章-对象导论" class="headerlink" title="第一章 对象导论"></a>第一章 对象导论</h1><p>其中前言说到<strong>OOP</strong>是计算机表达媒体的重要组成部分，说到本章将讲解<strong>OOP</strong>的编程方法和编程理论。<br><a id="more"></a></p><h2 id="1-1抽象过程"><a href="#1-1抽象过程" class="headerlink" title="1.1抽象过程"></a>1.1抽象过程</h2><p><strong>编程语言都是抽象机制。</strong></p><p>人们在现实生活中解决问题的复杂性取决于抽象的类型和质量，其实编程也是一样。<br>如果想更好的完成计算机语言的编程，应该把专注点放在要解决的问题的结构上来，而不是计算机的结构。许多编程语言在前期完成了解决某种特定类型的问题，却无法完成超出这个领域的问题。而面向对象的编程可以解决这一难题，使得程序可以通过添加对象，是自己适合某个特定问题的解决上。<br>而这种面向对象语言有5个基本特性：</p><ul><li>1.万物皆为对象。</li><li>2.程序是对象的集合，它们通过发送消息来告知彼此所要做的。</li><li>3.每个对象都有自己的由其他对象所构成的存储。</li><li>4.每个对象都拥有其类型。</li><li>5.某一特定类型的所以对象都可以接收同样的信息。</li></ul><p>Booch也对对象提出了一个简洁的描述：<strong>对象具有状态、行为和标识</strong>。</p><h2 id="1-2每个对象都有一个接口"><a href="#1-2每个对象都有一个接口" class="headerlink" title="1.2每个对象都有一个接口"></a>1.2每个对象都有一个接口</h2><p>几乎所有的对象都是用class关键字。类描述了具有相同特性和行为的对象的结合。当我们看到类型时，可以将它看做类来考虑，反之亦然。<br>一个类被创建，就可创建类的任意个对象，然后去操作他们。面向对象程序设计的挑战之一就是在问题空间的元素和解空间的对象之间创建一对一的映射。那么如何获得有用的对象呢？必须有某种方式产生对对象的请求，使得对象完成各种任务。<br>每个对象都只能满足某些请求，这些请求有对象的接口（interface）定义。决定接口的便是类型。<br>以电灯泡为例：<br><img src="/img/light.png" alt="Light类图"><br>Light it = new  Light();<br>il.on();</p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;第一章 1.1-1.2&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;第一章-对象导论&quot;&gt;&lt;a href=&quot;#第一章-对象导论&quot; class=&quot;headerlink&quot; title=&quot;第一章 对象导论&quot;&gt;&lt;/a&gt;第一章 对象导论&lt;/h1&gt;&lt;p&gt;其中前言说到&lt;strong&gt;OOP&lt;/strong&gt;是计算机表达媒体的重要组成部分，说到本章将讲解&lt;strong&gt;OOP&lt;/strong&gt;的编程方法和编程理论。&lt;br&gt;
    
    </summary>
    
    
      <category term="读书笔记" scheme="https://us-forever.com/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
      <category term="Java" scheme="https://us-forever.com/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>六一儿童节快乐</title>
    <link href="https://us-forever.com/2017/06/01/%E5%85%AD%E4%B8%80%E5%84%BF%E7%AB%A5%E8%8A%82%E5%BF%AB%E4%B9%90/"/>
    <id>https://us-forever.com/2017/06/01/六一儿童节快乐/</id>
    <published>2017-06-01T09:21:09.000Z</published>
    <updated>2018-01-09T09:25:55.330Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>6.1儿童节快乐^-^。</p></blockquote><p>时间过得很快啊，一年已经过去了一半啦，今天给自己开启一个新的里程碑。新的合租生活的开始，新的体验的开始。新的计划的开始。<br><a id="more"></a><br>昨晚才知道和我一起合租的其他几个房间住的都是女孩子…，看来我的多多注意我的举止行为，更加要注意个人卫生问题了。</p><p>然后现在呢有了自己的小空间，这样也就说到了很早就想要去做的事情，那就是学习。</p><p>新计划开始了，打算重新从头开始好好读《Thinking in java》这本书。虽然以前读了一些，但是觉得自己都忘记了，现在自己要从新开始读。每天写好读书笔记。忘记的时候还可以看看。</p><p>以前想要坚持做得事情好像都被打断了，还是需要自己的努力坚持吧。这也算是读书笔记的第一篇吧。<br>加一个链接~</p><p>加油！</p>]]></content>
    
    <summary type="html">
    
      六一儿童节快乐
    
    </summary>
    
    
      <category term="随笔" scheme="https://us-forever.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>The mood may be better</title>
    <link href="https://us-forever.com/2017/05/31/The-mood-may-be-better/"/>
    <id>https://us-forever.com/2017/05/31/The-mood-may-be-better/</id>
    <published>2017-05-31T09:15:10.000Z</published>
    <updated>2018-01-09T09:17:26.830Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>搬家啊，不算麻烦。</p></blockquote><p>本想着搬家一定很麻烦，没有想到还算轻松。想想自己一开始来的时候，那才叫一个麻烦呢。每天都背着一大书包的书、电脑、衣服，满北京的找工作。真心辛苦，但是不知道自己是怎样熬过那两个星期的。想想也是很佩服自己。</p><p>虽然自己一个人生活很艰苦，但是觉得还是很不错的，和别人住在一起有很多不便，也不方便自己学习。发现自己还是适合一个人，这样能让自己冷静下来学习。</p><p><img src="/img/wangjing.jpg" alt="望京"><br>在这么一个繁华的大都市，想要站稳了，需要付出的努力是很多的。不仅仅是找工作那么点点的辛苦，更多的是在夜深人静时的认真学习、在酷暑下的认真工作、在生活中的认真做人、脚踏实地的认真做事。</p>]]></content>
    
    <summary type="html">
    
      The mood may be better
    
    </summary>
    
    
      <category term="随笔" scheme="https://us-forever.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>NoTitle</title>
    <link href="https://us-forever.com/2017/05/27/NoTitle/"/>
    <id>https://us-forever.com/2017/05/27/NoTitle/</id>
    <published>2017-05-27T09:13:07.000Z</published>
    <updated>2018-01-15T02:06:49.908Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>因为之前有一段时间没在公司，而是回学校忙毕设，所以没有更新博客。</p></blockquote><p>今天真的是，哎<strong>╮(╯▽╰)╭</strong>，不知道怎么说，早晨还在等7点钟的闹铃，却忘记今天是周六，没有闹铃的，因为下周二端午节的关系，所以今天需要上班，而我的闹铃只有周一到周有，所以是等不到了，幸好室友在7：30的时候提醒了我，不然肯定要迟到（结果还是迟到了…..）。</p><p>说句实在话，其实7：40出来都不会迟到，无奈今天公交堵得水泄不通，而我看见了，但是因为自己有点累，所以不想骑自行车去坐地铁，结果就走上了迟到的不归路。整整是堵了1个小时…..<br><a id="more"></a><br>中途有人下车，我还是选择赌一把，我要试试能堵多长时间，结果我和自己开了一个玩笑。最终自己迟到了1个小时。</p><p>其实吧，人生中很多东西都看运气的。比如说我来CSDN实习，真的是运气。之前看好的一个公司，自己很想留在那里，却被无情的非技术的二面拒之门外了。就在那晚刚好看见了招聘的信息。然后就投了，第二天就给我打电话说让我面试。面试当前就得知自己准备一些上班需要准备的东西。</p><p>周二就开始来上班了，真的很快。</p><p>也许什么时候一转身就遇见了你。也说不定呢。很期待。</p><p>自己也是想了很久想不到主题，那就No Title吧。</p>]]></content>
    
    <summary type="html">
    
      NoTitle
    
    </summary>
    
    
      <category term="随笔" scheme="https://us-forever.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>努力吧，少年</title>
    <link href="https://us-forever.com/2017/05/26/%E5%8A%AA%E5%8A%9B%E5%90%A7%EF%BC%8C%E5%B0%91%E5%B9%B4/"/>
    <id>https://us-forever.com/2017/05/26/努力吧，少年/</id>
    <published>2017-05-26T09:11:42.000Z</published>
    <updated>2018-01-15T02:06:31.433Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>看了再多也没有用，想了再多也是白想。</p></blockquote><p>现在的自己应该已经认识到那些事情是不可能的了，让自己不要再去想了，总之慢慢的自己会选择放弃吧，也许也会选择坚持，但是自己知道坚持的结果就是，她不会和你在一起的。</p><p>总是要放弃的吧，专注自己的事业，不要把心思放在她身上。那些东西都会是虚无缥缈的，自己之前对她做了这么多，最后换来的还不是这样的结果。<br><a id="more"></a><br>也许她是狠心想要让你放弃才故意不去理你了。</p><p>现在自己所要做的事情就是把自己的工作做好，认真学习自己不会的东西，学习工作相关的东西，让自己变得对企业有价值，让自己找到一份好的工作，好好报答自己的父母。</p><p>其实还是忙起来好，什么都不会去想，自己还是以前那个自己，一写起代码来就停不下来，总要有个结果。相信自己会在这方面做的很好，相信自己以后一会变成一个技术大牛吧。</p><p>为此而努力吧！fighting！</p>]]></content>
    
    <summary type="html">
    
      努力吧，少年
    
    </summary>
    
    
      <category term="随笔" scheme="https://us-forever.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>想念那些日子</title>
    <link href="https://us-forever.com/2017/05/08/%E6%83%B3%E5%BF%B5%E9%82%A3%E4%BA%9B%E6%97%A5%E5%AD%90/"/>
    <id>https://us-forever.com/2017/05/08/想念那些日子/</id>
    <published>2017-05-08T09:09:02.000Z</published>
    <updated>2018-01-15T02:06:17.548Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>时间过得真快，来北京的日子也已经有78天了，实习也有2个月了。</p></blockquote><p>现在的自己还是很怀念上学的日子，每每想起来都有不同的心情。虽然在学校的日子里有很多烦心的事情，但是总是开心的，现在在公司里不想上班，好像就和当初在宿舍里不想上课的心情是一样的。</p><p>但是发现自己的心境确实不同了，之前自己找工作的时候好像各种担心自己找不到工作，现在自己就算不能在这里转正也无所谓了。总有一个公司会收留我的。不知道是哪里来的信心。想一想过几天就要答辩了，我本打算少请几天假，多留在公司里忙项目，但是今天听到了领导的一些话，觉得自己还是可以多请几天假，多和自己的大学同学玩一玩，毕竟大学的的时间还剩不多了。想到这里感觉自己的眼泪好像都要流出来了，不知道为什么。<br><a id="more"></a><br>来一张合影：</p><blockquote><p><img src="/img/2017-05-08.jpg" alt="608合影"></p></blockquote><p>现在想一想还是挺想上学的，如果自己能考研，考上一个好点的学校，那该有多好啊。</p>]]></content>
    
    <summary type="html">
    
      想念那些日子
    
    </summary>
    
    
      <category term="随笔" scheme="https://us-forever.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>此时此刻的心情</title>
    <link href="https://us-forever.com/2017/05/04/%E6%AD%A4%E6%97%B6%E6%AD%A4%E5%88%BB%E7%9A%84%E5%BF%83%E6%83%85/"/>
    <id>https://us-forever.com/2017/05/04/此时此刻的心情/</id>
    <published>2017-05-04T09:54:37.000Z</published>
    <updated>2018-01-08T09:56:15.175Z</updated>
    
    <content type="html"><![CDATA[<h1 id="欢迎来到我的博客"><a href="#欢迎来到我的博客" class="headerlink" title="欢迎来到我的博客"></a>欢迎来到我的博客</h1><blockquote><p>也欢迎你们访问我的CSDN技术博客:<a href="http://blog.csdn.net/syx1065001748" target="_blank" rel="noopener">并非菜鸟</a></p></blockquote><p>自己的大部分技术博客还是在CSDN上写，而且自己的时间也不是很多，所以Github上边的博客也不是很多。之前很少有时间写博客的，现在工作了，也就会有时间去写了。</p><p>每天都觉得自己没有那么多的时间，也不知道时间都去了哪里。但是大部分时间都被自己浪费了吧。<br><a id="more"></a><br>记得自己上大学的时候，每天中午都是别人睡醒了，自己才躺下，尤其是到了学期期末的时候，就连在路上都不敢耽误一点。每天晚上都到1、2点钟才睡，自己做了什么，自己并不知道。有些时候是为了赶学期期末的大作业在写代码。但是大多数的时候都是在看一些视频吧。记得有时候半夜3、4点钟的时候，突然看起Mybatis的教学视频，然后停不下来了。结果第二天没起来。自己现在想一想，那都是因为自己太贪玩造成的结果。自己平时学习的东西和知道的东西挺多的，但是最后自己发现对那些东西只是一个知道，甚至可能连那个东西是什么？做什么用的都不知道。</p><p>真心的希望自己能够改掉这些恶习，投入到自己平时的学习中来。让自己得到提升。<br>现在工作了，感觉有事情做，每一天都很充实，都很快。每当自己没有事情的时候都很难受，希望自己能找点事做。</p><p>想到自己上大学的时候参加过很多的ACM的比赛，也拿到过奖。想到去哈工大去参加比赛的事情，觉得自己的大学还是没有白上。想到自己在班级中也算是一个会编程的大神还是很厉害的。想到自己平时帮助过很多同学解决了那么多的BUG，自己还是很佩服自己的。想到这些，现在自己还是对自己很有信心的，相信自己对代码、程序是有一定的认识和了解的。觉得自己生下来对这个来感。要不然也不能写代码入了迷，都忘记吃饭。<br>希望自己能够在这条路上走的更远。</p>]]></content>
    
    <summary type="html">
    
      此时此刻的心情
    
    </summary>
    
    
      <category term="随笔" scheme="https://us-forever.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>welcome</title>
    <link href="https://us-forever.com/2017/05/03/welcome/"/>
    <id>https://us-forever.com/2017/05/03/welcome/</id>
    <published>2017-05-03T09:45:44.000Z</published>
    <updated>2018-01-08T09:57:01.276Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>欢迎来到我的博客，这是我的第一篇博客，这个博客经过我很长时间，反反复复的搞，终于搞得像个样子了，终于算是成功了，然后在搞这个博客的前前后后中，学到了很多东西。了解了很多。</p></blockquote><blockquote><p>很早我就有了Github账户，可是那时自己还不知道Git怎么用，然后就跑到网上买了一本书叫<strong>《Git权威指南》</strong>的书，但是自己并没有看多少。</p></blockquote><p>然后自己就在另外一个网站上学习了Git的相关课程。大概算是有一个了解吧。</p><a id="more"></a><p>后来在Github上无意间看到了Github Pages,然后自己按照相应的介绍，自己也是搭建起来自己的博客，但是那会还不到了解MarkDown怎么弄，也不知道如何使用Jekll创建自己的博客。</p><p>不过自己看到网站里边的资源全是静态的，所以自己也是改了一些文件，然后生成可一个主页。</p><p>后来才知道Jekll是一个工具，主要是使用的Ruby,而现在自己建立起来的Github Pages 时使用的Hexo,使用的语言是Node.js而且自己对如何使用Hexo还是了解了不少。</p><p>在创建博客的过程中，我学到了很多关于Git的相关知识，觉得自己还是很充实的。<br>而且自己也终于建起自己的Github Pages了,很开心。</p><p>不过现在自己也在纠结一件事情，那就是以后写博客到底在哪里写？</p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;欢迎来到我的博客，这是我的第一篇博客，这个博客经过我很长时间，反反复复的搞，终于搞得像个样子了，终于算是成功了，然后在搞这个博客的前前后后中，学到了很多东西。了解了很多。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;很早我就有了Github账户，可是那时自己还不知道Git怎么用，然后就跑到网上买了一本书叫&lt;strong&gt;《Git权威指南》&lt;/strong&gt;的书，但是自己并没有看多少。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;然后自己就在另外一个网站上学习了Git的相关课程。大概算是有一个了解吧。&lt;/p&gt;
    
    </summary>
    
    
      <category term="随笔" scheme="https://us-forever.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
</feed>
